"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[213],{36030:function(e,t,n){n.d(t,{N5:function(){return C},Y4:function(){return E},mW:function(){return P},mY:function(){return A}});var r=n(1413),i=n(45987),a=n(13967),s=n(14868),l=n(58165),o=n(81918),c=n(72791),u=n(22020),d=n(31148),f=n(79406),h=n(42320),x=n(50765),v=n(24351),Z=n(610),y=n(68244),p=n(75545),m=n(80184),g=["allArtifactKeys","selectedArtifactKeys","setArtifactKeys","getName","getImage","label"],j=["artSetKeys","setArtSetKeys"],b=["mainStatKeys","setMainStatKeys"],S=["substatKeys","setSubstatKeys"],w=["allArtifactKeys","selectedArtifactKey","setArtifactKey","getName","getImage","label","disable","showDefault","defaultText","defaultIcon","flattenCorners"],K=["allArtSetKeys","artSetKey","setArtSetKey","label","flattenCorners"];function k(e){var t=e.allArtifactKeys,n=e.selectedArtifactKeys,u=e.setArtifactKeys,d=e.getName,f=e.getImage,h=e.label,x=(0,i.Z)(e,g),y=(0,a.Z)(),p=(0,c.useMemo)((function(){return t.map((function(e){return{key:e,label:d(e)}}))}),[t,d]);return(0,m.jsx)(s.Z,(0,r.Z)({autoHighlight:!0,multiple:!0,options:p,value:n.map((function(e){return{key:e,label:d(e)}})),onChange:function(e,t){u(t.map((function(e){return e.key})))},getOptionLabel:function(e){return e.label},isOptionEqualToValue:function(e,t){return e.key===t.key},renderInput:function(e){return(0,m.jsx)(l.Z,(0,r.Z)((0,r.Z)({},e),{},{label:h,variant:"filled",InputLabelProps:{style:{color:y.palette.text.primary}},color:n.length?"success":"primary",type:"search"}))},renderOption:function(e,t){return(0,m.jsx)(Z.Z,{value:t.key,image:f(t.key),text:t.label,theme:y,isSelected:n.includes(t.key),props:e},t.key)},renderTags:function(e,t){return e.map((function(e,n){var i=v.Kj.find((function(t){return e.key==="".concat(t,"_dmg_")})),a=i||void 0;return(0,c.createElement)(o.Z,(0,r.Z)((0,r.Z)({},t({index:n})),{},{key:e.key,icon:f(e.key),label:e.label,color:a}))}))}},x))}function C(e){var t=e.artSetKeys,n=e.setArtSetKeys,a=(0,i.Z)(e,j),s=(0,h.Z)(d.y.getAll,[]),l=(0,u.$)("artifact").t;return s?(0,m.jsx)(k,(0,r.Z)({allArtifactKeys:v.q2,selectedArtifactKeys:t,setArtifactKeys:n,getName:function(e){return s[e].nameRaw},getImage:function(e){return s[e].defIcon},label:l("autocompleteLabels.set")},a)):null}function A(e){var t=e.mainStatKeys,n=e.setMainStatKeys,a=(0,i.Z)(e,b),s=(0,u.$)("artifact").t;return(0,m.jsx)(k,(0,r.Z)({allArtifactKeys:x.r,selectedArtifactKeys:t,setArtifactKeys:n,getName:function(e){return f.ZP.getArtStr(e)},getImage:function(e){return p.Z[e]},label:s("autocompleteLabels.mainStat")},a))}function P(e){var t=e.substatKeys,n=e.setSubstatKeys,a=(0,i.Z)(e,S),s=(0,u.$)("artifact").t;return(0,m.jsx)(k,(0,r.Z)({allArtifactKeys:x._,selectedArtifactKeys:t,setArtifactKeys:n,getName:function(e){return f.ZP.getArtStr(e)},getImage:function(e){return p.Z[e]},label:s("autocompleteLabels.substat")},a))}function I(e){var t=e.allArtifactKeys,n=e.selectedArtifactKey,l=e.setArtifactKey,o=e.getName,u=e.getImage,d=e.label,f=e.disable,h=void 0===f?function(){return!1}:f,x=e.showDefault,v=void 0!==x&&x,p=e.defaultText,g=void 0===p?"":p,j=(e.defaultIcon,e.flattenCorners),b=void 0!==j&&j,S=(0,i.Z)(e,w),K=(0,a.Z)(),k=(0,c.useMemo)((function(){return(v?[{key:"",label:g}]:[]).concat(t.map((function(e){return{key:e,label:o(e)}})))}),[t,o,g,v]);return(0,m.jsx)(s.Z,(0,r.Z)({autoHighlight:!0,options:k,value:{key:n,label:o(n)},onChange:function(e,t){return l(t?t.key:"")},getOptionLabel:function(e){return e.label?e.label:g},isOptionEqualToValue:function(e,t){return e.key===t.key},getOptionDisabled:function(e){return!!e.key&&h(e.key)},renderInput:function(e){return(0,m.jsx)(y.Z,(0,r.Z)((0,r.Z)({},e),{},{label:d,startAdornment:u(n),hasValue:!!n,flattenCorners:b}))},renderOption:function(e,t){return(0,m.jsx)(Z.Z,{value:t.key,image:u(t.key),text:t.label,theme:K,isSelected:n===t.key,props:e},t.key)}},S))}function E(e){var t=e.allArtSetKeys,n=void 0===t?v.q2:t,a=e.artSetKey,s=e.setArtSetKey,l=e.label,o=void 0===l?"":l,c=e.flattenCorners,f=(0,i.Z)(e,K),x=(0,h.Z)(d.y.getAll,[]),Z=(0,u.$)("artifact").t;return o=o||Z("autocompleteLabels.set"),x?(0,m.jsx)(I,(0,r.Z)({allArtifactKeys:n,selectedArtifactKey:a,setArtifactKey:s,getName:function(e){return e&&x[e].nameRaw},getImage:function(e){return e?x[e].defIcon:(0,m.jsx)(m.Fragment,{})},label:o,flattenCorners:c},f)):null}},92443:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(1413),i=n(45987),a=n(66934),s=n(24518),l=n(80184),o=["children","disabled"],c=(0,a.ZP)(s.Z)((function(e){var t=e.theme;return{"&.Mui-disabled":{backgroundColor:t.palette.primary.dark,color:t.palette.text.secondary}}}));function u(e){var t=e.children,n=(e.disabled,(0,i.Z)(e,o));return(0,l.jsx)(c,(0,r.Z)((0,r.Z)({},n),{},{disabled:!0,children:t}))}},66585:function(e,t,n){n.r(t),n.d(t,{default:function(){return gt}});var r,i=n(30168),a=n(93433),s=n(29439),l=n(1413),o=n(53174),c=n(54483),u=n(43245),d=n(98268),f=n(68087),h=n(49670),x=n(54091),v=n(66934),Z=n(13967),y=n(95193),p=n(47047),m=n(9585),g=n(39504),j=n(61889),b=n(2199),S=n(68870),w=n(24518),K=n(20890),k=n(23786),C=n(57064),A=n(49900),P=n(13239),I=n(94070),E=n(72791),R=n(22020),F=n(76899),L=n(36030),M=n(45987),O=n(24351),N=n(33890),T=n(10157),U=n(80184),V=["rarity","onChange","filter"];function z(e){var t=e.rarity,n=e.onChange,a=e.filter,s=(0,M.Z)(e,V),o=(0,R.$)("artifact").t;return(0,U.jsx)(N.Z,(0,l.Z)((0,l.Z)({},s),{},{title:t?(0,U.jsx)(T.t,{stars:t}):o(r||(r=(0,i.Z)(["editor.rarity"]))),color:t?"success":"primary",children:[5,4,3].map((function(e){return(0,U.jsx)(k.Z,{disabled:!a(e),onClick:function(){return n(e)},children:(0,U.jsx)(T.t,{stars:e})},e)}))}))}var D,G=n(94721),W=n(95614),_=["slotKey","onChange","hasUnselect"];function q(e){var t=e.slotKey,n=void 0===t?"":t,r=e.onChange,a=e.hasUnselect,s=void 0!==a&&a,o=(0,M.Z)(e,_),c=(0,R.$)(["artifact","ui"]).t;return(0,U.jsxs)(N.Z,(0,l.Z)((0,l.Z)({title:c(n?"artifact:slotName:".concat(n):"artifact:slot"),color:n?"success":"primary",startIcon:n?(0,W.Ir)(n):void 0},o),{},{children:[s&&(0,U.jsxs)(k.Z,{selected:""===n,disabled:""===n,onClick:function(){return r("")},children:[(0,U.jsx)(C.Z,{children:(0,U.jsx)(h.Z,{})}),(0,U.jsx)(A.Z,{children:c(D||(D=(0,i.Z)(["ui:unselect"])))})]}),s&&(0,U.jsx)(G.Z,{}),O.eV.map((function(e){return(0,U.jsxs)(k.Z,{selected:n===e,disabled:n===e,onClick:function(){return r(e)},children:[(0,U.jsx)(C.Z,{children:(0,W.Ir)(e)}),(0,U.jsx)(A.Z,{children:c("artifact:slotName:".concat(e))})]},e)}))]}))}var B=n(3992),$=n(71310),Y=n(68198),H=n(58165),X=["value","onChange","disabled","float"];function J(e){var t=e.value,n=e.onChange,r=e.disabled,i=void 0!==r&&r,a=e.float,o=void 0!==a&&a,c=(0,M.Z)(e,X),u=(0,E.useState)(""),d=(0,s.Z)(u,2),f=d[0],h=d[1],x=(0,E.useCallback)((function(){if(""===f)return n(0);var e=o?parseFloat:parseInt;n(e(f))}),[n,f,o]);return(0,E.useEffect)((function(){var e;return h(null!==(e=null===t||void 0===t?void 0:t.toString())&&void 0!==e?e:"")}),[t,h]),(0,U.jsx)(H.Z,(0,l.Z)({value:f,"aria-label":"custom-input",type:"number",onChange:function(e){return h(e.target.value)},onBlur:x,disabled:i,onKeyDown:function(e){return"Enter"===e.key&&x()}},c))}var Q=n(55942),ee=n(9321),te=n(75545),ne=n(19272),re=n(31148),ie=n(56928),ae=n(45748),se=n(92830),le=n(79406),oe=n(68544),ce=n(42320),ue=n(50765),de=JSON.parse('{"5":{"def_":{"24.0":"24.1"},"critRate_":{"8.5":"8.6","19.5":"19.4","23.0":"22.9"}}}');var fe=n(60393),he=n(72838),xe=n(55221),ve=n(46797);function Ze(e){var t=e.efficiency,n=e.max,r=void 0!==n&&n,i=e.t,a=e.valid,s=r?"maxSubEff":"curSubEff";return(0,U.jsx)($.Z,{sx:{py:1,px:2},children:(0,U.jsxs)(j.ZP,{container:!0,spacing:1,children:[(0,U.jsx)(j.ZP,{item:!0,children:i("editor.".concat(s))}),(0,U.jsx)(j.ZP,{item:!0,flexGrow:1,children:(0,U.jsx)(xe.Z,{title:(0,U.jsxs)("span",{children:[(0,U.jsx)(K.Z,{variant:"h6",children:i("editor.".concat(s))}),(0,U.jsx)(K.Z,{children:(0,U.jsx)(F.c,{t:i,i18nKey:"editor.".concat(s,"Desc")})})]})})}),(0,U.jsx)(j.ZP,{item:!0,xs:"auto",children:(0,U.jsx)(ve.Z,{valid:a,max:900,value:a?t:"ERR"})})]})})}var ye,pe,me,ge,je,be,Se,we=n(10600),Ke=n(25617),ke=n(92443);function Ce(e){var t,n=e.index,r=e.artifact,s=e.setSubstat,l=(0,R.$)("artifact").t,o=null!==r&&void 0!==r?r:{},c=o.mainStatKey,u=void 0===c?"":c,d=o.rarity,f=void 0===d?5:d,h=null!==(t=null===r||void 0===r?void 0:r.substats[n])&&void 0!==t?t:{},x=h.key,v=void 0===x?"":x,Z=h.value,y=void 0===Z?0:Z,p=h.rolls,m=void 0===p?[]:p,g=h.efficiency,P=void 0===g?0:g,I=m.reduce((function(e,t){return e+t}),0),E=le.ZP.unit(v),L=m.length,M="",O=[],T=0;if(r){var V=r.rarity,z=ne.Z.rollInfo(V),D=z.numUpgrades,G=z.high;T=D+G-3-L,O=v?ne.Z.getSubstatRollData(v,V):[]}var W=7-O.length;return!L&&v&&y&&(M=M||l(ye||(ye=(0,i.Z)(["editor.substat.error.noCalc"])))),T<0&&(M=M||l("editor.substat.error.noOverRoll",{value:T+L})),(0,U.jsxs)($.Z,{children:[(0,U.jsx)(S.Z,{sx:{display:"flex"},children:(0,U.jsxs)(b.Z,{size:"small",sx:{width:"100%",display:"flex"},children:[(0,U.jsxs)(N.Z,{startIcon:v?te.Z[v]:void 0,title:v?le.ZP.getArtStr(v):l("editor.substat.substatFormat",{value:n+1}),disabled:!r,color:v?"success":"primary",sx:{whiteSpace:"nowrap"},children:[v&&(0,U.jsx)(k.Z,{onClick:function(){return s(n,{key:"",value:0})},children:l(pe||(pe=(0,i.Z)(["editor.substat.noSubstat"])))}),ue._.filter((function(e){return u!==e})).map((function(e){return(0,U.jsxs)(k.Z,{selected:v===e,disabled:v===e,onClick:function(){return s(n,{key:e,value:0})},children:[(0,U.jsx)(C.Z,{children:te.Z[e]}),(0,U.jsx)(A.Z,{children:le.ZP.getArtStr(e)})]},e)}))]}),(0,U.jsx)(we.CC,{sx:{flexBasis:30,flexGrow:1},children:(0,U.jsx)(we.ZP,{float:"%"===E,placeholder:l(me||(me=(0,i.Z)(["editor.substat.selectSub"]))),value:v?y:void 0,onChange:function(e){return s(n,{key:v,value:null!==e&&void 0!==e?e:0})},disabled:!v,error:!!M,sx:{px:1},inputProps:{sx:{textAlign:"right"}}})}),!!O.length&&(0,U.jsx)(ke.Z,{children:l(ge||(ge=(0,i.Z)(["editor.substat.nextRolls"])))}),O.map((function(e,t){var r,i,a,l=(0,le.qs)(I+e,E);return l=null!==(r=null===(i=de[f])||void 0===i||null===(a=i[v])||void 0===a?void 0:a[l])&&void 0!==r?r:l,(0,U.jsx)(w.Z,{color:"roll".concat((0,fe.uZ)(W+t,1,6)),disabled:y&&!L||T<=0,onClick:function(){return s(n,{key:v,value:parseFloat(l)})},children:l},t)}))]})}),(0,U.jsx)(S.Z,{sx:{p:1},children:M?(0,U.jsx)(Ke.Z,{color:"error",children:l(je||(je=(0,i.Z)(["ui:error"])))}):(0,U.jsxs)(j.ZP,{container:!0,children:[(0,U.jsx)(j.ZP,{item:!0,children:(0,U.jsx)(Ke.Z,{color:0===L?"secondary":"roll".concat((0,fe.uZ)(L,1,6)),children:L?l("editor.substat.RollCount",{count:L}):l(be||(be=(0,i.Z)(["editor.substat.noRoll"])))})}),(0,U.jsx)(j.ZP,{item:!0,flexGrow:1,children:!!m.length&&(0,a.Z)(m).sort().map((function(e,t){return(0,U.jsx)(K.Z,{component:"span",color:"roll".concat((0,fe.uZ)(W+O.indexOf(e),1,6),".main"),sx:{ml:1},children:(0,le.qs)(e,E)},"".concat(t,".").concat(e))}))}),(0,U.jsx)(j.ZP,{item:!0,xs:"auto",flexShrink:1,children:(0,U.jsx)(K.Z,{children:(0,U.jsxs)(F.c,{t:l,i18nKey:"editor.substat.eff",color:"text.secondary",children:["Efficiency: ",(0,U.jsx)(ve.Z,{valid:!0,max:100*L,value:P||l(Se||(Se=(0,i.Z)(["editor.substat.noStat"])))})]})})})]})})]})}var Ae=n.p+"static/media/scan_art_main.66f01e51a69c518e4278.png",Pe=n.p+"static/media/snippet.d223e79704fd95bcb783.png";function Ie(e){var t=e.modalShow,n=e.hide;return(0,U.jsx)(ee.Z,{open:t,onClose:n,children:(0,U.jsxs)(B.Z,{children:[(0,U.jsx)(g.Z,{sx:{py:1},children:(0,U.jsxs)(j.ZP,{container:!0,children:[(0,U.jsx)(j.ZP,{item:!0,flexGrow:1,children:(0,U.jsx)(K.Z,{variant:"subtitle1",children:"How do Upload Screenshots for parsing"})}),(0,U.jsx)(j.ZP,{item:!0,children:(0,U.jsx)(Y.Z,{onClick:n})})]})}),(0,U.jsx)(G.Z,{}),(0,U.jsxs)(g.Z,{children:[(0,U.jsxs)(I.Z,{variant:"outlined",severity:"warning",children:["NOTE: Artifact Scanning currently only work for ",(0,U.jsx)("strong",{children:"ENGLISH"})," artifacts."]}),(0,U.jsxs)(j.ZP,{container:!0,spacing:1,mt:1,children:[(0,U.jsx)(j.ZP,{item:!0,xs:8,md:4,children:(0,U.jsx)(S.Z,{component:"img",alt:"snippet of the screen to take",src:Pe,width:"100%",height:"auto"})}),(0,U.jsxs)(j.ZP,{item:!0,xs:12,md:8,children:[(0,U.jsx)(K.Z,{gutterBottom:!0,children:"Using screenshots can dramatically decrease the amount of time you manually input in stats on the Genshin Optimizer."}),(0,U.jsx)(K.Z,{variant:"h5",children:"Where to snip the screenshot."}),(0,U.jsxs)(K.Z,{gutterBottom:!0,children:["In game, Open your bag, and navigate to the artifacts tab. Select the artifact you want to scan with Genshin Optimizer. ",(0,U.jsx)("b",{children:"Only artifact from this screen can be scanned."})]}),(0,U.jsx)(K.Z,{variant:"h6",children:"Single artifact"}),(0,U.jsxs)(K.Z,{gutterBottom:!0,children:["To take a screenshot, in Windows, the shortcut is ",(0,U.jsx)("strong",{children:"Shift + WindowsKey + S"}),". Once you selected the region, the image is automatically included in your clipboard."]}),(0,U.jsx)(K.Z,{variant:"h6",children:"Multiple artifacts"}),(0,U.jsxs)(K.Z,{gutterBottom:!0,children:["To take advantage of batch uploads, you can use a tool like ",(0,U.jsx)("a",{href:"https://picpick.app/",target:"_blank",rel:"noreferrer",children:"PicPick"})," to create a macro to easily to screenshot a region to screenshot multiple artifacts at once."]}),(0,U.jsx)(K.Z,{variant:"h5",children:"What to include in the screenshot."}),(0,U.jsx)(K.Z,{children:"As shown in the Image, starting from the top with the artifact name, all the way to the set name(the text in green). "})]}),(0,U.jsxs)(j.ZP,{item:!0,xs:12,md:7,children:[(0,U.jsx)(K.Z,{variant:"h5",children:"Adding Screenshot to Genshin Optimizer"}),(0,U.jsx)(K.Z,{children:"At this point, you should have the artifact snippet either saved to your harddrive, or in your clipboard."}),(0,U.jsx)(K.Z,{gutterBottom:!0,children:'You can click on the box next to "Browse" to browse the files in your harddrive for multiple screenshots.'}),(0,U.jsxs)(K.Z,{children:["For single screenshots from the snippets, just press ",(0,U.jsx)("strong",{children:"Ctrl + V"})," to paste from your clipboard."]}),(0,U.jsxs)(K.Z,{gutterBottom:!0,children:["You should be able to see a Preview of your artifact snippet, and after waiting a few seconds, the artifact set and the substats will be filled in in the ",(0,U.jsx)("b",{children:"Artifact Editor"}),"."]}),(0,U.jsx)(K.Z,{variant:"h5",children:"Finishing the Artifact"}),(0,U.jsxs)(K.Z,{children:["Unfortunately, computer vision is not 100%. There will always be cases where something is not scanned properly. You should always double check the scanned artifact values! Once the artifact has been filled, Click on ",(0,U.jsx)("strong",{children:"Add Artifact"})," to finish editing the artifact."]})]}),(0,U.jsx)(j.ZP,{item:!0,xs:8,md:5,children:(0,U.jsx)(S.Z,{component:"img",alt:"main screen after importing stats",src:Ae,width:"100%",height:"auto"})})]})]}),(0,U.jsx)(G.Z,{}),(0,U.jsx)(g.Z,{sx:{py:1},children:(0,U.jsx)(Y.Z,{large:!0,onClick:n})})]})})}var Ee=n(37762),Re=n(74165),Fe=n(15861),Le=n(31362),Me=n(91702),Oe=n(15671),Ne=n(43144),Te=function(){function e(t,n){(0,Oe.Z)(this,e),this.data={},this.init=void 0,this.deinit=void 0,this.init=t,this.deinit=n}return(0,Ne.Z)(e,[{key:"borrow",value:function(){var e=(0,Fe.Z)((0,Re.Z)().mark((function e(t,n){var r,i;return(0,Re.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.data[t]||(this.data[t]={value:this.init(t),refCount:0}),(r=this.data[t]).refCount+=1,e.next=5,n(r.value);case 5:return i=e.sent,r.refCount-=1,r.refCount||(delete this.data[t],this.deinit(t,r.value)),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Ue={r:255,g:204,b:50},Ve=new Te(function(){var e=(0,Fe.Z)((0,Re.Z)().mark((function e(t){var n,r;return(0,Re.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,Le.createScheduler)(),r=Array(2).fill(0).map(function(){var e=(0,Fe.Z)((0,Re.Z)().mark((function e(r){var i;return(0,Re.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,Le.createWorker)({errorHandler:console.error}),e.next=3,i.load();case 3:return e.next=5,i.loadLanguage(t);case 5:return e.next=7,i.initialize(t);case 7:n.addWorker(i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.any(r);case 4:return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e,t){t.then((function(e){return e.terminate()}))})),ze=function(e,t){switch(t.type){case"upload":return{processed:e.processed,outstanding:[].concat((0,a.Z)(e.outstanding),(0,a.Z)(t.files))};case"processing":return{processed:e.processed,outstanding:(0,a.Z)(e.outstanding)};case"processed":return e.outstanding[0].file===t.file?{processed:[].concat((0,a.Z)(e.processed),[t.result]),outstanding:e.outstanding.slice(1)}:e;case"pop":return{processed:e.processed.slice(1),outstanding:e.outstanding};case"clear":return{processed:[],outstanding:[]}}};function De(e){if(!e.result){var t=e.file,n=e.fileName;e.imageURL=tt(t),e.result=e.imageURL.then(function(){var e=(0,Fe.Z)((0,Re.Z)().mark((function e(r){var i,a,l,o,c,u;return(0,Re.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re.y.getAll;case 2:return i=e.sent,e.next=5,it(r);case 5:return a=e.sent,l=ot(i,a.rarities,ct(a.artifactSetTexts,i),ft(a.whiteTexts),vt(a.substatTexts),ht(a.whiteTexts),xt(a.whiteTexts)),o=(0,s.Z)(l,2),c=o[0],u=o[1],e.abrupt("return",{file:t,result:{fileName:n,imageURL:r,artifact:c,texts:u}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}var Ge,We,_e,qe,Be,$e,Ye,He,Xe,Je,Qe,et,tt=function(e){return new Promise((function(t){var n=new FileReader;n.onloadend=function(e){var n=e.target;return t(n.result)},n.readAsDataURL(e)}))},nt=function(e){return new Promise((function(t){var n=new Image;n.onload=function(e){var n=e.target;return t(function(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),n.getImageData(0,0,e.width,e.height)}(n))},n.src=e}))};function rt(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").putImageData(e,0,0),t}function it(e){return at.apply(this,arguments)}function at(){return(at=(0,Fe.Z)((0,Re.Z)().mark((function e(t){var n,r,i,a,l,o,c,u,d,f,h;return(0,Re.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt(t);case 2:return n=e.sent,r=n.width,i=Math.floor(n.height/2),a={rectangle:{top:i,left:0,width:r,height:i}},l=[st(Zt(n,[140,140,140],[255,255,255],{mode:"bw",region:"top"})),st(Zt(n,[30,50,80],[160,160,160],{region:"bot"}),a),st(Zt(n,[30,160,30],[200,255,200],{mode:"bw",region:"bot"}),a)],o=ut(n.data,n.width,n.height),e.next=9,Promise.all(l);case 9:return c=e.sent,u=(0,s.Z)(c,3),d=u[0],f=u[1],h=u[2],e.abrupt("return",{whiteTexts:d,substatTexts:f,artifactSetTexts:h,rarities:o});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(e){return lt.apply(this,arguments)}function lt(){return lt=(0,Fe.Z)((0,Re.Z)().mark((function e(t){var n,r,i,a=arguments;return(0,Re.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:void 0,r=rt(t),e.next=4,Ve.borrow("eng",function(){var e=(0,Fe.Z)((0,Re.Z)().mark((function e(t){return(0,Re.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return e.next=4,e.sent.addJob("recognize",r,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return i=e.sent,e.abrupt("return",i.data.lines.map((function(e){return e.text})));case 6:case"end":return e.stop()}}),e)}))),lt.apply(this,arguments)}function ot(e,t,n,r,i,l,o){var c,u=(0,a.Z)(new Set([].concat((0,a.Z)(n),["EmblemOfSeveredFate"]))),d=-1,f=[{setKey:"EmblemOfSeveredFate",rarity:3,level:0,slotKey:"flower",mainStatKey:"hp",substats:[],location:"",lock:!1,exclude:!1}],h=(0,fe.O)(O.En,(function(t){var r=0;n.size&&(r+=(0,a.Z)(n).reduce((function(n,r){return n+(e[r].rarity.includes(t)?1:0)}),0)/n.size);if(i.length){var s=i.reduce((function(e,n){return e+(ne.Z.getSubstatRolls(n.key,n.value,t).length?1:0)}),0);r+=s/i.length*2}return r})),x=(0,Ee.Z)(O.eV);try{for(x.s();!(c=x.n()).done;){var v,Z=c.value,y=(0,Ee.Z)(ne.Z.slotMainStats(Z));try{var p=function(){for(var t=v.value,i=(r.has(Z)?1:0)+(l.has(t)?1:0),a=o.filter((function(e){return"%"!==e.unit||"%"===le.ZP.unit(t)})).map((function(e){return e.mainStatValue})),c=function(){var r=(0,s.Z)(y[x],2),l=r[0],o=r[1],c=parseInt(l),h=u.filter((function(t){return e[t].rarity.includes(c)})),v=i+o;if(v+2<d)return"continue";var p,m=(0,Ee.Z)(a);try{var g=function(){var e,r=p.value,i=ne.Z.mainStatValues(c,t),a=Math.max(0,i.findIndex((function(e){return e>=r}))),s=i[a],l=v+(s===r?1:0),o=(0,Ee.Z)(h);try{for(o.s();!(e=o.n()).done;){var u=e.value,x=l+(n.has(u)?1:0);x>=d&&(x>d&&(f=[]),d=x,f.push({setKey:u,rarity:c,level:a,slotKey:Z,mainStatKey:t,substats:[],location:"",lock:!1,exclude:!1}))}}catch(y){o.e(y)}finally{o.f()}};for(m.s();!(p=m.n()).done;)g()}catch(K){m.e(K)}finally{m.f()}if(v>=d){var j,b=(0,Ee.Z)(h);try{for(b.s();!(j=b.n()).done;){var S=j.value,w=v+(n.has(S)?1:0);w>d&&(f=[]),d=w,f.push({setKey:S,rarity:c,level:0,slotKey:Z,mainStatKey:t,substats:[],location:"",lock:!1,exclude:!1})}}catch(K){b.e(K)}finally{b.f()}}},x=0,y=Object.entries(h);x<y.length;x++)c()};for(y.s();!(v=y.n()).done;)p()}catch(R){y.e(R)}finally{y.f()}}}catch(R){x.e(R)}finally{x.f()}var m={},g={setKey:new Set,rarity:new Set,level:new Set,slotKey:new Set,mainStatKey:new Set,mainStatVal:new Set},j=f[0],b=ne.Z.mainStatValue(j.mainStatKey,j.rarity,j.level);j.substats=i.filter((function(e,t){return e.key!==j.mainStatKey&&i.slice(0,t).every((function(t){return t.key!==e.key}))}));for(var S=j.substats.length;S<4;S++)j.substats.push({key:"",value:0});for(var w=0,K=f;w<K.length;w++){var k=K[w];g.setKey.add(k.setKey),g.rarity.add(k.rarity),g.level.add(k.level),g.slotKey.add(k.slotKey),g.mainStatKey.add(k.mainStatKey)}function C(e,t,n){return(0,U.jsxs)(U.Fragment,{children:["Unknown ",t," : Set to ",(0,U.jsx)(Me.Z,{color:"error",children:n(e)})]})}function A(e,t,n){return(0,U.jsxs)(U.Fragment,{children:["Detected ",t," ",(0,U.jsx)(Me.Z,{color:"success",children:n(e)})]})}function P(e,t,n){return(0,U.jsxs)(U.Fragment,{children:["Inferred ",t," ",(0,U.jsx)(Me.Z,{color:"warning",children:n(e)})]})}function I(e,t,n,r){var i=new Set((0,a.Z)(g[e]).filter((function(e){return t.has(e)})));i.size>1?m[e]=function(e,t,n,r){return(0,U.jsxs)(U.Fragment,{children:["Ambiguous ",n," ",(0,U.jsx)(Me.Z,{color:"error",children:r(e)})," : May also be ",t.filter((function(t){return t!==e})).map((function(e,t){return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("b",{children:t>0?"/":""}),(0,U.jsx)(Me.Z,{color:"warning",children:r(e)})]})}))]})}(j[e],(0,a.Z)(t),n,r):1===i.size?m[e]=A(j[e],n,r):g[e].size>1?m[e]=C(j[e],n,r):m[e]=P(j[e],n,r)}I("setKey",n,"Set",(function(t){return e[t].name})),I("rarity",t,"Rarity",(function(e){return(0,U.jsxs)(U.Fragment,{children:[e," ",1!==e?"Stars":"Star"]})})),I("slotKey",r,"Slot",(function(e){return(0,U.jsx)(U.Fragment,{children:ne.Z.slotName(e)})})),I("mainStatKey",l,"Main Stat",(function(e){return(0,U.jsx)(U.Fragment,{children:le.ZP.getStr(e)})})),m.substats=(0,U.jsx)(U.Fragment,{children:j.substats.filter((function(e){return""!==e.key})).map((function(e,t){return(0,U.jsx)("div",{children:A(e,"Sub Stat",(function(e){return(0,U.jsxs)(U.Fragment,{children:[le.ZP.getStr(e.key),"+",(0,le.qs)(e.value,le.ZP.unit(e.key)),le.ZP.unit(e.key)]})}))},t)}))});var E=function(e){return(0,U.jsxs)(U.Fragment,{children:[(0,le.qs)(e,le.ZP.unit(j.mainStatKey)),le.ZP.unit(j.mainStatKey)]})};return o.find((function(e){return e.mainStatValue===b}))?l.has(j.mainStatKey)?(m.level=A(j.level,"Level",(function(e){return"+"+e})),m.mainStatVal=A(b,"Main Stat value",E)):(m.level=P(j.level,"Level",(function(e){return"+"+e})),m.mainStatVal=P(b,"Main Stat value",E)):(m.level=C(j.level,"Level",(function(e){return"+"+e})),m.mainStatVal=C(b,"Main Stat value",E)),[j,m]}function ct(e,t){var n,r=new Set([]),i=(0,Ee.Z)(e);try{for(i.s();!(n=i.n()).done;){var a,s=n.value,l=(0,Ee.Z)(O.q2);try{for(l.s();!(a=l.n()).done;){var o=a.value;(0,fe.UX)(s.replace(/\W/g,""),t[o].nameRaw.replace(/\W/g,""))<=2&&r.add(o)}}catch(c){l.e(c)}finally{l.f()}}}catch(c){i.e(c)}finally{i.f()}return r}function ut(e,t,n){for(var r=e,i=0,a=0,s=new Set([]),l=0;l<n;l++){for(var o=0,c=!1,u=0;u<t;u++){var d=4*(l*t+u);dt({r:r[d],g:r[d+1],b:r[d+2]},Ue)?c||(c=!0,o++):c=!1}i!==o?(i=o,a=1):i&&++a>=10&&s.add((0,fe.uZ)(i,3,5))}return s}function dt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,r=function(e,t){return Math.abs(e-t)<=n};return r(e.r,t.r)&&r(e.g,t.g)&&r(e.b,t.b)}function ft(e){var t,n=new Set,r=(0,Ee.Z)(e);try{for(r.s();!(t=r.n()).done;){var i,a=t.value,s=(0,Ee.Z)(O.eV);try{for(s.s();!(i=s.n()).done;){var l=i.value;(0,fe.UX)(a.replace(/\W/g,""),ne.Z.slotName(l).replace(/\W/g,""))<=2&&n.add(l)}}catch(o){s.e(o)}finally{s.f()}}}catch(o){r.e(o)}finally{r.f()}return n}function ht(e){var t,n=new Set([]),r=(0,Ee.Z)(e);try{for(r.s();!(t=r.n()).done;){var i,a=t.value,s=(0,Ee.Z)(ue.r);try{for(s.s();!(i=s.n()).done;){var l,o,c,u=i.value;a.toLowerCase().includes(null!==(l=null===(o=le.ZP.getStr(u))||void 0===o?void 0:o.toLowerCase())&&void 0!==l?l:"")&&n.add(u),u.includes("_bonu")&&(0,fe.UX)(a.replace(/\W/g,""),(null!==(c=le.ZP.getStr(u))&&void 0!==c?c:"").replace(/\W/g,""))<=1&&n.add(u)}}catch(d){s.e(d)}finally{s.f()}}}catch(d){r.e(d)}finally{r.f()}return n}function xt(e){var t,n=[],r=(0,Ee.Z)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=/(\d+[,|\\.]+\d)%/,s=a.exec(i);s&&n.push({mainStatValue:parseFloat(s[1].replace(/,/g,".").replace(/\.{2,}/g,".")),unit:"%"}),(s=(a=/(\d+[,|\\.]\d{3}|\d{2,3})/).exec(i))&&n.push({mainStatValue:parseInt(s[1].replace(/[,|\\.]+/g,""))})}}catch(l){r.e(l)}finally{r.f()}return n}function vt(e){var t,n=[],r=(0,Ee.Z)(e);try{var i=function(){var e=t.value;e=e.replace(/^[\W]+/,"").replace(/\n/,""),ue._.forEach((function(t){var r=le.ZP.getStr(t),i=("%"===le.ZP.unit(t)?new RegExp(r+"\\s*\\+\\s*(\\d+[\\.|,]+\\d)%","im"):new RegExp(r+"\\s*\\+\\s*(\\d+,\\d+|\\d+)($|\\s)","im")).exec(e);i&&n.push({key:t,value:parseFloat(i[1].replace(/,/g,".").replace(/\.{2,}/g,"."))})}))};for(r.s();!(t=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}return n.slice(0,4)}function Zt(e,t,n,r){for(var i=r.region,a=void 0===i?"all":i,s=r.mode,l=void 0===s?"color":s,o=Uint8ClampedArray.from(e.data),c="top"===a,u="bot"===a,d="all"===a,f="bw"===l,h="invert"===l,x=Math.floor(e.width*(e.height/2)*4),v=0;v<o.length;v+=4){var Z=o[v],y=o[v+1],p=o[v+2];(d||c&&v<x||u&&v>x)&&Z>=t[0]&&Z<=n[0]&&y>=t[1]&&y<=n[1]&&p>=t[2]&&p<=n[2]?f?o[v]=o[v+1]=o[v+2]=0:h&&(o[v]=255-Z,o[v+1]=255-y,o[v+2]=255-p):o[v]=o[v+1]=o[v+2]=255}return new ImageData(o,e.width,e.height)}var yt=new Set(ue._);function pt(e,t){switch(t.type){case"reset":return;case"substat":var n=t.index,r=t.substat,i=r.key?e.substats.findIndex((function(e){return e.key===r.key})):-1;if(-1===i||i===n)e.substats[n]=r;else{var a=[e.substats[i],e.substats[n]];e.substats[n]=a[0],e.substats[i]=a[1]}return(0,l.Z)({},e);case"overwrite":return t.artifact;case"update":return(0,l.Z)((0,l.Z)({},e),t.artifact)}}var mt=(0,v.ZP)("input")({display:"none"});function gt(e){var t,n,r=e.artifactIdToEdit,v=void 0===r?"":r,M=e.cancelEdit,T=e.allowUpload,V=void 0!==T&&T,D=e.allowEmpty,G=void 0!==D&&D,W=e.disableEditSetSlot,_=void 0!==W&&W,H=(0,R.$)("artifact").t,X=(0,ce.Z)(re.y.getAll,[]),ue=(0,E.useContext)(ie.t).database,de=(0,E.useState)(!1),xe=(0,s.Z)(de,2),ve=xe[0],ye=xe[1],pe=(0,oe.Z)(),me=(0,s.Z)(pe,2),ge=me[0],je=me[1];(0,E.useEffect)((function(){return ue.followAnyArt(je)}),[ue,je]);var be=(0,E.useReducer)(pt,void 0),Se=(0,s.Z)(be,2),we=Se[0],Ke=Se[1],ke=(0,E.useMemo)((function(){return we&&(0,ae.R$)(we)}),[we]),Ae=(0,E.useState)(!1),Pe=(0,s.Z)(Ae,2),Ee=Pe[0],Re=Pe[1],Fe=(0,E.useReducer)(ze,{processed:[],outstanding:[]}),Le=(0,s.Z)(Fe,2),Me=Le[0],Oe=Me.processed,Ne=Me.outstanding,Te=Le[1],Ue=Oe[0],Ve=Ne[0],tt=(0,ce.Z)(null===Ve||void 0===Ve?void 0:Ve.imageURL,[null===Ve||void 0===Ve?void 0:Ve.imageURL]),nt=(0,ce.Z)(null===Ve||void 0===Ve?void 0:Ve.result,[null===Ve||void 0===Ve?void 0:Ve.result]),rt=Oe.length+Ne.length,it=null!==(t=null===Ue||void 0===Ue?void 0:Ue.imageURL)&&void 0!==t?t:tt,at=null!==Ue&&void 0!==Ue?Ue:{},st=at.artifact,lt=at.texts,ot=_||!(null===ke||void 0===ke||!ke.location);(0,E.useEffect)((function(){!ke&&st&&Ke({type:"overwrite",artifact:st})}),[ke,st,Ke]),(0,E.useEffect)((function(){var e=Math.min(16-Oe.length,3,Ne.length),t=e&&!Ne[0].result;Ne.slice(0,e).forEach(De),t&&Te({type:"processing"})}),[Oe.length,Ne]),(0,E.useEffect)((function(){nt&&Te((0,l.Z)({type:"processed"},nt))}),[nt,Te]);var ct=(0,E.useCallback)((function(e){ye(!0),Te({type:"upload",files:(0,a.Z)(e).map((function(e){return{file:e,fileName:e.name}}))})}),[Te,ye]),ut=(0,E.useCallback)((function(){return Te({type:"clear"})}),[Te]);(0,E.useEffect)((function(){var e=function(e){return ct(e.clipboardData.files)};return V&&window.addEventListener("paste",e),function(){V&&window.removeEventListener("paste",e)}}),[ct,V]);var dt=(0,E.useCallback)((function(e){ct(e.target.files),e.target.value=null}),[ct]),ft=(0,E.useMemo)((function(){var e,t=ge&&v&&ue._getArt(v);if(t)return{old:t,oldType:"edit"};if(void 0===ke)return{old:void 0,oldType:""};var n=ge&&ue.findDuplicates(ke),r=n.duplicated,i=n.upgraded;return{old:null!==(e=r[0])&&void 0!==e?e:i[0],oldType:0!==r.length?"duplicate":"upgrade"}}),[ke,v,ue,ge]),ht=ft.old,xt=ft.oldType,vt=(0,E.useMemo)((function(){if(!ke)return{artifact:void 0,errors:[]};var e=(0,se.BG)(ke,v);return ht&&(e.artifact.location=ht.location,e.artifact.exclude=ht.exclude),e}),[ke,v,ht]),Zt=vt.artifact,gt=vt.errors;(0,E.useEffect)((function(){"new"===v&&(ye(!0),Ke({type:"reset"}));var e=v&&ge&&ue._getArt(v);e&&(ye(!0),Ke({type:"overwrite",artifact:(0,fe.I8)(e)}))}),[v,ue,ge]);var jt=ke?null===X||void 0===X?void 0:X[ke.setKey]:void 0,bt=(0,E.useCallback)((function(){null===M||void 0===M||M(),Te({type:"pop"}),Ke({type:"reset"})}),[M,Ke]),St=(0,E.useCallback)((function(e){var t,n,r=e.setKey?X[e.setKey]:jt;function i(e,t,n){return e&&t.includes(e)?e:null!==n&&void 0!==n?n:t[0]}e.setKey&&(e.rarity=i(null===ke||void 0===ke?void 0:ke.rarity,r.rarity,Math.max.apply(Math,(0,a.Z)(r.rarity))),e.slotKey=i(null===ke||void 0===ke?void 0:ke.slotKey,r.slots)),e.rarity&&(e.level=null!==(t=null===ke||void 0===ke?void 0:ke.level)&&void 0!==t?t:0),e.level&&(e.level=(0,fe.uZ)(e.level,0,4*(null!==(n=e.rarity)&&void 0!==n?n:ke.rarity))),e.slotKey&&(e.mainStatKey=i(null===ke||void 0===ke?void 0:ke.mainStatKey,ne.Z.slotMainStats(e.slotKey))),e.mainStatKey&&(e.substats=[0,1,2,3].map((function(t){return ke&&ke.substats[t].key!==e.mainStatKey?ke.substats[t]:{key:"",value:0}}))),Ke({type:"update",artifact:e})}),[ke,X,jt,Ke]),wt=(0,E.useCallback)((function(e,t){Ke({type:"substat",index:e,substat:t})}),[Ke]),Kt=!gt.length,kt=null!==ke&&void 0!==ke?ke:{},Ct=kt.rarity,At=void 0===Ct?5:Ct,Pt=kt.level,It=void 0===Pt?0:Pt,Et=kt.slotKey,Rt=void 0===Et?"flower":Et,Ft=Zt?ne.Z.getArtifactEfficiency(Zt,yt):{},Lt=Ft.currentEfficiency,Mt=void 0===Lt?0:Lt,Ot=Ft.maxEfficiency,Nt=void 0===Ot?0:Ot,Tt=Oe.length||Ne.length,Ut=(0,E.useCallback)((function(e){Tt&&e.preventDefault(),ye(!1),M()}),[Tt,ye,M]),Vt=(0,Z.Z)(),zt=(0,y.Z)(Vt.breakpoints.up("md")),Dt=ke?O.Kj.find((function(e){return ke.mainStatKey.includes(e)})):void 0,Gt=ke?null!==Dt&&void 0!==Dt?Dt:"success":"primary";return(0,U.jsx)(ee.Z,{open:ve,onClose:Ut,children:(0,U.jsx)(E.Suspense,{fallback:(0,U.jsx)(p.Z,{variant:"rectangular",sx:{width:"100%",height:ve?"100%":64}}),children:(0,U.jsxs)(B.Z,{children:[(0,U.jsx)(Ie,{modalShow:Ee,hide:function(){return Re(!1)}}),(0,U.jsx)(m.Z,{title:(0,U.jsx)(F.c,{t:H,i18nKey:"editor.title",children:"Artifact Editor"}),action:(0,U.jsx)(Y.Z,{disabled:!!Tt,onClick:Ut})}),(0,U.jsxs)(g.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,U.jsxs)(j.ZP,{container:!0,spacing:1,columns:{xs:1,md:2},children:[(0,U.jsxs)(j.ZP,{item:!0,xs:1,display:"flex",flexDirection:"column",gap:1,children:[(0,U.jsxs)(b.Z,{sx:{display:"flex",mb:1},children:[(0,U.jsx)(L.Y4,{size:"small",disableClearable:!0,artSetKey:null!==(n=null===ke||void 0===ke?void 0:ke.setKey)&&void 0!==n?n:"",setArtSetKey:function(e){return St({setKey:e})},sx:{flexGrow:1},disabled:ot}),(0,U.jsx)(z,{rarity:ke?At:void 0,onChange:function(e){return St({rarity:e})},filter:function(e){var t,n;return!(null===jt||void 0===jt||null===(t=jt.rarity)||void 0===t||null===(n=t.includes)||void 0===n||!n.call(t,e))},disabled:ot||!jt})]}),(0,U.jsxs)(S.Z,{component:"div",display:"flex",children:[(0,U.jsx)(J,{id:"filled-basic",label:"Level",variant:"filled",sx:{flexShrink:1,flexGrow:1,mr:1,my:0},margin:"dense",size:"small",value:It,disabled:!jt,placeholder:"0~".concat(4*At),onChange:function(e){return St({level:e})}}),(0,U.jsxs)(b.Z,{children:[(0,U.jsx)(w.Z,{onClick:function(){return St({level:It-1})},disabled:!jt||0===It,children:"-"}),At?(0,a.Z)(Array(At+1).keys()).map((function(e){return 4*e})).map((function(e){return(0,U.jsx)(w.Z,{onClick:function(){return St({level:e})},disabled:!jt||It===e,children:e},e)})):null,(0,U.jsx)(w.Z,{onClick:function(){return St({level:It+1})},disabled:!jt||It===4*At,children:"+"})]})]}),(0,U.jsxs)(S.Z,{component:"div",display:"flex",children:[(0,U.jsx)(q,{disabled:ot||!jt,slotKey:Rt,onChange:function(e){return St({slotKey:e})}}),(0,U.jsx)($.Z,{sx:{p:1,ml:1,flexGrow:1},children:(0,U.jsx)(E.Suspense,{fallback:(0,U.jsx)(p.Z,{width:"60%"}),children:(0,U.jsx)(K.Z,{color:"text.secondary",children:null!==jt&&void 0!==jt&&jt.getSlotName(ke.slotKey)?(0,U.jsxs)("span",{children:[(0,U.jsx)(Q.Z,{src:jt.slotIcons[ke.slotKey]})," ",null===jt||void 0===jt?void 0:jt.getSlotName(ke.slotKey)]}):H(We||(We=(0,i.Z)(["editor.unknownPieceName"])))})})})]}),(0,U.jsxs)(S.Z,{component:"div",display:"flex",children:[(0,U.jsx)(N.Z,{startIcon:Dt?te.h[Dt]:null!==ke&&void 0!==ke&&ke.mainStatKey?te.Z[ke.mainStatKey]:void 0,title:(0,U.jsx)("b",{children:ke?le.ZP.getArtStr(ke.mainStatKey):H(_e||(_e=(0,i.Z)(["mainStat"])))}),disabled:!jt,color:Gt,children:ne.Z.slotMainStats(Rt).map((function(e){return(0,U.jsxs)(k.Z,{selected:(null===ke||void 0===ke?void 0:ke.mainStatKey)===e,disabled:(null===ke||void 0===ke?void 0:ke.mainStatKey)===e,onClick:function(){return St({mainStatKey:e})},children:[(0,U.jsx)(C.Z,{children:te.Z[e]}),(0,U.jsx)(A.Z,{children:le.ZP.getArtStr(e)})]},e)}))}),(0,U.jsx)($.Z,{sx:{p:1,ml:1,flexGrow:1},children:(0,U.jsx)(K.Z,{color:"text.secondary",children:ke?"".concat((0,le.qs)(ne.Z.mainStatValue(ke.mainStatKey,At,It),le.ZP.unit(ke.mainStatKey))).concat(le.ZP.unit(ke.mainStatKey)):H(qe||(qe=(0,i.Z)(["mainStat"])))})})]}),(0,U.jsx)(Ze,{valid:Kt,efficiency:Mt,t:H}),Mt!==Nt&&(0,U.jsx)(Ze,{max:!0,valid:Kt,efficiency:Nt,t:H}),V&&(0,U.jsx)($.Z,{children:(0,U.jsx)(g.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:(0,U.jsxs)(E.Suspense,{fallback:(0,U.jsx)(p.Z,{width:"100%",height:"100"}),children:[(0,U.jsxs)(j.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,U.jsx)(j.ZP,{item:!0,flexGrow:1,children:(0,U.jsxs)("label",{htmlFor:"contained-button-file",children:[(0,U.jsx)(mt,{accept:"image/*",id:"contained-button-file",multiple:!0,type:"file",onChange:dt}),(0,U.jsx)(w.Z,{component:"span",startIcon:(0,U.jsx)(u.Z,{}),children:"Upload Screenshot (or Ctrl-V)"})]})}),(0,U.jsx)(j.ZP,{item:!0,children:(0,U.jsx)(w.Z,{color:"info",sx:{px:2,minWidth:0},onClick:function(){return Re(!0)},children:(0,U.jsx)(K.Z,{children:(0,U.jsx)(c.G,{icon:o.Fuz})})})})]}),it&&(0,U.jsx)(S.Z,{display:"flex",justifyContent:"center",children:(0,U.jsx)(S.Z,{component:"img",src:it,width:"100%",maxWidth:350,height:"auto",alt:"Screenshot to parse for artifact values"})}),rt>0&&(0,U.jsx)(B.Z,{sx:{pl:2},children:(0,U.jsxs)(j.ZP,{container:!0,spacing:1,alignItems:"center",children:[!Ue&&Ve&&(0,U.jsx)(j.ZP,{item:!0,children:(0,U.jsx)(P.Z,{size:"1em"})}),(0,U.jsx)(j.ZP,{item:!0,flexGrow:1,children:(0,U.jsx)(K.Z,{children:(0,U.jsxs)("span",{children:["Screenshots in file-queue: ",(0,U.jsx)("b",{children:rt})]})})}),(0,U.jsx)(j.ZP,{item:!0,children:(0,U.jsx)(w.Z,{size:"small",color:"error",onClick:ut,children:"Clear file-queue"})})]})})]})})})]}),(0,U.jsxs)(j.ZP,{item:!0,xs:1,display:"flex",flexDirection:"column",gap:1,children:[[0,1,2,3].map((function(e){return(0,U.jsx)(Ce,{index:e,artifact:Zt,setSubstat:wt},e)})),lt&&(0,U.jsx)($.Z,{children:(0,U.jsxs)(g.Z,{children:[(0,U.jsx)("div",{children:lt.slotKey}),(0,U.jsx)("div",{children:lt.mainStatKey}),(0,U.jsx)("div",{children:lt.mainStatVal}),(0,U.jsx)("div",{children:lt.rarity}),(0,U.jsx)("div",{children:lt.level}),(0,U.jsx)("div",{children:lt.substats}),(0,U.jsx)("div",{children:lt.setKey})]})})]})]}),ht&&(0,U.jsxs)(j.ZP,{container:!0,sx:{justifyContent:"space-around"},spacing:1,children:[(0,U.jsx)(j.ZP,{item:!0,xs:12,md:5.5,lg:4,children:(0,U.jsxs)($.Z,{children:[(0,U.jsx)(K.Z,{sx:{textAlign:"center"},py:1,variant:"h6",color:"text.secondary",children:H("edit"!==xt?"duplicate"===xt?Be||(Be=(0,i.Z)(["editor.dupArt"])):$e||($e=(0,i.Z)(["editor.upArt"])):Ye||(Ye=(0,i.Z)(["editor.beforeEdit"])))}),(0,U.jsx)(he.Z,{artifactObj:ht})]})}),zt&&(0,U.jsx)(j.ZP,{item:!0,md:1,display:"flex",alignItems:"center",justifyContent:"center",children:(0,U.jsx)($.Z,{sx:{display:"flex"},children:(0,U.jsx)(d.Z,{sx:{fontSize:40}})})}),(0,U.jsx)(j.ZP,{item:!0,xs:12,md:5.5,lg:4,children:(0,U.jsxs)($.Z,{children:[(0,U.jsx)(K.Z,{sx:{textAlign:"center"},py:1,variant:"h6",color:"text.secondary",children:H(He||(He=(0,i.Z)(["editor.preview"])))}),(0,U.jsx)(he.Z,{artifactObj:Zt})]})})]}),!Kt&&(0,U.jsx)(I.Z,{variant:"filled",severity:"error",children:gt.map((function(e,t){return(0,U.jsx)("div",{children:e},t)}))}),(0,U.jsxs)(j.ZP,{container:!0,spacing:2,children:[(0,U.jsx)(j.ZP,{item:!0,children:"edit"===xt?(0,U.jsx)(w.Z,{startIcon:(0,U.jsx)(f.Z,{}),onClick:function(){ue.updateArt(we,ht.id),G?bt():(ye(!1),M())},disabled:!we||!Kt,color:"primary",children:H(Xe||(Xe=(0,i.Z)(["editor.btnSave"])))}):(0,U.jsx)(w.Z,{startIcon:(0,U.jsx)(f.Z,{}),onClick:function(){ue.createArt(ke),G?bt():(ye(!1),M())},disabled:!ke||!Kt,color:"duplicate"===xt?"warning":"primary",children:H(Je||(Je=(0,i.Z)(["editor.btnAdd"])))})}),(0,U.jsx)(j.ZP,{item:!0,flexGrow:1,children:G&&(0,U.jsx)(w.Z,{startIcon:(0,U.jsx)(h.Z,{}),disabled:!ke,onClick:function(){window.confirm(H(Ge||(Ge=(0,i.Z)(["editor.clearPrompt"]))))&&bt()},color:"error",children:H(Qe||(Qe=(0,i.Z)(["editor.btnClear"])))})}),(0,U.jsx)(j.ZP,{item:!0,children:!1}),ht&&"edit"!==xt&&(0,U.jsx)(j.ZP,{item:!0,children:(0,U.jsx)(w.Z,{startIcon:(0,U.jsx)(x.Z,{}),onClick:function(){ue.updateArt(we,ht.id),G?bt():ye(!1)},disabled:!we||!Kt,color:"success",children:H(et||(et=(0,i.Z)(["editor.btnUpdate"])))})})]})]})]})})})}}}]);
//# sourceMappingURL=213.95c3d92e.chunk.js.map