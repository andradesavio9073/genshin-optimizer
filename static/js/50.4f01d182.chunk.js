"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[50],{15678:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(93433),i=n(61889),a=n(90388),l=n(68870),c=n(79406),o=n(50765),s=n(91839),u=n(75545),f=n(80184);function d(e){var t=e.selectedKeys,n=e.onChange,d=o._.slice(0,6),x=o._.slice(6),h=t.filter((function(e){return d.includes(e)})),v=t.filter((function(e){return x.includes(e)}));return(0,f.jsxs)(i.ZP,{container:!0,spacing:1,children:[(0,f.jsx)(i.ZP,{item:!0,xs:12,md:6,children:(0,f.jsx)(s.Z,{fullWidth:!0,value:h,onChange:function(e,t){return n([].concat((0,r.Z)(v),(0,r.Z)(t)))},sx:{height:"100%"},children:d.map((function(e){return(0,f.jsx)(a.Z,{size:"small",value:e,children:(0,f.jsxs)(l.Z,{display:"flex",gap:1,alignItems:"center",children:[u.ZP[e],c.ZP.getArtStr(e)]})},e)}))})}),(0,f.jsx)(i.ZP,{item:!0,xs:12,md:6,children:(0,f.jsx)(s.Z,{fullWidth:!0,value:v,onChange:function(e,t){return n([].concat((0,r.Z)(h),(0,r.Z)(t)))},sx:{height:"100%"},children:x.map((function(e){return(0,f.jsx)(a.Z,{size:"small",value:e,children:(0,f.jsxs)(l.Z,{display:"flex",gap:1,alignItems:"center",children:[u.ZP[e],c.ZP.getArtStr(e)]})},e)}))})})]})}},10600:function(e,t,n){n.d(t,{CC:function(){return v},ZP:function(){return Z},el:function(){return x}});var r=n(29439),i=n(1413),a=n(45987),l=n(66934),c=n(4834),o=n(24518),s=n(72791),u=n(80184),f=["children","disableRipple","disableFocusRipple","disableTouchRipple"],d=["value","onChange","disabled","float"],x=(0,l.ZP)(c.ZP)((function(e){var t=e.theme;return{backgroundColor:t.palette.primary.main,transition:"all 0.5s ease","&:hover":{backgroundColor:t.palette.primary.dark},"&.Mui-focused":{backgroundColor:t.palette.primary.dark},"&.Mui-disabled":{backgroundColor:t.palette.primary.dark}}})),h=(0,l.ZP)(o.Z)((function(e){return{backgroundColor:e.theme.palette.primary.main,padding:0,overflow:"hidden",div:{width:"100%",height:"100%"}}}));function v(e){var t=e.children,n=(e.disableRipple,e.disableFocusRipple,e.disableTouchRipple,(0,a.Z)(e,f));return(0,u.jsx)(h,(0,i.Z)((0,i.Z)({disableRipple:!0,disableFocusRipple:!0,disableTouchRipple:!0},n),{},{children:t}))}function Z(e){var t=e.value,n=void 0===t?0:t,l=e.onChange,c=e.disabled,o=void 0!==c&&c,f=e.float,h=void 0!==f&&f,v=(0,a.Z)(e,d),Z=(0,s.useState)(n),p=(0,r.Z)(Z,2),y=p[0],m=p[1],j=(0,s.useState)(!1),g=(0,r.Z)(j,2),b=g[0],k=g[1],C=(0,s.useMemo)((function(){return h?parseFloat:parseInt}),[h]),w=(0,s.useCallback)((function(){l(y),k(!1)}),[l,y,k]),E=(0,s.useCallback)((function(){k(!0)}),[k]);(0,s.useEffect)((function(){return m(n)}),[n,m]);var S=(0,s.useCallback)((function(e){return m(C(e.target.value)||0)}),[m,C]),P=(0,s.useCallback)((function(e){return"Enter"===e.key&&w()}),[w]);return(0,u.jsx)(x,(0,i.Z)({value:b&&!y?"":y,"aria-label":"custom-input",type:"number",inputProps:{step:h?.1:1},onChange:S,onBlur:w,onFocus:E,disabled:o,onKeyDown:P},v))}},55221:function(e,t,n){var r=n(1413),i=n(45987),a=n(53174),l=n(54483),c=n(68870),o=n(96106),s=n(80184),u=["className"];t.Z=function(e){var t=e.className,n=(0,i.Z)(e,u);return(0,s.jsx)(o.Z,(0,r.Z)((0,r.Z)({placement:"top"},n),{},{className:t,children:(0,s.jsx)(c.Z,{component:"span",sx:{cursor:"help"},children:(0,s.jsx)(l.G,{icon:a.sqG})})}))}},901:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(29439),i=n(25617),a=n(60393),l=n(80184);function c(e){var t=e.value,n=e.max,c=void 0===n?1:n,o=e.valid,s="number"===typeof t?["roll".concat((0,a.uZ)(Math.floor(t/c*10)-4,1,6)),t.toFixed()+"%"]:["secondary",t],u=(0,r.Z)(s,2),f=u[0],d=u[1];return t>c&&(o=!1),o||(f="error"),(0,l.jsx)(i.Z,{color:f,children:d})}},14525:function(e,t,n){n.d(t,{Z:function(){return _},b:function(){return K}});var r,i,a=n(29439),l=n(30168),c=n(4942),o=n(1413),s=n(53174),u=n(54483),f=n(39504),d=n(20890),x=n(2199),h=n(23786),v=n(24518),Z=n(52791),p=n(72791),y=n(22020),m=n(97714),j=n(13746),g=n(26138),b=n(79406),k=n(74544),C=n(71310),w=n(10600),E=n(33890),S=n(55221),P=n(80184);function _(e){var t=e.disabled,n=void 0!==t&&t,s=(0,y.$)("page_character").t,u=(0,p.useContext)(m.K).character.key,x=(0,p.useContext)(j.R).data,h=(0,k.Z)(u),v=h.buildSetting.statFilters,b=h.buildSettingDispatch,w=(0,p.useCallback)((function(e){return b({statFilters:e})}),[b]),E=(0,p.useMemo)((function(){var e=["atk","hp","def","eleMas","critRate_","critDMG_","heal_","enerRech_"];"catalyst"!==x.get(g.ri.weaponType).value&&e.push("physical_dmg_");var t=x.get(g.ri.charEle).value;return e.push("".concat(t,"_dmg_")),e}),[x]),_=(0,p.useMemo)((function(){return E.filter((function(e){return!Object.keys(v).some((function(t){return t===e}))}))}),[E,v]),M=(0,p.useCallback)((function(e,t){return w((0,o.Z)((0,o.Z)({},v),{},(0,c.Z)({},e,t)))}),[v,w]);return(0,P.jsxs)(Z.Z,{children:[(0,P.jsx)(C.Z,{children:(0,P.jsxs)(f.Z,{sx:{display:"flex",gap:1,justifyContent:"space-between"},children:[(0,P.jsx)(d.Z,{children:s(r||(r=(0,l.Z)(["tabOptimize.constraintFilter.title"])))}),(0,P.jsx)(S.Z,{title:(0,P.jsx)(d.Z,{children:s(i||(i=(0,l.Z)(["tabOptimize.constraintFilter.tooltip"])))})})]})}),(0,P.jsxs)(Z.Z,{display:"flex",flexDirection:"column",gap:.5,children:[Object.entries(v).map((function(e){var t=(0,a.Z)(e,2),r=t[0],i=t[1];return(0,P.jsx)(K,{statKey:r,statKeys:_,setFilter:M,disabled:n,value:i,close:function(){var e=(0,o.Z)({},v);delete e[r],w((0,o.Z)({},e))}},r)})),(0,P.jsx)(K,{statKeys:_,setFilter:M,disabled:n})]})]})}function K(e){var t=e.statKey,n=e.statKeys,r=void 0===n?[]:n,i=e.value,a=void 0===i?0:i,l=e.close,c=e.setFilter,o=e.disabled,f=void 0!==o&&o,d="%"===b.ZP.unit(t),Z=(0,p.useCallback)((function(e){return t&&c(t,e)}),[c,t]);return(0,P.jsxs)(x.Z,{sx:{width:"100%"},children:[(0,P.jsx)(E.Z,{title:t?(0,P.jsx)(b._J,{statKey:t}):"New Stat",disabled:f,color:t?"success":"secondary",children:r.map((function(e){return(0,P.jsx)(h.Z,{onClick:function(){null===l||void 0===l||l(),c(e,a)},children:(0,P.jsx)(b._J,{statKey:e})},e)}))}),(0,P.jsx)(w.CC,{sx:{flexBasis:30,flexGrow:1},children:(0,P.jsx)(w.ZP,{disabled:!t||f,float:d,value:a,placeholder:"Stat Value",onChange:Z,sx:{px:2},inputProps:{sx:{textAlign:"right"}},endAdornment:b.ZP.unit(t)})}),!!l&&(0,P.jsx)(v.Z,{color:"error",onClick:l,disabled:f,children:(0,P.jsx)(u.G,{icon:s.I7k})})]})}},72838:function(e,t,n){n.d(t,{N:function(){return $},Z:function(){return Q}});var r,i,a,l,c=n(93433),o=n(30168),s=n(29439),u=n(53174),f=n(54483),d=n(40117),x=n(62002),h=n(63204),v=n(66647),Z=n(68870),p=n(47047),y=n(20890),m=n(13400),j=n(81918),g=n(39504),b=n(2199),k=n(40165),C=n(24518),w=n(72791),E=n(22020),S=n(95614),P=n(71310),_=n(31038),K=n(40020),M=n(91702),R=n(20005),F=n(55221),G=n(25617),A=n(10157),O=n(75545),z=n(98620),D=n(31148),I=n(7618),N=n(79406),V=n(63372),B=n(42320),T=n(50765),q=n(60393),W=n(901),H=n(80184),L=(0,w.lazy)((function(){return Promise.all([n.e(788),n.e(213)]).then(n.bind(n,66585))})),J=new Set(T._);function Q(e){var t,n,c,q=e.artifactId,Q=e.artifactObj,$=e.onClick,X=e.onDelete,Y=e.mainStatAssumptionLevel,ee=void 0===Y?0:Y,te=e.effFilter,ne=void 0===te?J:te,re=e.editor,ie=void 0!==re&&re,ae=e.canExclude,le=void 0!==ae&&ae,ce=e.canEquip,oe=void 0!==ce&&ce,se=e.extraButtons,ue=(0,E.$)(["artifact","ui"]).t,fe=(0,w.useContext)(I.t).database,de=(0,V.Z)(q),xe=(0,B.Z)((function(){var e;return D.y.get(null===(e=null!==Q&&void 0!==Q?Q:de)||void 0===e?void 0:e.setKey)}),[Q,de]),he=!Q,ve=(0,w.useState)(!1),Ze=(0,s.Z)(ve,2),pe=Ze[0],ye=Ze[1],me=(0,w.useCallback)((function(){return ye(!1)}),[ye]),je=(0,w.useCallback)((function(){return he&&ye(!0)}),[he,ye]),ge=(0,w.useCallback)((function(e){return(0,H.jsx)(v.Z,{onClick:function(){return q&&(null===$||void 0===$?void 0:$(q))},sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})}),[$,q]),be=(0,w.useCallback)((function(e){return(0,H.jsx)(Z.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})}),[]),ke=null!==Q&&void 0!==Q?Q:de,Ce=(0,w.useMemo)((function(){if(!ke)return{currentEfficiency:0,maxEfficiency:0,currentEfficiency_:0,maxEfficiency_:0};var e=z.Z.getArtifactEfficiency(ke,ne),t=e.currentEfficiency,n=e.maxEfficiency,r=z.Z.getArtifactEfficiency(ke,new Set(T._));return{currentEfficiency:t,maxEfficiency:n,currentEfficiency_:r.currentEfficiency,maxEfficiency_:r.maxEfficiency}}),[ke,ne]),we=Ce.currentEfficiency,Ee=Ce.maxEfficiency,Se=Ce.currentEfficiency_,Pe=Ce.maxEfficiency_;if(!ke)return null;var _e=ke.id,Ke=ke.lock,Me=ke.slotKey,Re=ke.rarity,Fe=ke.level,Ge=ke.mainStatKey,Ae=ke.substats,Oe=ke.exclude,ze=ke.location,De=void 0===ze?"":ze,Ie=Math.max(Math.min(ee,4*Re),Fe),Ne=N.ZP.unit(Ge),Ve="roll"+(Math.floor(Math.max(Fe,0)/4)+1),Be=0!==Ee,Te=null===xe||void 0===xe?void 0:xe.getSlotName(Me),qe=null===xe||void 0===xe?void 0:xe.getSlotDesc(Me),We=qe&&(0,H.jsx)(F.Z,{title:(0,H.jsxs)(Z.Z,{children:[(0,H.jsx)(w.Suspense,{fallback:(0,H.jsx)(p.Z,{variant:"text",width:100}),children:(0,H.jsx)(y.Z,{variant:"h6",children:Te})}),(0,H.jsx)(y.Z,{children:qe})]})}),He=null===xe||void 0===xe?void 0:xe.setEffects,Le=xe&&He&&(0,H.jsx)(F.Z,{title:(0,H.jsx)("span",{children:Object.keys(He).map((function(e){return(0,H.jsxs)("span",{children:[(0,H.jsx)(y.Z,{variant:"h6",children:(0,H.jsx)(G.Z,{color:"success",children:ue("artifact:setEffectNum",{setNum:e})})}),(0,H.jsx)(y.Z,{children:xe.setEffectDesc(e)})]},e)}))})});return(0,H.jsxs)(w.Suspense,{fallback:(0,H.jsx)(p.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:350}}),children:[ie&&(0,H.jsx)(w.Suspense,{fallback:!1,children:(0,H.jsx)(L,{artifactIdToEdit:pe?q:"",cancelEdit:me})}),(0,H.jsxs)(P.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,H.jsxs)(R.Z,{condition:!!$,wrapper:ge,falseWrapper:be,children:[(0,H.jsxs)(Z.Z,{className:"grad-".concat(Re,"star"),sx:{position:"relative",width:"100%"},children:[!$&&(0,H.jsx)(m.Z,{color:"primary",disabled:!he,onClick:function(){return fe.arts.set(_e,{lock:!Ke})},sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:Ke?(0,H.jsx)(d.Z,{}):(0,H.jsx)(x.Z,{})}),(0,H.jsxs)(Z.Z,{sx:{pt:2,px:2,position:"relative",zIndex:1},children:[(0,H.jsxs)(Z.Z,{component:"div",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,H.jsx)(j.Z,{size:"small",label:(0,H.jsx)("strong",{children:" +".concat(Fe)}),color:Ve}),!Te&&(0,H.jsx)(p.Z,{variant:"text",width:100}),Te&&(0,H.jsx)(y.Z,{noWrap:!0,sx:{textAlign:"center",backgroundColor:"rgba(100,100,100,0.35)",borderRadius:"1em",px:1},children:(0,H.jsx)("strong",{children:Te})}),!We&&(0,H.jsx)(p.Z,{width:10}),We]}),(0,H.jsx)(y.Z,{color:"text.secondary",variant:"body2",children:(0,H.jsx)(S.ZP,{slotKey:Me})}),(0,H.jsx)(y.Z,{variant:"h6",color:"".concat(N.ZP.getVariant(Ge),".main"),children:(0,H.jsxs)("span",{children:[O.ZP[Ge]," ",N.ZP.get(Ge)]})}),(0,H.jsx)(y.Z,{variant:"h5",children:(0,H.jsx)("strong",{children:(0,H.jsxs)(M.Z,{color:Ie!==Fe?"warning":void 0,children:[(0,N.qs)(null!==(t=z.Z.mainStatValue(Ge,Re,Ie))&&void 0!==t?t:0,N.ZP.unit(Ge)),Ne]})})}),(0,H.jsx)(A.t,{stars:Re,colored:!0})]}),(0,H.jsx)(Z.Z,{sx:{height:"100%",position:"absolute",right:0,top:0},children:(0,H.jsx)(Z.Z,{component:"img",src:null!==(n=null===xe||void 0===xe?void 0:xe.slotIcons[Me])&&void 0!==n?n:"",width:"auto",height:"100%",sx:{float:"right"}})})]}),(0,H.jsxs)(g.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column",pt:1,pb:0,width:"100%"},children:[Ae.map((function(e){return!!e.value&&(0,H.jsx)(U,{stat:e,effFilter:ne,rarity:Re},e.key)})),(0,H.jsxs)(Z.Z,{sx:{display:"flex",my:1,gap:1},children:[(0,H.jsx)(y.Z,{color:"text.secondary",component:"span",variant:"caption",sx:{flexGrow:1},children:ue(r||(r=(0,o.Z)(["artifact:editor.curSubEff"])))}),(0,H.jsx)(W.Z,{value:we,max:900,valid:Be}),we!==Se&&(0,H.jsx)(y.Z,{component:"span",variant:"caption",children:"/"}),we!==Se&&(0,H.jsx)(W.Z,{value:Se,max:900,valid:Be})]}),we!==Ee&&(0,H.jsxs)(Z.Z,{sx:{display:"flex",mb:1,gap:1},children:[(0,H.jsx)(y.Z,{color:"text.secondary",component:"span",variant:"caption",sx:{flexGrow:1},children:ue(i||(i=(0,o.Z)(["artifact:editor.maxSubEff"])))}),(0,H.jsx)(W.Z,{value:Ee,max:900,valid:Be}),Ee!==Pe&&(0,H.jsx)(y.Z,{component:"span",variant:"caption",children:"/"}),Ee!==Pe&&(0,H.jsx)(W.Z,{value:Pe,max:900,valid:Be})]}),(0,H.jsx)(Z.Z,{flexGrow:1}),void 0!==ke.probability&&ke.probability>=0&&(0,H.jsxs)("strong",{children:["Probability: ",(100*ke.probability).toFixed(2),"%"]}),(0,H.jsxs)(y.Z,{color:"success.main",children:[null!==(c=null===xe||void 0===xe?void 0:xe.name)&&void 0!==c?c:"Artifact Set"," ",Le]})]})]}),(0,H.jsxs)(Z.Z,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[he&&oe?(0,H.jsx)(_.Z,{sx:{flexGrow:1},size:"small",showDefault:!0,defaultIcon:(0,H.jsx)(h.Z,{}),defaultText:ue("ui:inventory"),value:De,onChange:function(e){return fe.arts.set(q,{location:e})}}):(0,H.jsx)(K.Z,{location:De}),he&&(0,H.jsxs)(b.Z,{sx:{height:"100%"},children:[ie&&(0,H.jsx)(k.Z,{title:(0,H.jsx)(y.Z,{children:ue(a||(a=(0,o.Z)(["artifact:edit"])))}),placement:"top",arrow:!0,children:(0,H.jsx)(C.Z,{color:"info",size:"small",onClick:je,children:(0,H.jsx)(f.G,{icon:u.Xcf,className:"fa-fw"})})}),le&&(0,H.jsx)(k.Z,{title:(0,H.jsxs)(Z.Z,{children:[(0,H.jsx)(y.Z,{children:ue(l||(l=(0,o.Z)(["artifact:excludeArtifactTip"])))}),(0,H.jsx)(y.Z,{children:(0,H.jsx)(M.Z,{color:Oe?"error":"success",children:ue("artifact:".concat(Oe?"excluded":"included"))})})]}),placement:"top",arrow:!0,children:(0,H.jsx)(C.Z,{onClick:function(){return fe.arts.set(_e,{exclude:!Oe})},color:Oe?"error":"success",size:"small",children:(0,H.jsx)(f.G,{icon:Oe?u.gPx:u.Stf,className:"fa-fw"})})}),!!X&&(0,H.jsx)(C.Z,{color:"error",size:"small",onClick:function(){return X(_e)},disabled:Ke,children:(0,H.jsx)(f.G,{icon:u.I7k,className:"fa-fw"})}),se]})]})]})]})}function U(e){var t,n,r,i=e.stat,a=e.effFilter,l=e.rarity,o=null!==(t=null===(n=i.rolls)||void 0===n?void 0:n.length)&&void 0!==t?t:0,s=i.key?z.Z.maxSubstatValues(i.key):0,u=(0,w.useMemo)((function(){return i.key?z.Z.getSubstatRollData(i.key,l):[]}),[i.key,l]),f=7-u.length,d="roll".concat((0,q.uZ)(o,1,6)),x=null!==(r=i.efficiency)&&void 0!==r?r:0,h=i.key&&a.has(i.key),v=(0,q.V2)(.5+x/500*.5),p=N.ZP.getStr(i.key),m=N.ZP.unit(i.key),j=(0,w.useMemo)((function(){return(0,H.jsx)(Z.Z,{display:"flex",gap:.25,height:"1.3em",sx:{opacity:h?1:.3},children:(0,c.Z)(i.rolls).sort().map((function(e,t){return(0,H.jsx)($,{value:100*e/s,color:"roll".concat((0,q.uZ)(f+u.indexOf(e),1,6),".main")},"".concat(t).concat(e))}))})}),[h,i.rolls,s,u,f]);return(0,H.jsxs)(Z.Z,{display:"flex",gap:1,alignContent:"center",children:[(0,H.jsxs)(y.Z,{sx:{flexGrow:1},color:o?"".concat(d,".main"):"error.main",component:"span",children:[O.ZP[i.key]," ",p,"+".concat((0,N.qs)(i.value,N.ZP.unit(i.key))).concat(m)]}),j,(0,H.jsxs)(y.Z,{sx:{opacity:v,minWidth:40,textAlign:"right"},children:[x.toFixed(),"%"]})]})}function $(e){var t=e.color,n=void 0===t?"red":t,r=e.value,i=void 0===r?50:r;return(0,H.jsx)(Z.Z,{sx:{width:7,height:"100%",bgcolor:n,overflow:"hidden",borderRadius:1,display:"inline-block"},children:(0,H.jsx)(Z.Z,{sx:{width:10,height:"".concat(100-(0,q.uZ)(i,0,100),"%"),bgcolor:"gray"}})})}},44824:function(e,t,n){n.d(t,{Af:function(){return u},EM:function(){return x},OQ:function(){return o},bq:function(){return s},sZ:function(){return f},x3:function(){return d}});var r=n(37762),i=n(93433),a=n(24351),l=n(98620),c=n(44217),o=["rarity","level","artsetkey","efficiency","mefficiency","probability"],s=["probability"];function u(){return{artSetKeys:[],rarity:(0,i.Z)(a.En),levelLow:0,levelHigh:20,slotKeys:(0,i.Z)(a.eV),mainStatKeys:[],substats:[],location:"",exclusion:["excluded","included"],locked:["locked","unlocked"]}}var f=function(){return{filterOption:u(),ascending:!1,sortType:o[0]}};function d(e,t){return{rarity:{getValue:function(e){var t;return null!==(t=e.rarity)&&void 0!==t?t:0},tieBreaker:"level"},level:{getValue:function(e){var t;return null!==(t=e.level)&&void 0!==t?t:0},tieBreaker:"artsetkey"},artsetkey:{getValue:function(e){var t;return null!==(t=e.setKey)&&void 0!==t?t:""},tieBreaker:"level"},efficiency:{getValue:function(t){return l.Z.getArtifactEfficiency(t,e).currentEfficiency}},mefficiency:{getValue:function(t){return l.Z.getArtifactEfficiency(t,e).maxEfficiency}},probability:{getValue:function(e){if(!Object.keys(t).length)return 0;var n=e.probability;return void 0===n?(0,c.B)(e,t):n}}}}function x(){return{exclusion:function(e,t){return!(!t.includes("included")&&!e.exclude)&&!(!t.includes("excluded")&&e.exclude)},locked:function(e,t){return!(!t.includes("locked")&&e.lock)&&!(!t.includes("unlocked")&&!e.lock)},location:function(e,t){return!t||("Inventory"===t&&!e.location||(!("Equipped"!==t||!e.location)||t===e.location))},artSetKeys:function(e,t){return!t.length||t.includes(e.setKey)},slotKeys:function(e,t){return t.includes(e.slotKey)},mainStatKeys:function(e,t){return!t.length||t.includes(e.mainStatKey)},levelLow:function(e,t){return t<=e.level},levelHigh:function(e,t){return t>=e.level},rarity:function(e,t){return t.includes(e.rarity)},substats:function(e,t){var n,i=(0,r.Z)(t);try{var a=function(){var t=n.value;if(t&&!e.substats.some((function(e){return e.key===t})))return{v:!1}};for(i.s();!(n=i.n()).done;){var l=a();if("object"===typeof l)return l.v}}catch(c){i.e(c)}finally{i.f()}return!0}}}},44217:function(e,t,n){n.d(t,{B:function(){return g}});var r=n(29439),i=n(37762),a=n(4942),l=n(1413),c=n(93433),o=n(60393),s=n(98620),u=n(12354),f=[3,4,6],d={hp:6,atk:6,def:6,hp_:4,atk_:4,def_:4,eleMas:4,enerRech_:4,critRate_:3,critDMG_:3},x={};function h(e,t,n,r){if(5!==e.length)for(var i=0,s=f;i<s.length;i++){var u=s[i];t[u]>0&&h([].concat((0,c.Z)(e),[u]),(0,l.Z)((0,l.Z)({},t),{},(0,a.Z)({},u,t[u]-u)),n-u,r*t[u]/n)}else(0,o.SR)(x,e,r)}h([0],{3:6,4:20,6:18},44,1),h([3],{3:3,4:20,6:18},41,1),h([4],{3:6,4:16,6:18},40,1),h([6],{3:6,4:20,6:12},38,1);for(var v=Array(6).fill(0).map((function(e,t){for(var n=[1],r=0,i=1;++r<=t;)i*=t-r+1,i/=r,n.push(i);return n})),Z=[[1]],p=function(){var e=Z[Z.length-1],t=Array(e.length+3).fill(0);e.forEach((function(e,n){for(var r=0,i=[0,1,2,3];r<i.length;r++){t[n+i[r]]+=e}})),Z.push(t.map((function(e){return e/4})))};Z.length<6;)p();for(var y=function(){var e=j[m],t=e.reduce((function(e,t){return e+t}));e.forEach((function(e,n,r){r[n]=t,t-=e}))},m=0,j=Z;m<j.length;m++)y();function g(e,t){if(e.rarity<=2)return NaN;var n=e.rarity,c=e.level,h=e.substats,p=(0,l.Z)({},t),y=new Set(Object.keys(p)),m=0,j=e.mainStatKey;if(j in p){var g=4*n;if(u[n][j][g]<p[j])return 0;delete p[j],y.delete(j)}var b,k=(0,i.Z)(h);try{for(k.s();!(b=k.n()).done;){var C=b.value,w=C.key,E=C.value;w?y.has(w)&&(y.delete(w),p[w]>E?p[w]-=E:delete p[w]):m+=1}}catch(z){k.e(z)}finally{k.f()}if(m+=4-h.length,y.size>m||Object.keys(p).length>4)return 0;for(var S=s.Z.rollsRemaining(c,n)-m,P=0,_=Object.entries(p);P<_.length;P++){var K=(0,r.Z)(_[P],2),M=K[0],R=K[1];p[M]=Math.max(Math.ceil(10*R/s.Z.maxSubstatValues(M,n)),1)}var F=0,G=Object.entries(p).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1],a=y.has(n)?1:0,l=Math.ceil(i/10)-a;return F+=l,{target:i,filler:a,minUpgrade:l}})).reverse();if(F>S)return 0;var A=(0,a.Z)({},S,1),O=S-F;return G.forEach((function(e,t){for(var n,i,a,l=e.target,c=e.filler,o=e.minUpgrade,s={},u=o;u<=o+O;u++)for(var f=l-7*(u+c),d=f>0?Z[u+c][f]:1,x=0,h=Object.entries(A);x<h.length;x++){var p,y=(0,r.Z)(h[x],2),m=y[0],j=y[1],g=parseInt(m);if(!(g<u)){var b=(i=u,a=4-t,v[n=g][i]*Math.pow(a-1,n-i)/Math.pow(a,n)),k=g-u;s[k]=(null!==(p=s[k])&&void 0!==p?p:0)+j*d*b}}A=s})),function(e,t,n){var r,a,l=null!==(r=d[e])&&void 0!==r?r:0,c=0,s={3:2,4:5,6:3},u=x[l],h=(0,i.Z)(t);try{for(h.s();!(a=h.n()).done;){var Z=a.value.key;if(Z){var p=d[Z];u=u[p],s[p]-=1}}}catch(z){h.e(z)}finally{h.f()}l&&(s[l]-=1);var y,m={3:0,4:0,6:0},j=(0,i.Z)(n);try{for(j.s();!(y=j.n()).done;){var g=y.value;m[d[g]]+=1}}catch(z){j.e(z)}finally{j.f()}var b=0;(0,o.Q1)(u,[],(function(e){return"number"===typeof e}),(function(e,t){b+=e;var n,r={3:0,4:0,6:0},a=(0,i.Z)(t);try{for(a.s();!(n=a.n()).done;){r[n.value]+=1}}catch(z){a.e(z)}finally{a.f()}var l,o=e,s=(0,i.Z)(f);try{for(s.s();!(l=s.n()).done;){var u=l.value,d=r[u],x=m[u];if(d<x)return;o*=v[d][x]}}catch(z){s.e(z)}finally{s.f()}c+=o}));var k,C=(0,i.Z)(f);try{for(C.s();!(k=C.n()).done;){var w=k.value;c/=v[s[w]][m[w]]}}catch(z){C.e(z)}finally{C.f()}return c/b}(e.mainStatKey,h,y)*Object.values(A).reduce((function(e,t){return e+t}))}},74544:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(29439),i=n(72791),a=n(7618);function l(e){var t=(0,i.useContext)(a.t).database,n=(0,i.useState)((function(){return t.buildSettings.get(e)})),l=(0,r.Z)(n,2),c=l[0],o=l[1];return(0,i.useEffect)((function(){return o(t.buildSettings.get(e))}),[t,e]),(0,i.useEffect)((function(){return t.buildSettings.follow(e,o)}),[e,o,t]),{buildSetting:c,buildSettingDispatch:(0,i.useCallback)((function(n){return e&&t.buildSettings.set(e,n)}),[e,t])}}},63372:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(29439),i=n(72791),a=n(7618);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,i.useContext)(a.t),n=t.database,l=(0,i.useState)(n.arts.get(e)),c=(0,r.Z)(l,2),o=c[0],s=c[1];return(0,i.useEffect)((function(){return s(n.arts.get(e))}),[n,e]),(0,i.useEffect)((function(){return e?n.arts.follow(e,s):void 0}),[e,s,n]),o}}}]);
//# sourceMappingURL=50.4f01d182.chunk.js.map