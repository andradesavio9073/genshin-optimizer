{"version":3,"file":"static/js/595.af95a3a5.chunk.js","mappings":"+HAEMA,GAAYC,E,SAAAA,GAAO,MAAPA,EAAc,gBAAGC,EAAH,EAAGA,MAAH,MAAgB,CAC9CC,QAAS,eACTC,MAAO,OACPC,OAAO,QACPC,WAAY,EACZC,cAAe,cACfC,UAAWN,EAAMO,SAAS,GAC1BC,WAAYR,EAAMO,SAAS,MAC3BE,YAAaT,EAAMO,SAAS,GAC5BG,aAAcV,EAAMO,SAAS,OAG/B,O,sfCUe,SAASI,EAAT,GAAuL,IAAD,EAAnJC,EAAmJ,EAAnJA,MAAOC,EAA4I,EAA5IA,SAAUC,EAAkI,EAAlIA,aAAcC,EAAoH,EAApHA,aAAoH,IAAtGC,UAAAA,OAAsG,aAAnFC,WAAAA,OAAmF,aAA/DC,OAAAA,OAA+D,MAAtD,kBAAM,GAAgD,EAAvCC,GAAuC,YAC3LC,GAAMC,EAAAA,EAAAA,GAAe,MAArBD,EACAE,GAAaC,EAAAA,EAAAA,YAAWC,EAAAA,GAAxBF,SACFG,GAAkBC,EAAAA,EAAAA,GAAWC,EAAAA,EAAAA,OAAuB,IACpDC,GAAiBF,EAAAA,EAAAA,GAAWC,EAAAA,EAAAA,IAAmBf,GAAQ,CAACA,IACxDiB,GAAgBC,EAAAA,EAAAA,UAAQ,kBAAML,IAAmBM,EAAAA,EAAAA,IAAuBT,EAAUG,KAAkB,CAACH,EAAUG,IAC/GO,EAAgBV,EAASW,eAAef,QAAO,SAAAgB,GAAE,OAAmB,OAAfT,QAAe,IAAfA,OAAA,EAAAA,EAAkBS,KAAOhB,EAAOO,EAAgBS,GAAKA,MAAKC,OACrH,OAAO,UAACC,EAAA,GAAD,kBACDjB,GADC,IAELkB,MAAK,iBAAET,QAAF,IAAEA,OAAF,EAAEA,EAAgBU,YAAlB,QAA2BtB,EAAYI,EAAH,sCAAmBN,QAAnB,IAAmBA,EAAAA,EAAgBM,EAAnC,8BACzCmB,MAAO3B,EAAQ,UAAY,UAC3B4B,UAAyB,OAAdZ,QAAc,IAAdA,GAAAA,EAAgBa,UAAW,SAAC3C,EAAA,EAAD,CAAW4C,IAAKd,EAAee,eAAoB3B,GAAY,SAAC4B,EAAA,EAAD,IAAH,OAAyB7B,QAAzB,IAAyBA,EAAAA,GAAgB,SAAC8B,EAAA,EAAD,IAJtI,WAKH5B,IAAeD,GAAY,UAAC8B,EAAA,EAAD,CAAUC,QAAS,kBAAMlC,EAAS,KAAKmC,SAAoB,KAAVpC,EAAcqC,SAAoB,KAAVrC,EAAzE,WAC3B,SAACsC,EAAA,EAAD,WACE,SAACN,EAAA,EAAD,OAEF,SAACO,EAAA,EAAD,CAAYC,QAAQ,UAAUC,QAAM,EAApC,SACGjC,EADH,qCAGY,UAAC0B,EAAA,EAAD,CAAUC,QAAS,kBAAMlC,EAAS,KAAKmC,SAAoB,KAAVpC,EAAcqC,SAAoB,KAAVrC,EAAzE,WACZ,SAACsC,EAAA,EAAD,WACE,SAACL,EAAA,EAAD,OAEF,SAACM,EAAA,EAAD,CAAYC,QAAQ,UAAUC,QAAM,EAApC,SACGjC,EADH,qCAIAH,IAAc,SAACqC,EAAA,EAAD,GAAa,SAC1B7B,GAAmB8B,EAAuB9B,EAAiBO,EAAenB,EAAUD,EAAOiB,OAK3F,SAAS0B,EAAuB9B,EAA2DO,EAA+BnB,GAAwI,IAAlG2C,EAAiG,uDAAvD,GAAI3B,EAAmD,uCACtQ,IAAKA,EAAe,MAAO,GAC3B,IAAM4B,EAAQzB,EACXd,QAAOwC,EAAAA,EAAAA,GAAe,CAAEpB,KAAK,GAAIqB,QAAS,GAAIC,WAAW,GAAIC,SAAU,OAAShC,IAChFiC,KAAI,SAAAC,GAAY,OAAI,SAACC,EAAD,CAAuCvC,gBAAAA,EAAiBsC,aAAAA,EAAcP,qBAAAA,EAAsB3C,SAAAA,EAAUgD,UAAU,GAA7FE,MACpCE,EAAWjC,EACdd,QAAOwC,EAAAA,EAAAA,GAAe,CAAEpB,KAAK,GAAIqB,QAAS,GAAIC,WAAW,GAAIC,SAAU,MAAQhC,IAC/EiC,KAAI,SAAAC,GAAY,OAAI,SAACC,EAAD,CAAuCvC,gBAAAA,EAAiBsC,aAAAA,EAAcP,qBAAAA,EAAsB3C,SAAAA,EAAUgD,UAAU,GAA7FE,MAE1C,OAAON,EAAMS,OAAOD,GAGtB,SAASD,EAAT,GACgM,IAAD,IADvKvC,EACuK,EADvKA,gBAAiBsC,EACsJ,EADtJA,aACsJ,IADxIP,qBAAAA,OACwI,MADjH,GACiH,EAD7G3C,EAC6G,EAD7GA,SAAUgD,EACmG,EADnGA,SAE1F,OAAO,UAACf,EAAA,EAAD,CAAUC,QAAS,kBAAMlC,EAASkD,IAAkCf,SAAUQ,IAAyBO,EAAcd,SAAUO,IAAyBO,EAAxJ,WACL,SAACb,EAAA,EAAD,WACE,SAACpD,EAAA,EAAD,CAAW4C,IAAG,UAAEjB,EAAgBsC,UAAlB,aAAE,EAA+BpB,kBAEjD,SAAC,EAAAwB,SAAD,CAAUC,UAAU,SAACC,EAAA,EAAD,CAAUjB,QAAQ,OAAOlD,MAAO,MAApD,UACE,SAACiD,EAAA,EAAD,CAAYC,QAAQ,UAAUC,QAAM,EAApC,mBACG5B,EAAgBsC,UADnB,aACG,EAA+BzB,SAGnCuB,IAAY,SAAC,IAAD,CAAK5D,QAAQ,OAAOqE,SAAU,IAC1CT,IAAY,SAACU,EAAA,EAAD,CAAUC,GAAI,CAAEC,GAAI,EAAGC,IAAK,QAVkBX,G,mCCxBhD,SAASY,IACtB,IAAQrD,GAAaC,EAAAA,EAAAA,YAAWC,EAAAA,GAAxBF,SAqBFsD,GAAc9C,EAAAA,EAAAA,UAAQ,kBAAOR,EAASW,eAAe4C,SAAQ,CAACvD,IAC9DwD,GAAahD,EAAAA,EAAAA,UAAQ,kBAAOR,EAASyD,WAAWF,SAAQ,CAACvD,IAazD0D,EA/DR,WACE,IAAQ1D,GAAaC,EAAAA,EAAAA,YAAWC,EAAAA,GAAxBF,SACF2D,GAAWC,EAAAA,EAAAA,MAEXC,GAAKC,EAAAA,EAAAA,aAAW,yCACpB,WAAOrB,GAAP,qFACoBzC,EAAS+D,SAAStB,GADtC,wBAIUuB,GAAUC,EAAAA,EAAAA,GAAiBxB,GACjCzC,EAASkE,WAAWF,GALxB,SAMiC3D,EAAAA,EAAAA,IAAmBoC,GANpD,UAMUnC,EANV,wDAQU6D,GAASC,EAAAA,EAAAA,GAAqB9D,EAAe+D,eAC7CC,EAAWtE,EAASuE,aAAaJ,GACvCnE,EAASwE,kBAAkBF,EAAU7B,GAVzC,QAeEkB,EAAS,eAAD,OAAgBlB,EAAhB,gBAfV,4CADoB,sDAkBpB,CAACkB,EAAU3D,IAEb,OAAO6D,EAuCiBY,GAElBC,GAAkBZ,EAAAA,EAAAA,cAAY,WAAgB,IAAfa,EAAc,uDAAP,GAC1CjB,EAAgBiB,KACf,CAACjB,IA6JJ,OAAO,UAACkB,EAAA,EAAD,CAAKjG,QAAQ,OAAOkG,cAAc,SAASC,IAAK,EAAG5B,GAAI,CAAE6B,GAAI,GAA7D,UAEJzB,IAAe,UAAC0B,EAAA,EAAD,CAAOC,SAAS,QAAQnD,QAAQ,SAAhC,iGAA4H,SAACoD,EAAA,EAAD,CAAMC,UAAWC,EAAAA,GAAYC,GAAG,aAAhC,wBAA5H,yBACf7B,IAAc,UAACwB,EAAA,EAAD,CAAOC,SAAS,UAAUnD,QAAQ,SAAlC,mGAAgI,SAACoD,EAAA,EAAD,CAAMC,UAAWC,EAAAA,GAAYC,GAAG,YAAhC,uBAAhI,0BAEd,UAACC,EAAA,EAAD,YACC,SAACC,EAAA,EAAD,CAAarC,GAAI,CAAEsC,GAAI,GAAvB,UACE,SAAC3D,EAAA,EAAD,CAAYC,QAAQ,KAApB,gCAEF,SAACE,EAAA,EAAD,KACA,SAACuD,EAAA,EAAD,CAAarC,GAAI,CAAEvE,QAAS,OAAQkG,cAAe,SAAUC,IAAK,GAAlE,UACE,SAACW,EAAA,EAAD,WACE,SAACF,EAAA,EAAD,WACE,SAAClG,EAAD,CAAyBqG,WAAS,EAACpG,MAhNxB,GAgN6CC,SAAUmF,kB,gLCpP/D,SAASiB,IAA4B,IAAD,EACzC3F,GAAaC,EAAAA,EAAAA,YAAWC,EAAAA,GAAxBF,SACF2D,GAAWC,EAAAA,EAAAA,MAEjB,cAA+BgC,EAAAA,EAAAA,IAAS,CAAEC,KAAM,4BAA6BC,KAAK,WAAlF,QAA8F,CAAEC,OAAQ,CAAEC,IAAK,MAAzGD,OAAUC,IAAAA,OAAhB,MAAsB,GAAtB,EACMnC,GAAKC,EAAAA,EAAAA,aAAW,yCACpB,WAAOrB,GAAP,yFACQwD,EAAYjG,EAAS+D,SAAStB,GAChCyD,EAASF,EAERC,EAJP,wBAKUjC,EAAUC,EAAiBxB,GACjCzC,EAASkE,WAAWF,GANxB,SAOiC3D,EAAAA,EAAAA,IAAmBoC,GAPpD,UAOUnC,EAPV,0DASU6D,GAASC,EAAAA,EAAAA,GAAqB9D,EAAe+D,eAC7CC,EAAWtE,EAASuE,aAAaJ,GACvCnE,EAASwE,kBAAkBF,EAAU7B,GAIrCyD,EAAS,GAfb,QAiBEvC,EAAS,eAAD,OAAgBlB,EAAhB,YAAgCyD,IAjB1C,4CADoB,sDAoBpB,CAACvC,EAAU3D,EAAUgG,IAEvB,OAAOnC,EAGF,SAASI,EAAiBkC,GAC/B,MAAO,CACLA,IAAAA,EACAC,MAAO,EACPC,UAAW,EACXC,QAAS,SACTC,aAAc,GACdC,mBAAmBC,EAAAA,EAAAA,GAAaC,EAAAA,IAAa,iBAAM,MACnDC,eAAgB,GAChBC,YAAa,GACbC,WAAY,GACZC,cAAe,GACfC,OAAQ,CACNC,KAAM,EACNC,MAAO,EACPC,MAAO,GAETC,aAAc,GACdC,cAAe,EACfC,KAAM,CAAC,GAAI,GAAI,IACfC,aAAa,EACb/E,UAAU,K,gDC9Dd,KAAegF,EAAAA,EAAAA,IAA4BC,EAAAA,EAAAA,KAAK,OAAQ,CACtDC,EAAG,mMACD,mB,gDCFJ,KAAeF,EAAAA,EAAAA,IAA4BC,EAAAA,EAAAA,KAAK,OAAQ,CACtDC,EAAG,kLACD,a,wDCKJ,KAAeF,EAAAA,EAAAA,IAA4BC,EAAAA,EAAAA,KAAK,OAAQ,CACtDC,EAAG,0GACD,U,0BCTE7C,GAAM8C,E,SAAAA,KAyBZ,O,sBC3BA,SAASC,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ7B,EAAK8B,GACpE,IACE,IAAIC,EAAON,EAAIzB,GAAK8B,GAChB3I,EAAQ4I,EAAK5I,MACjB,MAAO6I,GAEP,YADAL,EAAOK,GAILD,EAAKE,KACPP,EAAQvI,GAER+I,QAAQR,QAAQvI,GAAOgJ,KAAKP,EAAOC,GAIxB,SAASO,EAAkBC,GACxC,OAAO,WACL,IAAIC,EAAOC,KACPC,EAAOC,UACX,OAAO,IAAIP,SAAQ,SAAUR,EAASC,GACpC,IAAIF,EAAMY,EAAGK,MAAMJ,EAAME,GAEzB,SAASZ,EAAMzI,GACbqI,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,OAAQ1I,GAGlE,SAAS0I,EAAOc,GACdnB,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,QAASc,GAGnEf,OAAMgB,O","sources":["Components/Character/ThumbSide.tsx","PageUpgradeOpt/stopBreakingMe.tsx","PageUpgradeOpt/UpgradeOptDisplay.tsx","ReactHooks/useCharSelectionCallback.tsx","../node_modules/@mui/icons-material/esm/BusinessCenter.js","../node_modules/@mui/icons-material/esm/Favorite.js","../node_modules/@mui/material/internal/svg-icons/Close.js","../node_modules/@mui/system/esm/Box/Box.js","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"],"sourcesContent":["import { styled } from \"@mui/system\";\n\nconst ThumbSide = styled(\"img\")(({ theme }) => ({\n  display: \"inline-block\",\n  width: \"auto\",\n  height: `2.3em`,\n  lineHeight: 1,\n  verticalAlign: \"text-bottom\",\n  marginTop: theme.spacing(-3),\n  marginLeft: theme.spacing(-1.25),\n  marginRight: theme.spacing(-1),\n  marginBottom: theme.spacing(-1),\n}))\n\nexport default ThumbSide","import { BusinessCenter, Favorite, Replay } from \"@mui/icons-material\";\nimport { Divider, ListItemIcon, MenuItem, Skeleton, Typography } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport { Suspense, useContext, useMemo } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport CharacterSheet from \"../Data/Characters/CharacterSheet\";\nimport { DatabaseContext } from \"../Database/Database\";\nimport usePromise from \"../ReactHooks/usePromise\";\nimport { CharacterKey } from \"../Types/consts\";\nimport { CharacterFilterConfigs, characterFilterConfigs } from \"../Util/CharacterSort\";\nimport { filterFunction } from \"../Util/SortByFilters\";\nimport DropdownButton, { DropdownButtonProps } from \"../Components/DropdownMenu/DropdownButton\";\nimport ThumbSide from \"../Components/Character/ThumbSide\";\n\nexport type CharacterDropdownButtonProps = Omit<DropdownButtonProps, \"title\" | \"onChange\" | \"children\"> & {\n  value: CharacterKey | \"\"\n  onChange: (ck: CharacterKey | \"\") => void\n  filter?: (cs: CharacterSheet, ck: CharacterKey) => boolean\n  inventory?: boolean\n  noUnselect?: boolean,\n  unSelectText?: Displayable,\n  unSelectIcon?: Displayable,\n}\n\nexport default function CharacterDropdownButton({ value, onChange, unSelectText, unSelectIcon, inventory = false, noUnselect = false, filter = () => true, ...props }: CharacterDropdownButtonProps) {\n  const { t } = useTranslation(\"ui\");\n  const { database } = useContext(DatabaseContext)\n  const characterSheets = usePromise(CharacterSheet.getAll, [])\n  const characterSheet = usePromise(CharacterSheet.get(value), [value])\n  const filterConfigs = useMemo(() => characterSheets && characterFilterConfigs(database, characterSheets), [database, characterSheets])\n  const characterKeys = database._getCharKeys().filter(ck => characterSheets?.[ck] && filter(characterSheets[ck], ck)).sort()\n  return <DropdownButton\n    {...props}\n    title={characterSheet?.name ?? (inventory ? t`inventory` : (unSelectText ?? t`unselect`))}\n    color={value ? \"success\" : \"primary\"}\n    startIcon={characterSheet?.thumbImg ? <ThumbSide src={characterSheet.thumbImgSide} /> : (inventory ? <BusinessCenter /> : (unSelectIcon ?? <Replay />))}>\n    {!noUnselect && (inventory ? <MenuItem onClick={() => onChange(\"\")} selected={value === \"\"} disabled={value === \"\"}>\n      <ListItemIcon>\n        <BusinessCenter />\n      </ListItemIcon>\n      <Typography variant=\"inherit\" noWrap>\n        {t`inventory`}\n      </Typography>\n    </MenuItem> : <MenuItem onClick={() => onChange(\"\")} selected={value === \"\"} disabled={value === \"\"}>\n      <ListItemIcon>\n        <Replay />\n      </ListItemIcon>\n      <Typography variant=\"inherit\" noWrap>\n        {t`unselect`}\n      </Typography>\n    </MenuItem>)}\n    {!noUnselect && <Divider key=\"div\" />}\n    {!!characterSheets && CharacterMenuItemArray(characterSheets, characterKeys, onChange, value, filterConfigs)}\n  </DropdownButton >\n}\n\n// Returning an array instead of Fragment because MUI Menu doesn't like fragments.\nexport function CharacterMenuItemArray(characterSheets: StrictDict<CharacterKey, CharacterSheet>, characterKeys: CharacterKey[], onChange: (ck: CharacterKey) => void, selectedCharacterKey: CharacterKey | \"\" = \"\", filterConfigs: CharacterFilterConfigs | undefined) {\n  if (!filterConfigs) return []\n  const faves = characterKeys\n    .filter(filterFunction({ name:\"\", element: \"\", weaponType:\"\", favorite: \"yes\" }, filterConfigs))\n    .map(characterKey => <CharMenuItem key={characterKey} {...{ characterSheets, characterKey, selectedCharacterKey, onChange, favorite: true }} />)\n  const nonFaves = characterKeys\n    .filter(filterFunction({ name:\"\", element: \"\", weaponType:\"\", favorite: \"no\" }, filterConfigs))\n    .map(characterKey => <CharMenuItem key={characterKey} {...{ characterSheets, characterKey, selectedCharacterKey, onChange, favorite: false }} />)\n\n  return faves.concat(nonFaves)\n  // return characterKeys\n}\nfunction CharMenuItem({ characterSheets, characterKey, selectedCharacterKey = \"\", onChange, favorite }:\n  { characterKey: CharacterKey, selectedCharacterKey: CharacterKey | \"\", characterSheets: StrictDict<CharacterKey, CharacterSheet>, onChange: (ck: CharacterKey) => void, favorite: boolean }) {\n  return <MenuItem onClick={() => onChange(characterKey)} key={characterKey} selected={selectedCharacterKey === characterKey} disabled={selectedCharacterKey === characterKey} >\n    <ListItemIcon>\n      <ThumbSide src={characterSheets[characterKey]?.thumbImgSide} />\n    </ListItemIcon>\n    <Suspense fallback={<Skeleton variant=\"text\" width={100} />}>\n      <Typography variant=\"inherit\" noWrap>\n        {characterSheets[characterKey]?.name}\n      </Typography>\n    </Suspense>\n    {favorite && <Box display=\"flex\" flexGrow={1} />}\n    {favorite && <Favorite sx={{ ml: 1, mr: -0.5 }} />}\n  </MenuItem>\n}\n","import {\n  Alert,\n  Box,\n  CardContent,\n  Divider,\n  Link,\n  Typography,\n} from '@mui/material';\nimport { useCallback, useContext, useMemo } from 'react';\nimport { Link as RouterLink } from 'react-router-dom';\nimport CardDark from '../Components/Card/CardDark';\nimport CardLight from '../Components/Card/CardLight';\nimport CharacterDropdownButton from './stopBreakingMe';\nimport { DatabaseContext } from '../Database/Database';\nimport { initialCharacter } from '../ReactHooks/useCharSelectionCallback';\nimport { CharacterKey } from '../Types/consts';\nimport { useNavigate } from \"react-router\";\nimport CharacterSheet from \"../Data/Characters/CharacterSheet\";\nimport { defaultInitialWeapon } from \"../Util/WeaponUtil\";\n\nfunction HackyGetAroun() {\n  const { database } = useContext(DatabaseContext)\n  const navigate = useNavigate()\n  // Used to maintain the previous tab, if there is one\n  const cb = useCallback(\n    async (characterKey: CharacterKey) => {\n      const character = database._getChar(characterKey)\n      // Create a new character + weapon, with linking if char isnt in db.\n      if (!character) {\n        const newChar = initialCharacter(characterKey)\n        database.updateChar(newChar)\n        const characterSheet = await CharacterSheet.get(characterKey)\n        if (!characterSheet) return\n        const weapon = defaultInitialWeapon(characterSheet.weaponTypeKey)\n        const weaponId = database.createWeapon(weapon)\n        database.setWeaponLocation(weaponId, characterKey)\n        // If we are navigating to a new character,\n        // redirect to Overview, regardless of previous tab.\n        // Trying to enforce a certain UI flow when building new characters\n      }\n      navigate(`/characters/${characterKey}/upgradeOpt`)\n    },\n    [navigate, database],\n  )\n  return cb\n}\n\nexport default function UpgradeOptDisplay() {\n  const { database } = useContext(DatabaseContext)\n  const characterKey = ''\n  // const characterKey2 = 'Diona'\n\n  // console.log('char', character, characterKey)\n\n\n  // const [buildStatus, setBuildStatus] = useState({ type: \"inactive\", tested: 0, failed: 0, skipped: 0, total: 0 } as BuildStatus)\n  // const generatingBuilds = buildStatus.type !== \"inactive\"\n\n  // const [chartData, setchartData] = useState(undefined as ChartData | undefined)\n\n  // const [artsDirty, setArtsDirty] = useForceUpdate()\n\n  // const [{ equipmentPriority, threads = defThreads }, setOptimizeDBState] = useOptimizeDBState()\n  // const maxWorkers = threads > defThreads ? defThreads : threads\n  // const setMaxWorkers = useCallback(threads => setOptimizeDBState({ threads }), [setOptimizeDBState],)\n\n  // const onClickTeammate = useCharSelectionCallback()\n  // const compareData = character?.compareData ?? false\n\n  const noCharacter = useMemo(() => !database._getCharKeys().length, [database])\n  const noArtifact = useMemo(() => !database._getArts().length, [database])\n\n  // const { buildSetting } = useBuildSetting(characterKey2)\n  // const { mainStatAssumptionLevel } = buildSetting ?? {}\n  // const teamData = useTeamData(characterKey, mainStatAssumptionLevel)\n  // const { characterSheet, target: data } = teamData?.[characterKey as CharacterKey] ?? {}\n  // const buildsArts = useMemo(() => builds.map(build => build.map(i => database._getArt(i)!)), [builds, database])\n\n  //register changes in artifact database\n  // useEffect(() =>\n  //   database.followAnyArt(setArtsDirty),\n  //   [setArtsDirty, database])\n\n  const onClickTeammate = HackyGetAroun()\n\n  const selectCharacter = useCallback((cKey = \"\") => {\n    onClickTeammate(cKey as CharacterKey)\n  }, [onClickTeammate])\n\n\n\n  // const [artifactUpgradeOpts, setArtifactUpgradeOpts] = useState(undefined as UpgradeOptResult | undefined)\n\n\n\n\n  // const [{ tcMode }] = useDBState(\"GlobalSettings\", initGlobalSettings)\n  // const { database } = useContext(DatabaseContext)\n  // const [{ characterKey }, setBuildSettings] = useDBState(\"BuildDisplay\", hackyGetAroun)\n\n  // const characterDispatch = useCharacterReducer(characterKey)\n  // // const buildSettings = character?.buildSettings ?? initialBuildSettings()\n  // const { buildSetting: buildSettings, buildSettingDispatch } = useBuildSetting(characterKey)\n  // const { plotBase, setFilters, statFilters, optimizationTarget, mainStatAssumptionLevel, maxBuildsToShow } = buildSettings\n  // const teamData = useTeamData(characterKey, mainStatAssumptionLevel)\n  // const { characterSheet, target: data } = teamData?.[characterKey as CharacterKey] ?? {}\n\n  // const noArtifact = useMemo(() => !database._getArts().length, [database])\n\n  // const buildSettingsDispatch = useCallback((action) =>\n  //   characterDispatch && characterDispatch({ buildSettings: buildSettingsReducer(buildSettings, action) }), [characterDispatch, buildSettings])\n\n  // const [pageIdex, setpageIdex] = useState(0)\n  // const invScrollRef = useRef<HTMLDivElement>(null)\n  // // const { t } = useTranslation([\"artifact\", \"ui\"]);\n\n  // const artifactsToDisplayPerPage = 5;\n  // const { artifactsToShow, numPages, currentPageIndex, minObj0, maxObj0 } = useMemo(() => {\n  //   if (!artifactUpgradeOpts) return { artifactsToShow: [], numPages: 0, toShow: 0, minObj0: 0, maxObj0: 0 }\n  //   const numPages = Math.ceil(artifactUpgradeOpts.arts.length / artifactsToDisplayPerPage)\n  //   const currentPageIndex = clamp(pageIdex, 0, numPages - 1)\n  //   const toShow = artifactUpgradeOpts.arts.slice(currentPageIndex * artifactsToDisplayPerPage, (currentPageIndex + 1) * artifactsToDisplayPerPage)\n  //   const thr = toShow.length > 0 ? toShow[0].thresholds[0] : 0\n\n  //   return {\n  //     artifactsToShow: toShow, numPages, currentPageIndex,\n  //     minObj0: toShow.reduce((a, b) => Math.min(b.distr.lower, a), thr),\n  //     maxObj0: toShow.reduce((a, b) => Math.max(b.distr.upper, a), thr)\n  //   }\n  // }, [artifactUpgradeOpts, artifactsToDisplayPerPage, pageIdex])\n\n  // // Because upgradeOpt is a two-stage estimation method, we want to expand (slow-estimate) our artifacts lazily as they are needed.\n  // // Lazy method means we need to take care to never 'lift' any artifacts past the current page, since that may cause a user to miss artifacts\n  // //  that are lifted in the middle of an expansion. Increase lookahead to mitigate this issue.\n  // const upgradeOptExpandSink = useCallback(({ query, arts }: UpgradeOptResult, start: number, expandTo: number): UpgradeOptResult => {\n  //   const lookahead = 5\n  //   // if (querySaved === undefined) return upOpt\n  //   const queryArts: QueryArtifact[] = database._getArts()\n  //     .filter(art => art.rarity === 5)\n  //     .map(art => toQueryArtifact(art, 20))\n\n  //   let qaLookup: Dict<string, QueryArtifact> = {};\n  //   queryArts.forEach(art => qaLookup[art.id] = art)\n\n  //   const fixedList = arts.slice(0, start)\n  //   let arr = arts.slice(start)\n\n  //   let i = 0\n  //   const end = Math.min(expandTo - start + lookahead, arr.length);\n  //   do {\n  //     for (; i < end; i++) {\n  //       let arti = qaLookup[arr[i].id]\n  //       if (arti) arr[i] = evalArtifact(query, arti, true);\n  //     }\n\n  //     // sort on only bottom half to prevent lifting\n  //     arr.sort(cmpQ)\n  //     for (i = 0; i < end; i++) {\n  //       if (arr[i].evalMode === 'fast') break\n  //     }\n  //   } while (i < end)\n\n  //   return { query, arts: [...fixedList, ...arr] }\n  // }, [database])\n\n  // //for pagination\n  // const setPage = useCallback(\n  //   (e, value) => {\n  //     if (!artifactUpgradeOpts) return\n  //     invScrollRef.current?.scrollIntoView({ behavior: \"smooth\" })\n  //     let start = (currentPageIndex + 1) * artifactsToDisplayPerPage\n  //     let end = value * artifactsToDisplayPerPage\n  //     let zz = upgradeOptExpandSink(artifactUpgradeOpts, start, end)\n  //     setArtifactUpgradeOpts(zz)\n  //     setpageIdex(value - 1);\n  //   },\n  //   [setpageIdex, setArtifactUpgradeOpts, invScrollRef, currentPageIndex, artifactsToDisplayPerPage, artifactUpgradeOpts, upgradeOptExpandSink],\n  // )\n\n  // const generateBuilds = useCallback(async () => {\n  //   debugMVN();\n  //   const { artSetExclusion, plotBase, statFilters, mainStatKeys, optimizationTarget, mainStatAssumptionLevel } = buildSetting\n\n  //   console.log('no char/opt target', characterKey, optimizationTarget)\n  //   if (!characterKey || !optimizationTarget) return\n  //   const teamData = await getTeamData(database, characterKey, mainStatAssumptionLevel, [])\n  //   console.log('no team data')\n  //   if (!teamData) return\n  //   const workerData = uiDataForTeam(teamData.teamData, characterKey)[characterKey as CharacterKey]?.target.data![0]\n  //   console.log('no worker data')\n  //   if (!workerData) return\n  //   Object.assign(workerData, mergeData([workerData, dynamicData])) // Mark art fields as dynamic\n  //   let optimizationTargetNode = objPathValue(workerData.display ?? {}, optimizationTarget) as NumNode | undefined\n  //   if (!optimizationTargetNode) return\n\n  //   console.log('am I passing?')\n\n  //   const valueFilter: { value: NumNode, minimum: number }[] = Object.entries(statFilters).map(([key, value]) => {\n  //     if (key.endsWith(\"_\")) value = value / 100\n  //     return { value: input.total[key], minimum: value }\n  //   }).filter(x => x.value && x.minimum > -Infinity)\n\n  //   const queryArts: QueryArtifact[] = database._getArts()\n  //     .filter(art => art.rarity === 5)\n  //     .map(art => toQueryArtifact(art, 20))\n\n  //   const equippedArts = database._getChar(characterKey)?.equippedArtifacts ?? {} as StrictDict<SlotKey, string>\n  //   let curEquip: QueryBuild = Object.assign({}, ...allSlotKeys.map(slotKey => {\n  //     const art = database._getArt(equippedArts[slotKey] ?? \"\")\n  //     if (!art) return { [slotKey]: undefined }\n  //     return { [slotKey]: toQueryArtifact(art) }\n  //   }))\n  //   let qaLookup: Dict<string, QueryArtifact> = {};\n  //   queryArts.forEach(art => qaLookup[art.id] = art)\n\n  //   let nodes = [optimizationTargetNode, ...valueFilter.map(x => x.value)]\n  //   nodes = optimize(nodes, workerData, ({ path: [p] }) => p !== \"dyn\");\n  //   const query = querySetup(nodes, valueFilter.map(x => x.minimum), curEquip, data);\n  //   let artUpOpt = queryArts.map(art => evalArtifact(query, art, false))\n  //   artUpOpt = artUpOpt.sort((a, b) => b.prob * b.upAvg - a.prob * a.upAvg)\n\n  //   let upOpt = { query: query, arts: artUpOpt }\n\n  //   // Re-sort & slow eval\n  //   upOpt = upgradeOptExpandSink(upOpt, 0, 5)\n  //   setArtifactUpgradeOpts(upOpt);\n\n  //   console.log('emd of the line')\n  // }, [characterKey, database, setArtifactUpgradeOpts])\n\n  // const characterName = characterSheet?.name ?? \"Character Name\"\n\n  // const dataContext: dataContextObj | undefined = useMemo(() => {\n  //   // if (characterKey === '') return undefined\n  //   return character && data && characterSheet && teamData && {\n  //     data,\n  //     characterSheet,\n  //     character,\n  //     mainStatAssumptionLevel,\n  //     teamData,\n  //     characterDispatch\n  //   }\n  // }, [data, characterSheet, character, teamData, characterDispatch, mainStatAssumptionLevel])\n\n  return <Box display=\"flex\" flexDirection=\"column\" gap={1} sx={{ my: 1 }}>\n\n    {noCharacter && <Alert severity=\"error\" variant=\"filled\"> Opps! It looks like you haven't added a character to GO yet! You should go to the <Link component={RouterLink} to=\"/character\">Characters</Link> page and add some!</Alert>}\n    {noArtifact && <Alert severity=\"warning\" variant=\"filled\"> Opps! It looks like you haven't added any artifacts to GO yet! You should go to the <Link component={RouterLink} to=\"/artifact\">Artifacts</Link> page and add some!</Alert>}\n    {/* Build Generator Editor */}\n    {<CardDark>\n      <CardContent sx={{ py: 1 }}>\n        <Typography variant=\"h6\">Build Generator</Typography>\n      </CardContent>\n      <Divider />\n      <CardContent sx={{ display: \"flex\", flexDirection: \"column\", gap: 1 }}>\n        <CardLight>\n          <CardContent>\n            <CharacterDropdownButton fullWidth value={characterKey} onChange={selectCharacter} />\n          </CardContent>\n        </CardLight>\n      </CardContent>\n    </CardDark>}\n  </Box>\n}\n","import { useCallback, useContext } from \"react\";\nimport { useNavigate, useMatch } from \"react-router\";\nimport CharacterSheet from \"../Data/Characters/CharacterSheet\";\nimport { DatabaseContext } from \"../Database/Database\";\nimport { allSlotKeys, CharacterKey } from \"../Types/consts\";\nimport { defaultInitialWeapon } from \"../Util/WeaponUtil\";\nimport { ICachedCharacter } from \"../Types/character\";\nimport { objectKeyMap } from \"../Util/Util\";\n\n/**\n * Basically a history hook to go to the dedicated character page. Will create the character if it doesn't exist.\n * @returns\n */\nexport default function useCharSelectionCallback() {\n  const { database } = useContext(DatabaseContext)\n  const navigate = useNavigate()\n  // Used to maintain the previous tab, if there is one\n  let { params: { tab = \"\" } } = useMatch({ path: \"/characters/:charKey/:tab\", end: false }) ?? { params: { tab: \"\" } }\n  const cb = useCallback(\n    async (characterKey: CharacterKey) => {\n      const character = database._getChar(characterKey)\n      let navTab = tab\n      // Create a new character + weapon, with linking if char isnt in db.\n      if (!character) {\n        const newChar = initialCharacter(characterKey)\n        database.updateChar(newChar)\n        const characterSheet = await CharacterSheet.get(characterKey)\n        if (!characterSheet) return\n        const weapon = defaultInitialWeapon(characterSheet.weaponTypeKey)\n        const weaponId = database.createWeapon(weapon)\n        database.setWeaponLocation(weaponId, characterKey)\n        // If we are navigating to a new character,\n        // redirect to Overview, regardless of previous tab.\n        // Trying to enforce a certain UI flow when building new characters\n        navTab = \"\"\n      }\n      navigate(`/characters/${characterKey}/${navTab}`)\n    },\n    [navigate, database, tab],\n  )\n  return cb\n}\n\nexport function initialCharacter(key: CharacterKey): ICachedCharacter {\n  return {\n    key,\n    level: 1,\n    ascension: 0,\n    hitMode: \"avgHit\",\n    reactionMode: \"\",\n    equippedArtifacts: objectKeyMap(allSlotKeys, () => \"\"),\n    equippedWeapon: \"\",\n    conditional: {},\n    bonusStats: {},\n    enemyOverride: {},\n    talent: {\n      auto: 1,\n      skill: 1,\n      burst: 1,\n    },\n    infusionAura: \"\",\n    constellation: 0,\n    team: [\"\", \"\", \"\"],\n    compareData: false,\n    favorite: false,\n  }\n}\n","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M10 16v-1H3.01L3 19c0 1.11.89 2 2 2h14c1.11 0 2-.89 2-2v-4h-7v1h-4zm10-9h-4.01V5l-2-2h-4l-2 2v2H4c-1.1 0-2 .9-2 2v3c0 1.11.89 2 2 2h6v-2h4v2h6c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2zm-6 0h-4V5h4v2z\"\n}), 'BusinessCenter');","import createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z\"\n}), 'Favorite');","import * as React from 'react';\nimport createSvgIcon from '../../utils/createSvgIcon';\n/**\n * @ignore - internal component.\n *\n * Alias to `Clear`.\n */\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n}), 'Close');","import PropTypes from 'prop-types';\nimport createBox from '../createBox';\nconst Box = createBox();\nprocess.env.NODE_ENV !== \"production\" ? Box.propTypes\n/* remove-proptypes */\n= {\n  // ----------------------------- Warning --------------------------------\n  // | These PropTypes are generated from the TypeScript type definitions |\n  // |     To update them edit the d.ts file and run \"yarn proptypes\"     |\n  // ----------------------------------------------------------------------\n\n  /**\n   * @ignore\n   */\n  children: PropTypes.node,\n\n  /**\n   * The component used for the root node.\n   * Either a string to use a HTML element or a component.\n   */\n  component: PropTypes.elementType,\n\n  /**\n   * The system prop that allows defining system overrides as well as additional CSS styles.\n   */\n  sx: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.func, PropTypes.object, PropTypes.bool])), PropTypes.func, PropTypes.object])\n} : void 0;\nexport default Box;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}"],"names":["ThumbSide","styled","theme","display","width","height","lineHeight","verticalAlign","marginTop","spacing","marginLeft","marginRight","marginBottom","CharacterDropdownButton","value","onChange","unSelectText","unSelectIcon","inventory","noUnselect","filter","props","t","useTranslation","database","useContext","DatabaseContext","characterSheets","usePromise","CharacterSheet","characterSheet","filterConfigs","useMemo","characterFilterConfigs","characterKeys","_getCharKeys","ck","sort","DropdownButton","title","name","color","startIcon","thumbImg","src","thumbImgSide","BusinessCenter","Replay","MenuItem","onClick","selected","disabled","ListItemIcon","Typography","variant","noWrap","Divider","CharacterMenuItemArray","selectedCharacterKey","faves","filterFunction","element","weaponType","favorite","map","characterKey","CharMenuItem","nonFaves","concat","Suspense","fallback","Skeleton","flexGrow","Favorite","sx","ml","mr","UpgradeOptDisplay","noCharacter","length","noArtifact","_getArts","onClickTeammate","navigate","useNavigate","cb","useCallback","_getChar","newChar","initialCharacter","updateChar","weapon","defaultInitialWeapon","weaponTypeKey","weaponId","createWeapon","setWeaponLocation","HackyGetAroun","selectCharacter","cKey","Box","flexDirection","gap","my","Alert","severity","Link","component","RouterLink","to","CardDark","CardContent","py","CardLight","fullWidth","useCharSelectionCallback","useMatch","path","end","params","tab","character","navTab","key","level","ascension","hitMode","reactionMode","equippedArtifacts","objectKeyMap","allSlotKeys","equippedWeapon","conditional","bonusStats","enemyOverride","talent","auto","skill","burst","infusionAura","constellation","team","compareData","createSvgIcon","_jsx","d","createBox","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","err","undefined"],"sourceRoot":""}