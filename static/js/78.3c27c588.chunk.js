(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[78],{21977:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(29439),i=n(57621),a=n(10889),s=n(72791),o=n(60393),c=n(10600),l=n(80184);function u(e){var t=e.levelLow,n=e.levelHigh,u=e.setLow,d=e.setHigh,h=e.setBoth,f=e.dark,p=void 0!==f&&f,x=e.disabled,m=void 0!==x&&x,v=e.showLevelText,j=void 0!==v&&v,Z=(0,s.useState)(t),g=(0,r.Z)(Z,2),y=g[0],b=g[1],w=(0,s.useState)(n),C=(0,r.Z)(w,2),k=C[0],P=C[1],S=(0,s.useCallback)((function(e,t){if("number"==typeof t)throw new TypeError;var n=(0,r.Z)(t,2),i=n[0],a=n[1];b(i),P(a)}),[b,P]);return(0,s.useEffect)((function(){return b(t)}),[b,t]),(0,s.useEffect)((function(){return P(n)}),[P,n]),(0,l.jsxs)(i.Z,{sx:{width:"100%",display:"flex",alignItems:"center",bgcolor:p?"contentDark.main":"contentLight.main"},children:[(0,l.jsx)(c.ZP,{value:y,onChange:function(e){return u((0,o.uZ)(e,0,n))},sx:{px:1,pl:j?2:void 0,width:j?100:50},inputProps:{sx:{textAlign:"center"}},startAdornment:j?"Level: ":void 0,disabled:m}),(0,l.jsx)(a.ZP,{sx:{width:100,flexGrow:1,mx:2},getAriaLabel:function(){return"Arifact Level Range"},value:[y,k],onChange:S,onChangeCommitted:function(e,t){return h(t[0],t[1])},valueLabelDisplay:"auto",min:0,max:20,step:1,marks:!0,disabled:m}),(0,l.jsx)(c.ZP,{value:k,onChange:function(e){return d((0,o.uZ)(e,t,20))},sx:{px:1,width:50},inputProps:{sx:{textAlign:"center"}},disabled:m})]})}},37503:function(e,t,n){"use strict";n.d(t,{X:function(){return I},Z:function(){return T}});var r=n(68870),i=n(20890),a=n(9585),s=n(94721),o=n(72791),c=n(2693),l=n(60393),u=n(3992),d=n(39504),h=n(88034),f=n(29439),p=n(72247),x=n(9912),m=n(24518),v=n(23786),j=n(2199),Z=n(33890),g=n(25617),y=n(66624),b=n(80184);function w(e){var t=e.conditional,n=e.disabled,r=void 0!==n&&n;return 1===Object.keys(t.states).length&&"path"in t?(0,b.jsx)(C,{conditional:t,disabled:r}):"path"in t?(0,b.jsx)(k,{conditional:t,disabled:r}):(0,b.jsx)(P,{conditional:t,disabled:r})}function C(e){var t=e.conditional,n=e.disabled,r=(0,o.useContext)(c.R),i=r.character,a=r.characterDispatch,s=r.data,u=(0,o.useCallback)((function(e){var n=(0,l.I8)(i.conditional);e?(0,l.SR)(n,t.path,e):(0,l.uH)(n,t.path),a({conditional:n})}),[t,i,a]),d=s.get(t.value).value,h=(0,f.Z)(Object.entries(t.states)[0],2),v=h[0],j=_(h[1].name),Z=A(t.name);return(0,b.jsxs)(m.Z,{fullWidth:!0,size:"small",sx:{borderRadius:0},color:d?"success":"primary",onClick:function(){return u(d?void 0:v)},disabled:n,startIcon:d?(0,b.jsx)(p.Z,{}):(0,b.jsx)(x.Z,{}),children:[Z," ",j]})}function k(e){var t=e.conditional,n=e.disabled,r=(0,o.useContext)(c.R),i=r.character,a=r.characterDispatch,u=r.data,d=(0,o.useCallback)((function(e){var n=(0,l.I8)(i.conditional);e?(0,l.SR)(n,t.path,e):(0,l.uH)(n,t.path),a({conditional:n})}),[t,i,a]),h=u.get(t.value).value,p=h?t.states[h]:void 0,x=p?_(p.name):(0,b.jsx)(g.Z,{color:"secondary",children:"Not Active"}),m=A(t.name);return(0,b.jsxs)(Z.Z,{fullWidth:!0,size:"small",sx:{borderRadius:0},color:h?"success":"primary",title:(0,b.jsxs)("span",{children:[m," ",x]}),disabled:n,children:[(0,b.jsx)(v.Z,{onClick:function(){return d()},selected:!p,disabled:!p,children:(0,b.jsx)("span",{children:"Not Active"})}),(0,b.jsx)(s.Z,{}),Object.entries(t.states).map((function(e){var t=(0,f.Z)(e,2),n=t[0],r=t[1];return(0,b.jsx)(v.Z,{onClick:function(){return d(n)},selected:h===n,disabled:h===n,children:r.name},n)}))]})}function P(e){var t=e.conditional,n=e.disabled,r=(0,o.useContext)(c.R),i=r.character,a=r.characterDispatch,s=r.data,u=(0,o.useCallback)((function(e,t){var n=(0,l.I8)(i.conditional);t?(0,l.SR)(n,e,t):(0,l.uH)(n,e),a({conditional:n})}),[i,a]);return(0,b.jsx)(j.Z,{fullWidth:!0,orientation:"vertical",disableElevation:!0,color:"secondary",children:Object.entries(t.states).map((function(e){var t=(0,f.Z)(e,2),r=t[0],i=t[1],a=s.get(i.value).value,o=a===r;return(0,b.jsx)(m.Z,{color:o?"success":"primary",disabled:n,fullWidth:!0,onClick:function(){return u(i.path,a?void 0:r)},size:"small",startIcon:o?(0,b.jsx)(p.Z,{}):(0,b.jsx)(x.Z,{}),sx:{borderRadius:0},children:A(i.name)},r)}))})}function S(e){return"string"!==typeof e}function _(e){if(!e)return"";var t="primary",n=e;return e&&S(e)&&e.props.color&&(t=e.props.color,n=(0,b.jsx)("span",{children:e.props.children})),(0,b.jsx)(g.Z,{sx:{ml:.5},color:t,children:n})}function A(e){if(S(e)){var t=e.props.key18,n=e.props.ns,r=e.props.values;return(0,b.jsx)(y.v,{ns:n,key18:t,values:r,useBadge:!0})}return e}function O(e){var t,n=e.conditional,r=e.hideHeader,i=void 0!==r&&r,a=e.hideDesc,s=void 0!==a&&a,f=(0,o.useContext)(c.R).data;if("path"in n){var p,x=f.get(n.value).value;t=x&&(null===(p=n.states[x])||void 0===p?void 0:p.fields)}else t=Object.values(n.states).flatMap((function(e){return f.get(e.value).value?e.fields:[]}));return(0,b.jsxs)(u.Z,{children:[!(0,l.mY)(i,n)&&(0,b.jsx)(I,{header:n.header,hideDesc:s}),(0,b.jsx)(d.Z,{sx:{p:0,"&:last-child":{pb:0}},children:(0,b.jsx)(w,{conditional:n})}),t&&(0,b.jsx)(h.ZP,{fields:t})]})}var E=n(55221);function T(e){var t=e.sections,n=e.teamBuffOnly,i=e.hideDesc,a=void 0!==i&&i,s=e.hideHeader,l=void 0!==s&&s,u=(0,o.useContext)(c.R).data;if(!t.length)return null;var d=t.map((function(e,t){return e.canShow&&!u.get(e.canShow).value||n&&!e.teamBuff?null:(0,b.jsx)(D,{section:e,hideDesc:a,hideHeader:l},t)})).filter((function(e){return e}));return d.length?(0,b.jsx)(r.Z,{display:"flex",flexDirection:"column",gap:1,children:d}):null}function D(e){var t=e.section,n=e.hideDesc,r=void 0!==n&&n,i=e.hideHeader,a=void 0!==i&&i;return"fields"in t?(0,b.jsx)(R,{section:t,hideDesc:r,hideHeader:a}):"states"in t?(0,b.jsx)(O,{conditional:t,hideDesc:r,hideHeader:a}):(0,b.jsx)(M,{section:t})}function R(e){var t=e.section,n=e.hideDesc,r=e.hideHeader;return(0,b.jsxs)(u.Z,{children:[!(0,l.mY)(r,t)&&t.header&&(0,b.jsx)(I,{header:t.header,hideDesc:n,hideDivider:0===t.fields.length}),(0,b.jsx)(h.ZP,{fields:t.fields})]})}function M(e){var t=e.section,n=(0,o.useContext)(c.R).data;return(0,b.jsx)("div",{children:(0,l.mY)(t.text,n)})}function I(e){var t=e.header,n=e.hideDesc,r=e.hideDivider,u=(0,o.useContext)(c.R).data,d=t.icon,h=t.title,f=t.action;d=(0,l.mY)(d,u);var p=!n&&(0,l.mY)(t.description,u),x=n?h:(0,b.jsxs)("span",{children:[h," ",(0,b.jsx)(E.Z,{title:(0,b.jsx)(i.Z,{children:p})})]});return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(a.Z,{avatar:d,title:x,action:f,titleTypographyProps:{variant:"subtitle2"}}),!r&&(0,b.jsx)(s.Z,{})]})}},91732:function(e,t,n){"use strict";var r=n(1413),i=n(45987),a=n(66934),s=n(13400),o=n(80184),c=["expand"],l=(0,a.ZP)((function(e){e.expand;var t=(0,i.Z)(e,c);return(0,o.jsx)(s.Z,(0,r.Z)({},t))}))((function(e){var t=e.theme;return{transform:e.expand?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})}}));t.Z=l},92443:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(1413),i=n(45987),a=n(66934),s=n(24518),o=n(80184),c=["children","disabled"],l=(0,a.ZP)(s.Z)((function(e){var t=e.theme;return{"&.Mui-disabled":{backgroundColor:t.palette.primary.dark,color:t.palette.text.secondary}}}));function u(e){var t=e.children,n=(e.disabled,(0,i.Z)(e,c));return(0,o.jsx)(l,(0,r.Z)((0,r.Z)({},n),{},{disabled:!0,children:t}))}},21206:function(e,t,n){"use strict";n.d(t,{WC:function(){return j},KX:function(){return g},SJ:function(){return Z},r:function(){return S},Zu:function(){return y},xm:function(){return w},L1:function(){return P},_d:function(){return x},q8:function(){return k},qp:function(){return b},s_:function(){return C}});var r=n(4942),i=n(1413),a=n(93433),s=n(26138),o=n(73036),c=n(50609),l=n(78661),u=n(50765),d=n(60393),h=JSON.parse('{"GROW_CURVE_HP_S4":{"1":1,"2":1.083,"3":1.165,"4":1.248,"5":1.33,"6":1.413,"7":1.495,"8":1.578,"9":1.661,"10":1.743,"11":1.826,"12":1.908,"13":1.991,"14":2.073,"15":2.156,"16":2.239,"17":2.321,"18":2.404,"19":2.486,"20":2.569,"21":2.651,"22":2.734,"23":2.817,"24":2.899,"25":2.982,"26":3.064,"27":3.147,"28":3.229,"29":3.312,"30":3.394,"31":3.477,"32":3.56,"33":3.642,"34":3.725,"35":3.807,"36":3.89,"37":3.972,"38":4.055,"39":4.138,"40":4.22,"41":4.303,"42":4.385,"43":4.468,"44":4.55,"45":4.633,"46":4.716,"47":4.798,"48":4.881,"49":4.963,"50":5.046,"51":5.128,"52":5.211,"53":5.294,"54":5.376,"55":5.459,"56":5.541,"57":5.624,"58":5.706,"59":5.789,"60":5.872,"61":5.954,"62":6.037,"63":6.119,"64":6.202,"65":6.284,"66":6.367,"67":6.45,"68":6.532,"69":6.615,"70":6.697,"71":6.78,"72":6.862,"73":6.945,"74":7.028,"75":7.11,"76":7.193,"77":7.275,"78":7.358,"79":7.44,"80":7.523,"81":7.606,"82":7.688,"83":7.771,"84":7.853,"85":7.936,"86":8.018,"87":8.101,"88":8.183,"89":8.266,"90":8.349,"91":8.431,"92":8.514,"93":8.596,"94":8.679,"95":8.761,"96":8.844,"97":8.927,"98":9.009,"99":9.092,"100":9.174},"GROW_CURVE_ATTACK_S4":{"1":1,"2":1.083,"3":1.165,"4":1.248,"5":1.33,"6":1.413,"7":1.495,"8":1.578,"9":1.661,"10":1.743,"11":1.826,"12":1.908,"13":1.991,"14":2.073,"15":2.156,"16":2.239,"17":2.321,"18":2.404,"19":2.486,"20":2.569,"21":2.651,"22":2.734,"23":2.817,"24":2.899,"25":2.982,"26":3.064,"27":3.147,"28":3.229,"29":3.312,"30":3.394,"31":3.477,"32":3.56,"33":3.642,"34":3.725,"35":3.807,"36":3.89,"37":3.972,"38":4.055,"39":4.138,"40":4.22,"41":4.303,"42":4.385,"43":4.468,"44":4.55,"45":4.633,"46":4.716,"47":4.798,"48":4.881,"49":4.963,"50":5.046,"51":5.128,"52":5.211,"53":5.294,"54":5.376,"55":5.459,"56":5.541,"57":5.624,"58":5.706,"59":5.789,"60":5.872,"61":5.954,"62":6.037,"63":6.119,"64":6.202,"65":6.284,"66":6.367,"67":6.45,"68":6.532,"69":6.615,"70":6.697,"71":6.78,"72":6.862,"73":6.945,"74":7.028,"75":7.11,"76":7.193,"77":7.275,"78":7.358,"79":7.44,"80":7.523,"81":7.606,"82":7.688,"83":7.771,"84":7.853,"85":7.936,"86":8.018,"87":8.101,"88":8.183,"89":8.266,"90":8.349,"91":8.431,"92":8.514,"93":8.596,"94":8.679,"95":8.761,"96":8.844,"97":8.927,"98":9.009,"99":9.092,"100":9.174},"GROW_CURVE_HP_S5":{"1":1,"2":1.083,"3":1.166,"4":1.25,"5":1.333,"6":1.417,"7":1.5,"8":1.584,"9":1.668,"10":1.751,"11":1.835,"12":1.919,"13":2.003,"14":2.088,"15":2.172,"16":2.256,"17":2.341,"18":2.425,"19":2.51,"20":2.594,"21":2.679,"22":2.764,"23":2.849,"24":2.934,"25":3.019,"26":3.105,"27":3.19,"28":3.275,"29":3.361,"30":3.446,"31":3.532,"32":3.618,"33":3.704,"34":3.789,"35":3.875,"36":3.962,"37":4.048,"38":4.134,"39":4.22,"40":4.307,"41":4.393,"42":4.48,"43":4.567,"44":4.653,"45":4.74,"46":4.827,"47":4.914,"48":5.001,"49":5.089,"50":5.176,"51":5.263,"52":5.351,"53":5.438,"54":5.526,"55":5.614,"56":5.702,"57":5.79,"58":5.878,"59":5.966,"60":6.054,"61":6.142,"62":6.23,"63":6.319,"64":6.407,"65":6.496,"66":6.585,"67":6.673,"68":6.762,"69":6.851,"70":6.94,"71":7.029,"72":7.119,"73":7.208,"74":7.297,"75":7.387,"76":7.476,"77":7.566,"78":7.656,"79":7.746,"80":7.836,"81":7.926,"82":8.016,"83":8.106,"84":8.196,"85":8.286,"86":8.377,"87":8.467,"88":8.558,"89":8.649,"90":8.739,"91":8.83,"92":8.921,"93":9.012,"94":9.103,"95":9.195,"96":9.286,"97":9.377,"98":9.469,"99":9.56,"100":9.652},"GROW_CURVE_ATTACK_S5":{"1":1,"2":1.083,"3":1.166,"4":1.25,"5":1.333,"6":1.417,"7":1.5,"8":1.584,"9":1.668,"10":1.751,"11":1.835,"12":1.919,"13":2.003,"14":2.088,"15":2.172,"16":2.256,"17":2.341,"18":2.425,"19":2.51,"20":2.594,"21":2.679,"22":2.764,"23":2.849,"24":2.934,"25":3.019,"26":3.105,"27":3.19,"28":3.275,"29":3.361,"30":3.446,"31":3.532,"32":3.618,"33":3.704,"34":3.789,"35":3.875,"36":3.962,"37":4.048,"38":4.134,"39":4.22,"40":4.307,"41":4.393,"42":4.48,"43":4.567,"44":4.653,"45":4.74,"46":4.827,"47":4.914,"48":5.001,"49":5.089,"50":5.176,"51":5.263,"52":5.351,"53":5.438,"54":5.526,"55":5.614,"56":5.702,"57":5.79,"58":5.878,"59":5.966,"60":6.054,"61":6.142,"62":6.23,"63":6.319,"64":6.407,"65":6.496,"66":6.585,"67":6.673,"68":6.762,"69":6.851,"70":6.94,"71":7.029,"72":7.119,"73":7.208,"74":7.297,"75":7.387,"76":7.476,"77":7.566,"78":7.656,"79":7.746,"80":7.836,"81":7.926,"82":8.016,"83":8.106,"84":8.196,"85":8.286,"86":8.377,"87":8.467,"88":8.558,"89":8.649,"90":8.739,"91":8.83,"92":8.921,"93":9.012,"94":9.103,"95":9.195,"96":9.286,"97":9.377,"98":9.469,"99":9.56,"100":9.652}}'),f=(0,d.xh)(h,(function(e){return[0].concat((0,a.Z)(Object.values(e)))})),p=(0,d.O)(["hp","atk","def","eleMas","enerRech_","critRate_","critDMG_","heal_"],(function(e){return s.qH.total[e]})),x=(0,l.Qq)(s.qH.infusion.nonOverridableSelf,s.qH.infusion.team,s.qH.infusion.overridableSelf),m=(0,l.Qq)((0,l.P5)(s.qH.hit.move,{skill:s.qH.charEle,burst:s.qH.charEle},void 0),(0,l.P5)(s.qH.weaponType,{sword:x,claymore:x,polearm:x,catalyst:s.qH.charEle},void 0),"physical");function v(e){switch(e){case"normal":case"charged":case"plunging":return"auto";case"skill":return"skill";case"burst":return"burst"}}function j(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,l.aT)(s.qH.hit.dmg,(0,o.b3)([{hit:{base:e,move:(0,l.a9)(t),ele:null!==r&&void 0!==r&&null!==(n=r.hit)&&void 0!==n&&n.ele?void 0:m}},r]))}function Z(e,t){var n=(0,l.WV)(e,(0,l.Sm)(l.J_,s.qH.total.shield_));return t?(0,l.aT)(n,t):n}function g(e,t){var n=s.qH.total.healInc,r=(0,l.WV)((0,l.Sm)(e,n),(0,l.Sm)(l.J_,s.qH.total.heal_,s.qH.total.incHeal_));return t?(0,l.aT)(r,t):r}function y(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=v(n);return j((0,l.WV)((0,l.lp)(s.qH.total["".concat(i,"Index")],t,{key:"_"}),s.qH.total[e]),n,r)}function b(e,t,n,r){return Z((0,l.Sm)((0,l.WV)(t,s.qH.total[e]),n),r)}function w(e,t,n,r){return g((0,l.Sm)((0,l.WV)(t,s.qH.total[e]),n),r)}function C(e,t,n,r,i){var a=v(r),o=s.qH.total["".concat(a,"Index")];return Z((0,l.Sm)((0,l.WV)((0,l.lp)(o,t,{key:"_"}),s.qH.total[e]),(0,l.lp)(o,n)),i)}function k(e,t){return(0,l.ce)((0,l.WV)((0,l.aQ)("geo"===e?1.5:2.5),t),{variant:e})}function P(e,t,n,r,i){var a=v(r),o=s.qH.total["".concat(a,"Index")];return g((0,l.Sm)((0,l.WV)((0,l.lp)(o,t,{key:"_"}),s.qH.total[e]),(0,l.lp)(o,n)),i)}function S(e,t,n,h,x){var m=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};function v(e,t){return(0,l.WV)(e,(0,l.lp)(s.qH.lvl,f[t]))}x.basic=(0,i.Z)({},p);var j,Z={charKey:(0,l.a9)(e),base:{},weaponType:(0,l.a9)(h.weaponTypeKey),premod:{},display:x};t&&(Z.charEle=(0,l.a9)(t),Z.teamBuff={tally:(0,r.Z)({},t,(0,l.a9)(1))},Z.display.basic["".concat(t,"_dmg_")]=s.qH.total["".concat(t,"_dmg_")],Z.display.reaction=c.gw[t]),n&&(0,d.SR)(Z,["teamBuff","tally",n],(0,l.a9)(1)),"catalyst"!==h.weaponTypeKey&&(Z.display.basic||(Z.display.basic={}),Z.display.basic.physical_dmg_=s.qH.total.physical_dmg_);for(var g=function(){var e=b[y],t=[];if(h.curves[e]&&t.push(v(h.base[e],h.curves[e])),h.ascensions.some((function(t){return t.props[e]}))&&t.push((0,l.lp)(s.qH.asc,h.ascensions.map((function(t){var n;return null!==(n=t.props[e])&&void 0!==n?n:NaN})))),!t.length)return"continue";var n=(0,l.ce)(1===t.length?t[0]:l.Sm.apply(void 0,t),{key:e,prefix:"char",asConst:!0});if(e.endsWith("_dmg_")&&(n.info.variant=e.slice(0,-5)),"atk"===e||"def"===e||"hp"===e)Z.base[e]=n;else{if(j)throw new Error("Duplicated Char Special");j=!0,Z.special=n,Z.premod[e]=s.qH.special}},y=0,b=[].concat((0,a.Z)(u.r),["def"]);y<b.length;y++)g();return(0,o.b3)([Z,(0,o.d1)(m)])}},50609:function(e,t,n){"use strict";n.d(t,{gw:function(){return m}});var r=n(29439),i=n(1413),a=n(74954),s=n(24351),o=n(60393),c=n(26138),l=n(78661),u=(0,l.lp)(c.qH.lvl,[-1,91.1791,98.707664,106.23622,113.76477,121.29332,128.82188,136.35042,143.87898,151.40752,158.93608,169.99149,181.07625,192.19037,204.0482,215.939,227.86275,247.68594,267.5421,287.4312,303.82642,320.22522,336.62762,352.31927,368.01093,383.70255,394.43237,405.18146,415.94992,426.73764,437.5447,450.6,463.7003,476.84558,491.1275,502.55457,514.0121,531.4096,549.9796,568.5849,584.9965,605.67035,626.3862,646.0523,665.7556,685.4961,700.8394,723.3331,745.8653,768.4357,786.79193,809.5388,832.32904,855.16266,878.0396,899.4848,919.362,946.0396,974.7642,1003.5786,1030.077,1056.635,1085.2463,1113.9244,1149.2587,1178.0648,1200.2238,1227.6603,1257.243,1284.9174,1314.7529,1342.6652,1372.7524,1396.321,1427.3124,1458.3745,1482.3358,1511.9109,1541.5493,1569.1537,1596.8143,1622.4197,1648.074,1666.3761,1684.6782,1702.9803,1726.1047,1754.6715,1785.8666,1817.1375,1851.0603]),d=(0,l.WV)(40/9,(0,l.F9)(c.qH.total.eleMas,1400)),h=(0,l.ce)((0,l.WV)((0,l.Sm)(l.J_,d),u),{key:"crystallize",variant:"geo"}),f=(0,l.lp)(c.qH.lvl,[-1,17.165606,18.535048,19.904854,21.274902,22.6454,24.649612,26.640642,28.868587,31.36768,34.143345,37.201,40.66,44.446667,48.56352,53.74848,59.081898,64.420044,69.72446,75.12314,80.58478,86.11203,91.70374,97.24463,102.812645,108.40956,113.20169,118.102905,122.97932,129.72733,136.29291,142.67085,149.02902,155.41699,161.8255,169.10631,176.51808,184.07274,191.70952,199.55692,207.38205,215.3989,224.16566,233.50217,243.35057,256.06308,268.5435,281.52606,295.01364,309.0672,323.6016,336.75754,350.5303,364.4827,378.61917,398.6004,416.39825,434.387,452.95105,472.60623,492.8849,513.56854,539.1032,565.51056,592.53876,624.4434,651.47015,679.4968,707.79407,736.67145,765.64026,794.7734,824.67737,851.1578,877.74207,914.2291,946.74677,979.4114,1011.223,1044.7917,1077.4437,1109.9976,1142.9766,1176.3695,1210.1844,1253.8357,1288.9528,1325.4841,1363.4569,1405.0974,1446.8535]),p=(0,l.WV)(16,(0,l.F9)(c.qH.total.eleMas,2e3)),x=(0,i.Z)((0,i.Z)({},(0,o.O)(["overloaded","electrocharged","superconduct","shattered"],(function(e){var t=a.Ne[e],n=t.multi,i=(0,r.Z)(t.variants,1)[0];return(0,l.ce)((0,l.WV)((0,l.ce)((0,l.WV)(n,f),{asConst:true}),(0,l.Sm)(l.J_,p,c.qH.total["".concat(e,"_dmg_")]),c.qH.enemy["".concat(i,"_resMulti")]),{key:"".concat(e,"_hit"),variant:e})}))),{},{swirl:(0,o.O)(a.Ne.swirl.variants,(function(e){return(0,l.ce)((0,l.WV)((0,l.ce)((0,l.WV)(a.Ne.swirl.multi,f),{asConst:true}),(0,l.Sm)(l.J_,p,c.qH.total.swirl_dmg_),c.qH.enemy["".concat(e,"_resMulti")]),{key:"".concat(e,"_swirl_hit"),variant:e})}))}),m={anemo:{electroSwirl:x.swirl.electro,pyroSwirl:x.swirl.pyro,cryoSwirl:x.swirl.cryo,hydroSwirl:x.swirl.hydro,shattered:x.shattered},geo:(0,i.Z)((0,i.Z)({crystallize:h},Object.fromEntries(s.gs.map((function(e){return["".concat(e,"Crystallize"),(0,l.ce)((0,l.WV)((0,l.aQ)(2.5),h),{key:"".concat(e,"_crystallize"),variant:e})]})))),{},{shattered:x.shattered}),electro:{overloaded:x.overloaded,electrocharged:x.electrocharged,superconduct:x.superconduct,shattered:x.shattered},hydro:{electrocharged:x.electrocharged,shattered:x.shattered},pyro:{overloaded:x.overloaded,shattered:x.shattered},cryo:{superconduct:x.superconduct,shattered:x.shattered}}},20078:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Pa}});var r=n(29439),i=n(63833),a=n(45781),s=n(19701),o=n(35893),c=n(66630),l=n(37355),u=n(68870),d=n(47047),h=n(39504),f=n(61889),p=n(57621),x=n(20890),m=n(25228),v=n(43896),j=n(24518),Z=n(2199),g=n(23786),y=n(56125),b=n(9585),w=n(94721),C=n(89673),k=n(55818),P=n(3721),S=n(72791),_=n(22020),A=n(43504),O=n(16871),E=n(3992),T=n(71310),D=n(3082),R=n(2380),M=n(68198),I=n(91702),K=n(10600),W=n(33890),z=n(1413),$=n(53174),q=n(54483),N=n(81918),L=n(45987),H=n(49670),V=n(66934),F=n(92443),G=n(80184),B=["name","children","value","placeholder","defaultValue","onValueChange","percent","disabled","onReset"],U=(0,V.ZP)(Z.Z)({display:"flex"});function J(e){var t=e.name,n=e.children,r=e.value,i=e.placeholder,a=e.defaultValue,s=void 0===a?0:a,o=e.onValueChange,c=e.percent,l=void 0!==c&&c,u=e.disabled,d=void 0!==u&&u,h=e.onReset,f=(0,L.Z)(e,B);return(0,G.jsxs)(U,(0,z.Z)((0,z.Z)({},f),{},{children:[n,(0,G.jsx)(F.Z,{sx:{whiteSpace:"nowrap"},children:t}),(0,G.jsx)(K.CC,{sx:{flexBasis:30,flexGrow:1},children:(0,G.jsx)(K.ZP,{sx:{px:1},inputProps:{sx:{textAlign:"right"}},float:l,placeholder:i,value:r,onChange:o,disabled:d,endAdornment:l?"%":void 0})}),(0,G.jsx)(j.Z,{onClick:function(){return h?h():o(s)},disabled:d||r===s,children:(0,G.jsx)(H.Z,{})})]}))}var X=n(2693),Y=n(26138),Q=n(79406),ee=n(24351),te=n(91732),ne=n(75545);function re(){var e=(0,S.useContext)(X.R).data,t=(0,S.useState)(!1),n=(0,r.Z)(t,2),i=n[0],a=n[1],s=(0,S.useCallback)((function(){return a(!i)}),[a,i]),o=e.get(Y.ri.enemy.level),c=e.get(Y.ri.enemy.defRed),u=e.get(Y.ri.enemy.defIgn);return(0,G.jsxs)(T.Z,{children:[(0,G.jsx)(h.Z,{children:(0,G.jsxs)(f.ZP,{container:!0,children:[(0,G.jsx)(f.ZP,{item:!0,flexGrow:1,alignItems:"center",children:(0,G.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(N.Z,{size:"small",color:"success",label:(0,G.jsxs)("span",{children:[Q.ZP.get(o.info.key)," ",(0,G.jsx)("strong",{children:o.value})]})})}),ee.Kj.map((function(e){return(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(x.Z,{children:(0,G.jsx)(ie,{element:e})},e)},e)})),(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsxs)(x.Z,{children:["DEF Reduction ",(0,Q.EC)(c.value,c.unit)]})}),(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsxs)(x.Z,{children:["DEF Ignore ",(0,Q.EC)(u.value,u.unit)]})})]})}),(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(te.Z,{expand:i,onClick:s,"aria-expanded":i,"aria-label":"show more",size:"small",sx:{p:0},children:(0,G.jsx)(l.Z,{})})})]})}),(0,G.jsx)(y.Z,{in:i,timeout:"auto",unmountOnExit:!0,children:(0,G.jsx)(h.Z,{sx:{pt:0},children:(0,G.jsx)(ae,{})})})]})}function ie(e){var t=e.element,n=(0,S.useContext)(X.R).data.get(Y.ri.enemy["".concat(t,"_res_")]),r=!isFinite(n.value)?(0,G.jsxs)("span",{children:[ne.h[t]," IMMUNE"]}):(0,G.jsxs)("span",{children:[ne.h[t],"RES ",(0,G.jsx)("strong",{children:(0,Q.EC)(n.value,n.unit)})]});return(0,G.jsx)(I.Z,{color:t,children:r})}function ae(e){var t,n,r,i=e.bsProps,a=void 0===i?{xs:12,md:6}:i,s=(0,S.useContext)(X.R),o=s.data,c=s.character.enemyOverride,l=s.characterDispatch,u=null!==(t=c.enemyLevel)&&void 0!==t?t:o.get(Y.ri.lvl).value,d=null!==(n=c.enemyDefIgn_)&&void 0!==n?n:0,h=null!==(r=c.enemyDefRed_)&&void 0!==r?r:0;return(0,G.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,G.jsx)(f.ZP,(0,z.Z)((0,z.Z)({item:!0},a),{},{children:(0,G.jsx)(j.Z,{fullWidth:!0,sx:{height:"100%"},size:"small",component:"a",color:"warning",href:"https://genshin-impact.fandom.com/wiki/Resistance#Base_Enemy_Resistances",target:"_blank",rel:"noreferrer",children:"To get the specific resistance values of enemies, please visit the wiki."})})),(0,G.jsx)(f.ZP,(0,z.Z)((0,z.Z)({item:!0},a),{},{children:(0,G.jsx)(J,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,G.jsx)("b",{children:Q.ZP.get("enemyLevel")}),value:u,placeholder:Q.ZP.getStr("enemyLevel"),defaultValue:o.get(Y.ri.lvl).value,onValueChange:function(e){return l({type:"enemyOverride",statKey:"enemyLevel",value:e})},onReset:function(){return l({type:"enemyOverride",statKey:"enemyLevel",value:void 0})}})})),ee.Kj.map((function(e){var t="".concat(e,"_enemyRes_"),n=c[t],r=n===Number.MAX_VALUE;return(0,G.jsx)(f.ZP,(0,z.Z)((0,z.Z)({item:!0},a),{},{children:(0,G.jsx)(J,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,G.jsx)(I.Z,{color:e,children:(0,G.jsx)("b",{children:Q.ZP.get(t)})}),value:n?r?1/0:n:10,placeholder:r?"Immune ":Q.ZP.getStr(t),defaultValue:10,onValueChange:function(e){return l({type:"enemyOverride",statKey:t,value:e})},disabled:r,percent:!0,children:(0,G.jsxs)(j.Z,{color:e,onClick:function(){return l({type:"enemyOverride",statKey:t,value:r?10:Number.MAX_VALUE})},children:[(0,G.jsx)(q.G,{icon:r?$.a3n:$.pL1,className:"fa-fw"})," Immunity"]})})}),e)})),(0,G.jsx)(f.ZP,(0,z.Z)((0,z.Z)({item:!0},a),{},{children:(0,G.jsx)(J,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,G.jsx)("b",{children:Q.ZP.get("enemyDefIgn_")}),value:d,placeholder:Q.ZP.getStr("enemyDefIgn_"),defaultValue:0,onValueChange:function(e){return l({type:"enemyOverride",statKey:"enemyDefIgn_",value:e})},percent:!0})})),(0,G.jsx)(f.ZP,(0,z.Z)((0,z.Z)({item:!0},a),{},{children:(0,G.jsx)(J,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,G.jsx)("b",{children:Q.ZP.get("enemyDefRed_")}),value:h,placeholder:Q.ZP.getStr("enemyDefRed_"),defaultValue:0,onValueChange:function(e){return l({type:"enemyOverride",statKey:"enemyDefRed_",value:e})},percent:!0})})),(0,G.jsx)(f.ZP,{item:!0,xs:12,children:(0,G.jsx)("small",{children:"Note: Genshin Impact halves resistance shred values below 0%. For the sake of calculations enter the RAW value and GO will do the rest. (e.g. 10% - 20% = -10%)"})})]})}var se=n(90388),oe=n(21206),ce=n(91839),le=n(25617),ue={"":(0,G.jsx)("span",{children:"No Team Melee Infusion"}),pyro:(0,G.jsxs)("span",{children:[ne.h.pyro," ",(0,G.jsx)(le.Z,{children:"Bennett C6"})," Fire Ventures with Me"]}),cryo:(0,G.jsxs)("span",{children:[ne.h.cryo," ",(0,G.jsx)(le.Z,{children:"Chongyun Skill"})," Spirit Blade: Chonghua's Layered Frost"]})};function de(e){var t=(0,S.useContext)(X.R),n=t.characterSheet,i=t.character.infusionAura,a=t.characterDispatch;return null!==n&&void 0!==n&&n.isMelee()?(0,G.jsx)(W.Z,(0,z.Z)((0,z.Z)({title:ue[i],color:i||"secondary",disableElevation:!0},e),{},{children:Object.entries(ue).map((function(e){var t=(0,r.Z)(e,2),n=t[0],s=t[1];return(0,G.jsx)(g.Z,{sx:n?{color:"".concat(n,".main")}:void 0,selected:n===i,disabled:n===i,onClick:function(){return a({infusionAura:n})},children:s},n)}))})):null}var he={mx:.25,px:.25,fontSize:"1em"};function fe(e){var t=(0,S.useContext)(X.R),n=t.data,r=t.character.reactionMode,i=t.characterDispatch,a=n.get(Y.ri.charEle).value,s=n.get(oe._d).value;return["pyro","hydro","cryo"].includes(a)||["pyro","hydro","cryo"].includes(s)?(0,G.jsxs)(ce.Z,(0,z.Z)((0,z.Z)({exclusive:!0,baseColor:"secondary",value:r,onChange:function(e,t){return i({reactionMode:t})}},e),{},{children:[(0,G.jsx)(se.Z,{value:"",disabled:""===r,children:"No Reactions"}),("pyro"===a||"pyro"===s)&&(0,G.jsxs)(se.Z,{value:"pyro_vaporize",disabled:"pyro_vaporize"===r,children:[(0,G.jsx)(I.Z,{color:"vaporize",children:"Vaporize(Pyro)"}),(0,G.jsxs)(u.Z,{display:"flex",alignItems:"center",children:[(0,G.jsx)(le.Z,{sx:he,color:"hydro",children:ne.h.hydro}),"+",(0,G.jsx)(le.Z,{sx:he,color:"pyro",children:ne.h.pyro})]})]}),("pyro"===a||"pyro"===s)&&(0,G.jsxs)(se.Z,{value:"pyro_melt",disabled:"pyro_melt"===r,children:[(0,G.jsx)(I.Z,{color:"melt",children:"Melt(Pyro)"}),(0,G.jsxs)(u.Z,{display:"flex",alignItems:"center",children:[(0,G.jsx)(le.Z,{sx:he,color:"cryo",children:ne.h.cryo}),"+",(0,G.jsx)(le.Z,{sx:he,color:"pyro",children:ne.h.pyro})]})]}),("hydro"===a||"hydro"===s)&&(0,G.jsxs)(se.Z,{value:"hydro_vaporize",disabled:"hydro_vaporize"===r,children:[(0,G.jsx)(I.Z,{color:"vaporize",children:"Vaporize(Hydro)"}),(0,G.jsxs)(u.Z,{display:"flex",alignItems:"center",children:[(0,G.jsx)(le.Z,{sx:he,color:"pyro",children:ne.h.pyro}),"+",(0,G.jsx)(le.Z,{sx:he,color:"hydro",children:ne.h.hydro})]})]}),("cryo"===a||"cryo"===s)&&(0,G.jsxs)(se.Z,{value:"cryo_melt",disabled:"cryo_melt"===r,children:[(0,G.jsx)(I.Z,{color:"melt",children:"Melt(Cryo)"}),(0,G.jsxs)(u.Z,{display:"flex",alignItems:"center",children:[(0,G.jsx)(le.Z,{sx:he,color:"pyro",children:ne.h.pyro}),"+",(0,G.jsx)(le.Z,{sx:he,color:"cryo",children:ne.h.cryo})]})]})]})):null}function pe(e){var t=(0,S.useContext)(X.R),n=t.character.hitMode,r=t.characterDispatch;return(0,G.jsxs)(ce.Z,(0,z.Z)((0,z.Z)({exclusive:!0,baseColor:"secondary",value:n,onChange:function(e,t){return r({hitMode:t})}},e),{},{children:[(0,G.jsx)(se.Z,{value:"avgHit",disabled:"avgHit"===n,children:"Avg. DMG"}),(0,G.jsx)(se.Z,{value:"hit",disabled:"hit"===n,children:"Non Crit DMG"}),(0,G.jsx)(se.Z,{value:"critHit",disabled:"critHit"===n,children:"Crit Hit DMG"})]}))}var xe=n(55942),me=n(2139),ve=n(53343),je=n(74165),Ze=n(93433),ge=n(15861),ye=n(31148),be=n(947),we=n(60393),Ce=n(66218),ke={title:(0,G.jsx)(I.Z,{color:"warning",children:"ERROR"})},Pe=(0,z.Z)({normal:"Normal Atk.",charged:"Charged Atk.",plunging:"Plunging Atk.",skill:"Ele. Skill",burst:"Ele. Burst",passive:"Passive",passive1:"1st Asc. Pass.",passive2:"4th Asc. Pass.",passive3:"Util. Pass."},Object.fromEntries((0,we.w6)(1,6).map((function(e){return["constellation".concat(e),"Const. ".concat(e)]}))));function Se(e,t){return _e.apply(this,arguments)}function _e(){return(_e=(0,ge.Z)((0,je.Z)().mark((function e(t,n){var i,a,s,o,c,l,u,d,h,f,p,m,v;return(0,je.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",ke);case 2:if("basic"!==n){e.next=6;break}return e.abrupt("return",{title:"Basic Stats"});case 6:if("reaction"!==n){e.next=10;break}return e.abrupt("return",{title:"Transformative Reactions"});case 10:if(!n.includes(":")){e.next=31;break}if(i=n.split(":"),a=(0,r.Z)(i,2),s=a[0],o=a[1],"artifact"!==s){e.next=21;break}return e.next=15,ye.y.get(o);case 15:if(c=e.sent){e.next=18;break}return e.abrupt("return",ke);case 18:return e.abrupt("return",{title:c.name,icon:c.defIconSrc});case 21:if("weapon"!==s){e.next=29;break}return e.next=24,Ce.Z.get(o);case 24:if(l=e.sent){e.next=27;break}return e.abrupt("return",ke);case 27:return u=t.get(Y.qH.weapon.asc).value,e.abrupt("return",{title:l.name,icon:u<2?l.img:l.imgAwaken});case 29:e.next=44;break;case 31:if(d=t.get(Y.qH.charKey).value,h=t.get(Y.qH.charEle).value,d&&h){e.next=35;break}return e.abrupt("return",ke);case 35:return e.next=37,be.Z.get(d);case 37:if(f=e.sent,p=["normal","charged","plunging"].includes(n)?"auto":n,m=null===f||void 0===f?void 0:f.getTalentOfKey(p,h)){e.next=42;break}return e.abrupt("return",ke);case 42:return v=Pe[n],e.abrupt("return",{icon:m.img,title:m.name,action:v?(0,G.jsx)(le.Z,{children:(0,G.jsx)(x.Z,{variant:"subtitle2",children:v})}):void 0});case 44:return e.abrupt("return",ke);case 45:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e){var t=e.getDisplay(),n=Object.entries(t).filter((function(e){var t=(0,r.Z)(e,2),n=(t[0],t[1]);return!Object.values(n).every((function(e){return e.isEmpty}))})),i=n.filter((function(e){return"basic"===(0,r.Z)(e,1)[0]})),a=n.filter((function(e){return"reaction"===(0,r.Z)(e,1)[0]})),s=n.filter((function(e){return(0,r.Z)(e,1)[0].startsWith("weapon")})),o=n.filter((function(e){return(0,r.Z)(e,1)[0].startsWith("artifact")})),c=n.filter((function(e){var t=(0,r.Z)(e,1)[0];return"basic"!==t&&"reaction"!==t&&!t.startsWith("weapon")&&!t.startsWith("artifact")}));return[].concat((0,Ze.Z)(i),(0,Ze.Z)(c),(0,Ze.Z)(s),(0,Ze.Z)(o),(0,Ze.Z)(a))}var Oe=n(50920),Ee=n(566),Te=n(42320),De=n(47639),Re=n(72056),Me=n(30168),Ie=n(97719),Ke=n(95193),We=n(40165),ze=n(30418),$e=n(37503);function qe(e){var t,n=e.setKey,r=e.setNumKey,i=e.hideHeader,a=void 0!==i&&i,s=e.conditionalsOnly,o=void 0!==s&&s,c=(0,Te.Z)(ye.y.get(n),[n]);if(!c)return null;var l=o?null===(t=c.setEffectDocument(r))||void 0===t?void 0:t.filter((function(e){return"states"in e})):c.setEffectDocument(r);return(0,G.jsx)(u.Z,{display:"flex",flexDirection:"column",children:l?(0,G.jsx)($e.Z,{sections:l,hideHeader:a}):null})}var Ne=n(95614),Le=n(16002),He=n(15021),Ve=n(52791),Fe=n(88034),Ge=n(78661);function Be(){var e=Ae((0,S.useContext)(X.R).data);return(0,G.jsx)(Ve.Z,{sx:{mr:-1,mb:-1},children:(0,G.jsx)(Le.ZP,{columns:{xs:1,sm:2,md:3,xl:4},spacing:1,children:e.map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,G.jsx)(Ue,{displayNs:i,sectionKey:n},n)}))})})}function Ue(e){var t=e.displayNs,n=e.sectionKey,i=(0,S.useContext)(X.R),a=i.data,s=i.oldData,o=(0,Te.Z)(Se(a,n),[a,n]),c=(0,S.useMemo)((function(){return(0,we.xh)(t,(function(e,t){return(0,Ge.UF)(["display",n,t])}))}),[t,n]);if(!o)return(0,G.jsx)(E.Z,{});var l=o.title,u=o.icon,d=o.action;return(0,G.jsxs)(E.Z,{children:[(0,G.jsx)(b.Z,{avatar:u&&(0,G.jsx)(xe.Z,{size:2,sx:{m:-1},src:u}),title:l,action:d,titleTypographyProps:{variant:"subtitle1"}}),(0,G.jsx)(w.Z,{}),(0,G.jsx)(h.Z,{sx:{p:0,"&:last-child":{pb:0}},children:(0,G.jsx)(Fe.lD,{sx:{m:0},children:Object.entries(t).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,G.jsx)(Fe.JW,{node:i,oldValue:s?s.get(c[n]).value:void 0,component:He.ZP},n)}))})})]})}var Je=n(56928),Xe=n(72838),Ye=n(90543);function Qe(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,S.useState)(e),n=(0,r.Z)(t,2),i=n[0],a=n[1],s=(0,S.useCallback)((function(){return a(!0)}),[a]),o=(0,S.useCallback)((function(){return a(!1)}),[a]);return[i,s,o]}var et=n(68544),tt=n(2191),nt=n(9321),rt=n(44824),it=n(70645),at=n(46956),st=n(96739),ot=n(99405),ct=n(98268),lt=n(63204),ut=n(66647),dt=n(13967),ht=n(12065),ft=n(19272),pt=n(63372),xt=n(96106),mt=n(20005),vt=n(50428);function jt(e){var t,n,r=e.artifactId,i=e.slotKey,a=e.mainStatAssumptionLevel,s=void 0===a?0:a,o=e.showLocation,c=void 0!==o&&o,l=e.onClick,d=e.BGComponent,h=void 0===d?E.Z:d,f=(0,pt.Z)(r),p=(0,Te.Z)(ye.y.get(null===f||void 0===f?void 0:f.setKey),[f]),m=(0,S.useCallback)((function(e){return(0,G.jsx)(ut.Z,{onClick:l,sx:{height:"100%"},children:e})}),[l]),v=(0,dt.Z)();if(!f)return(0,G.jsx)(h,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:(0,G.jsx)(u.Z,{component:"img",src:tt.Z.slot[i],sx:{width:"25%",height:"auto",opacity:.7}})});var j=f.slotKey,Z=f.rarity,g=f.level,y=f.mainStatKey,b=f.substats,w=f.location,C=Math.max(Math.min(s,4*Z),g),k=Q.ZP.unit(y),P="roll"+(Math.floor(Math.max(g,0)/4)+1),_=ee.Kj.find((function(e){return f.mainStatKey.includes(e)})),A=_?(0,ht.Fq)(v.palette[_].main,.6):(0,ht.Fq)(v.palette.secondary.main,.6);return(0,G.jsx)(h,{sx:{height:"100%"},children:(0,G.jsx)(mt.Z,{condition:!!l,wrapper:m,children:(0,G.jsxs)(u.Z,{display:"flex",height:"100%",children:[(0,G.jsxs)(u.Z,{className:"grad-".concat(Z,"star"),sx:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,G.jsx)(vt.Z,{slotKey:j,sheet:p,children:(0,G.jsx)(u.Z,{component:"img",src:null!==(t=null===p||void 0===p?void 0:p.slotIcons[j])&&void 0!==t?t:"",sx:{m:-1,maxHeight:"110%",maxWidth:"110%"}})}),(0,G.jsxs)(u.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[(0,G.jsx)(N.Z,{size:"small",label:(0,G.jsx)("strong",{children:" +".concat(g)}),color:P}),c&&(0,G.jsx)(N.Z,{size:"small",label:(0,G.jsx)(gt,{location:w}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),(0,G.jsx)(N.Z,{size:"small",sx:{position:"absolute",bottom:0,mb:1,backgroundColor:A},label:(0,G.jsxs)(x.Z,{variant:"h6",sx:{display:"flex",gap:1,px:1,zIndex:1},children:[(0,G.jsx)(xt.Z,{placement:"top",title:(0,G.jsx)(x.Z,{children:Q.ZP.getArtStr(y)}),disableInteractive:!0,children:(0,G.jsx)("span",{children:_?ne.h[_]:ne.Z[y]})}),(0,G.jsxs)(I.Z,{color:C!==g?"warning":void 0,children:[(0,Q.qs)(null!==(n=ft.Z.mainStatValue(y,Z,C))&&void 0!==n?n:0,Q.ZP.unit(y)),k]})]})})]}),(0,G.jsx)(u.Z,{display:"flex",flexDirection:"column",justifyContent:"space-between",sx:{p:1},children:b.map((function(e,t){return(0,G.jsx)(Zt,{stat:e},t+e.key)}))})]})})})}function Zt(e){var t,n,r=e.stat;if(!r.value)return null;var i=null!==(t=null===(n=r.rolls)||void 0===n?void 0:n.length)&&void 0!==t?t:0,a="roll".concat((0,we.uZ)(i,1,6)),s=Q.ZP.unit(r.key);return(0,G.jsx)(u.Z,{display:"flex",gap:1,alignContent:"center",children:(0,G.jsxs)(x.Z,{sx:{flexGrow:1,display:"flex",gap:1},color:i?"".concat(a,".main"):"error.main",component:"span",children:[(0,G.jsx)(xt.Z,{placement:"top",title:(0,G.jsx)(x.Z,{children:r.key&&Q.ZP.getArtStr(r.key)}),disableInteractive:!0,children:(0,G.jsx)("span",{children:ne.Z[r.key]})}),(0,G.jsx)("span",{children:"".concat((0,Q.qs)(r.value,Q.ZP.unit(r.key))).concat(s)})]})})}function gt(e){var t=e.location,n=(0,Te.Z)(be.Z.get(null!==t&&void 0!==t?t:""),[t]);return n?(0,G.jsx)(xt.Z,{placement:"right-end",title:(0,G.jsx)(x.Z,{children:n.name}),children:(0,G.jsx)(xe.Z,{src:n.thumbImgSide,sx:{height:"3em",marginTop:"-1.5em",marginLeft:"-0.5em"}})}):(0,G.jsx)(lt.Z,{})}var yt,bt,wt=n(73036),Ct=n(74480),kt=n(41717);function Pt(e){var t=e.weaponId,n=e.showLocation,r=void 0!==n&&n,i=e.onClick,a=e.BGComponent,s=void 0===a?E.Z:a,o=(0,Ct.Z)(t),c=(0,Te.Z)((null===o||void 0===o?void 0:o.key)&&Ce.Z.get(o.key),[null===o||void 0===o?void 0:o.key]),l=(0,S.useCallback)((function(e){return(0,G.jsx)(ut.Z,{sx:{height:"100%"},onClick:i,children:e})}),[i]),h=(0,S.useMemo)((function(){return c&&o&&(0,wt.mP)([c.data,(0,wt.v0)(o)])}),[c,o]);if(!o||!c||!h)return(0,G.jsx)(s,{sx:{height:"100%"},children:(0,G.jsx)(d.Z,{variant:"rectangular",sx:{width:"100%",height:"100%"}})});var f=o.refinement,p=o.location;return(0,G.jsx)(s,{sx:{height:"100%"},children:(0,G.jsx)(mt.Z,{condition:!!i,wrapper:l,children:(0,G.jsxs)(u.Z,{display:"flex",height:"100%",alignItems:"stretch",children:[(0,G.jsxs)(u.Z,{className:"grad-".concat(c.rarity,"star"),sx:{height:"100%",position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end"},children:[(0,G.jsx)(kt.Z,{sheet:c,children:(0,G.jsx)(u.Z,{component:"img",src:c.img,sx:{mx:-1,maxHeight:"100%",maxWidth:"100%"}})}),(0,G.jsxs)(u.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[(0,G.jsx)(N.Z,{size:"small",label:(0,G.jsx)("strong",{children:Ce.Z.getLevelString(o)}),color:"primary"}),r&&(0,G.jsx)(N.Z,{size:"small",label:(0,G.jsx)(_t,{location:p}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),(0,G.jsx)(u.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},children:c.hasRefinement&&(0,G.jsx)(N.Z,{size:"small",color:"info",label:(0,G.jsxs)("strong",{children:["R",f]})})})]}),(0,G.jsxs)(u.Z,{display:"flex",flexDirection:"column",sx:{p:1},children:[(0,G.jsx)(St,{node:h.get(Y.qH.weapon.main)}),(0,G.jsx)(St,{node:h.get(Y.qH.weapon.sub)})]})]})})})}function St(e){var t=e.node;if(!t.info.key)return null;var n=(0,Q.EC)(t.value,t.unit,t.unit?void 0:0);return(0,G.jsx)(u.Z,{display:"flex",gap:1,alignContent:"center",children:(0,G.jsxs)(x.Z,{sx:{flexGrow:1,display:"flex",gap:1},component:"span",children:[(0,G.jsx)(xt.Z,{placement:"top",title:(0,G.jsx)(x.Z,{children:t.info.key&&Q.ZP.getArtStr(t.info.key)}),disableInteractive:!0,children:(0,G.jsx)("span",{children:ne.Z[t.info.key]})}),(0,G.jsx)("span",{children:n})]})})}function _t(e){var t=e.location,n=(0,Te.Z)(be.Z.get(null!==t&&void 0!==t?t:""),[t]);return n?(0,G.jsx)(xt.Z,{placement:"right-end",title:(0,G.jsx)(x.Z,{children:n.name}),children:(0,G.jsx)(xe.Z,{src:n.thumbImgSide,sx:{height:"3em",marginTop:"-1.5em",marginLeft:"-0.5em"}})}):(0,G.jsx)(lt.Z,{})}function At(e){var t=e.index,n=e.compareBuild,i=e.extraButtons,a=e.disabled,s=(0,S.useContext)(Je.t).database,o=(0,S.useContext)(X.R),c=o.character,l=o.data,u=o.oldData,p=o.mainStatAssumptionLevel,m=(0,Te.Z)(ye.y.getAll,[]),v=(0,S.useState)(void 0),Z=(0,r.Z)(v,2),g=Z[0],y=Z[1],b=(0,S.useCallback)((function(){return y(void 0)}),[y]),w=(0,S.useCallback)((function(){if(window.confirm("Do you want to equip this build to this character?")){var e=Object.fromEntries(ee.eV.map((function(e){return[e,l.get(Y.ri.art[e].id).value]})));s.equipArtifacts(c.key,e),s.setWeaponLocation(l.get(Y.ri.weapon.id).value,c.key)}}),[c,l,s]);if(!c||!m||!u)return null;var C=ee.eV.every((function(e){return l.get(Y.ri.art[e].id).value===u.get(Y.ri.art[e].id).value}))&&l.get(Y.ri.weapon.id).value===u.get(Y.ri.weapon.id).value,k=(0,z.Z)({},o);n||(k.oldData=void 0);var P={};return ee.eV.forEach((function(e){var t=l.get(Y.ri.art[e].set).value;t&&(P[t]?P[t].push(e):P[t]=[e])})),(0,G.jsx)(T.Z,{children:(0,G.jsxs)(S.Suspense,{fallback:(0,G.jsx)(d.Z,{variant:"rectangular",width:"100%",height:600}),children:[g&&(0,G.jsx)(Ot,{newOld:g,mainStatAssumptionLevel:p,onClose:b}),(0,G.jsxs)(h.Z,{children:[(0,G.jsxs)(Ve.Z,{display:"flex",gap:1,sx:{pb:1},flexWrap:"wrap",children:[void 0!==t&&(0,G.jsx)(le.Z,{color:"info",children:(0,G.jsx)(x.Z,{children:(0,G.jsxs)("strong",{children:["#",t+1,C?" (Equipped)":""]})})}),Object.entries(P).sort((function(e,t){var n=(0,r.Z)(e,2),i=(n[0],n[1]),a=(0,r.Z)(t,2);a[0];return a[1].length-i.length})).map((function(e){var t,n=(0,r.Z)(e,2),i=n[0],a=n[1];return(0,G.jsx)(Ve.Z,{children:(0,G.jsx)(le.Z,{color:C?"success":"primary",children:(0,G.jsxs)(x.Z,{children:[a.map((function(e){return(0,Ne.Ir)(e)}))," ",null!==(t=null===m||void 0===m?void 0:m[i].name)&&void 0!==t?t:""]})})},i)})),(0,G.jsx)(Ve.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"flex-end"}}),(0,G.jsx)(j.Z,{size:"small",color:"success",onClick:w,disabled:a||C,children:"Equip Build"}),i]}),(0,G.jsxs)(f.ZP,{container:!0,spacing:1,sx:{pb:1},children:[(0,G.jsx)(f.ZP,{item:!0,xs:6,sm:4,md:3,lg:2,children:(0,G.jsx)(Pt,{showLocation:!0,weaponId:l.get(Y.ri.weapon.id).value})}),ee.eV.map((function(e){return(0,G.jsx)(f.ZP,{item:!0,xs:6,sm:4,md:3,lg:2,children:(0,G.jsx)(jt,{showLocation:!0,slotKey:e,artifactId:l.get(Y.ri.art[e].id).value,mainStatAssumptionLevel:p,onClick:function(){var t=c.equippedArtifacts[e],n=l.get(Y.ri.art[e].id).value;y({oldId:t!==n?t:void 0,newId:n})}})},e)}))]}),(0,G.jsx)(X.R.Provider,{value:k,children:(0,G.jsx)(Be,{})})]})]})})}function Ot(e){var t=e.newOld,n=t.newId,r=t.oldId,i=e.mainStatAssumptionLevel,a=e.onClose;return(0,G.jsx)(nt.Z,{open:!!n,onClose:a,containerProps:{maxWidth:r?"md":"xs"},children:(0,G.jsx)(E.Z,{children:(0,G.jsxs)(h.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2,height:"100%"},children:[r&&(0,G.jsx)(Ve.Z,{children:(0,G.jsx)(Xe.Z,{artifactId:r,mainStatAssumptionLevel:i,disableEditSetSlot:!0,canExclude:!0,canEquip:!0})}),r&&(0,G.jsx)(Ve.Z,{display:"flex",flexGrow:1}),r&&(0,G.jsx)(Ve.Z,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,G.jsx)(T.Z,{sx:{display:"flex"},children:(0,G.jsx)(ct.Z,{sx:{fontSize:40}})})}),r&&(0,G.jsx)(Ve.Z,{display:"flex",flexGrow:1}),(0,G.jsx)(Ve.Z,{children:(0,G.jsx)(Xe.Z,{artifactId:n,mainStatAssumptionLevel:i,disableEditSetSlot:!0,canExclude:!0,canEquip:!0})})]})})})}function Et(e){var t=e.artId,n=e.weaponId,i=(0,_.$)("page_character").t,a=Qe(!1),s=(0,r.Z)(a,3),o=s[0],c=s[1],l=s[2],u=(0,S.useContext)(Je.t).database,h=(0,S.useContext)(X.R),f=h.character,p=h.character,m=p.key,v=p.equippedArtifacts,Z=h.characterSheet,g=h.data,y=h.mainStatAssumptionLevel,b=h.characterDispatch,w=(0,S.useMemo)((function(){var e=u._getArt(null!==t&&void 0!==t?t:""),n=(0,we.xh)(v,(function(t,n){return n===(null===e||void 0===e?void 0:e.slotKey)?e:u._getArt(t)}));return Object.values(n)}),[u,v,t]),C=(0,De.Z)(m,y,w,n?u._getWeapon(n):void 0);return C?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(nt.Z,{open:o,onClose:l,containerProps:{maxWidth:"xl"},children:(0,G.jsx)(S.Suspense,{fallback:(0,G.jsx)(d.Z,{variant:"rectangular",width:"100%",height:600}),children:(0,G.jsx)(X.R.Provider,{value:{characterSheet:Z,character:f,characterDispatch:b,mainStatAssumptionLevel:y,data:C[m].target,teamData:C,oldData:g},children:(0,G.jsx)(At,{compareBuild:!0,extraButtons:(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(pe,{size:"small"}),(0,G.jsx)(fe,{size:"small"}),(0,G.jsx)(j.Z,{size:"small",color:"error",onClick:l,children:(0,G.jsx)(st.Z,{})})]})})})})}),(0,G.jsx)(We.Z,{title:(0,G.jsx)(x.Z,{children:i(yt||(yt=(0,Me.Z)(["tabEquip.compare"])))}),placement:"top",arrow:!0,children:(0,G.jsx)(j.Z,{color:"info",size:"small",onClick:c,children:(0,G.jsx)(ot.Z,{})})})]}):null}var Tt={xs:6,sm:6,md:9,lg:12,xl:12},Dt=(0,S.lazy)((function(){return n.e(23).then(n.bind(n,80367))}));function Rt(e){var t=e.onChangeId,n=e.slotKey,i=e.show,a=e.onClose,s=(0,_.$)("page_character").t,o=(0,S.useContext)(Je.t).database,c=(0,S.useCallback)((function(e){t(e),a()}),[t,a]),l=(0,S.useCallback)((function(e,t){return(0,z.Z)((0,z.Z)((0,z.Z)({},e),t),{},{slotKeys:[n]})}),[n]),p=(0,S.useReducer)(l,(0,z.Z)((0,z.Z)({},(0,rt.Af)()),{},{slotKeys:[n]})),m=(0,r.Z)(p,2),v=m[0],j=m[1],Z=(0,et.Z)(),g=(0,r.Z)(Z,2),y=g[0],b=g[1];(0,S.useEffect)((function(){return o.followAnyArt(b)}),[o,b]);var C=(0,it.Z)(),k=(0,S.useMemo)((function(){return(0,rt.EM)()}),[]),P=(0,S.useMemo)((function(){var e=(0,at.C)(v,k);return y&&o._getArts().filter(e).map((function(e){return e.id})).slice(0,Tt[C])}),[y,o,k,v,C]);return(0,G.jsx)(nt.Z,{open:i,onClose:a,containerProps:{maxWidth:"xl"},children:(0,G.jsxs)(E.Z,{children:[(0,G.jsxs)(h.Z,{sx:{py:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,G.jsxs)(x.Z,{variant:"h6",children:[n?(0,G.jsx)(xe.Z,{src:tt.Z.slot[n]}):null," ",s(bt||(bt=(0,Me.Z)(["tabEquip.swapArt"])))]}),(0,G.jsx)(M.Z,{onClick:a})]}),(0,G.jsx)(w.Z,{}),(0,G.jsxs)(h.Z,{children:[(0,G.jsx)(S.Suspense,{fallback:(0,G.jsx)(d.Z,{variant:"rectangular",width:"100%",height:200}),children:(0,G.jsx)(Dt,{filterOption:v,filterOptionDispatch:j})}),(0,G.jsx)(u.Z,{mt:1,children:(0,G.jsx)(S.Suspense,{fallback:(0,G.jsx)(d.Z,{variant:"rectangular",width:"100%",height:300}),children:(0,G.jsx)(f.ZP,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:P.map((function(e){return(0,G.jsx)(f.ZP,{item:!0,xs:1,children:(0,G.jsx)(Xe.Z,{artifactId:e,extraButtons:(0,G.jsx)(Et,{artId:e}),onClick:c})},e)}))})})})]})]})})}var Mt,It,Kt,Wt,zt,$t=n(10157),qt=n(75308),Nt=n(66045),Lt=(0,qt.X)((0,Ze.Z)(ee.wC));function Ht(e){var t=e.onChangeId,n=e.weaponTypeKey,i=e.show,a=e.onClose,s=(0,_.$)("page_character").t,o=(0,S.useContext)(Je.t).database,c=(0,S.useCallback)((function(e){t(e),a()}),[t,a]),l=(0,et.Z)(),d=(0,r.Z)(l,2),p=d[0],m=d[1];(0,S.useEffect)((function(){return o.followAnyWeapon(m)}),[m,o]);var v=(0,Te.Z)(Ce.Z.getAll,[]),j=(0,S.useMemo)((function(){return v&&(0,Nt.Xg)(v)}),[v]),Z=(0,S.useMemo)((function(){return v&&(0,Nt.Sn)(v)}),[v]),g=(0,S.useState)([5,4,3]),y=(0,r.Z)(g,2),b=y[0],C=y[1],k=(0,S.useMemo)((function(){var e;return null!==(e=j&&Z&&p&&o._getWeapons().filter((0,at.C)({weaponType:n,rarity:b},j)).sort((0,at.e)("level",!1,Z)).map((function(e){return e.id})))&&void 0!==e?e:[]}),[p,o,j,Z,b,n]);return(0,G.jsx)(nt.Z,{open:i,onClose:a,children:(0,G.jsxs)(E.Z,{children:[(0,G.jsx)(h.Z,{sx:{py:1},children:(0,G.jsxs)(f.ZP,{container:!0,children:[(0,G.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,G.jsxs)(x.Z,{variant:"h6",children:[n?(0,G.jsx)(xe.Z,{src:tt.Z.weaponTypes[n]}):null," ",s(Mt||(Mt=(0,Me.Z)(["tabEquip.swapWeapon"])))]})}),(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(M.Z,{onClick:a})})]})}),(0,G.jsx)(w.Z,{}),(0,G.jsxs)(h.Z,{children:[(0,G.jsx)(u.Z,{mb:1,children:(0,G.jsx)(ce.Z,{sx:{height:"100%"},value:b,size:"small",children:ee.wC.map((function(e){return(0,G.jsx)(se.Z,{value:e,onClick:function(){return C(Lt(b,e))},children:(0,G.jsxs)(u.Z,{display:"flex",gap:1,children:[(0,G.jsx)("strong",{children:e}),(0,G.jsx)($t.t,{stars:1})]})},e)}))})}),(0,G.jsx)(f.ZP,{container:!0,spacing:1,children:k.map((function(e){return(0,G.jsx)(f.ZP,{item:!0,xs:6,sm:6,md:4,lg:3,children:(0,G.jsx)(Ye.Z,{weaponId:e,onClick:c,extraButtons:(0,G.jsx)(Et,{weaponId:e})})},e)}))})]})]})})}var Vt=(0,S.lazy)((function(){return n.e(923).then(n.bind(n,74476))}));var Ft=function(){var e=(0,_.$)("page_character").t,t=(0,S.useContext)(X.R),n=t.teamData,i=t.data,a=t.character,s=t.character,o=s.equippedWeapon,c=s.key,l=s.equippedArtifacts,d=t.characterSheet,p=t.mainStatAssumptionLevel,x=n[c].weaponSheet,m=(0,S.useState)(""),v=(0,r.Z)(m,2),Z=v[0],g=v[1],y=(0,S.useCallback)((function(){return g(o)}),[o]),b=(0,S.useCallback)((function(){return g("")}),[]);(0,S.useEffect)((function(){Z&&Z!==o&&g(o)}),[Z,o]);var w=(0,S.useContext)(Je.t).database,C=(0,Te.Z)(ye.y.getAll,[]),k=(0,et.Z)(),P=(0,r.Z)(k,2)[1];(0,S.useEffect)((function(){return w.followAnyArt(P)}));var A=(0,S.useMemo)((function(){return!!Object.values(l).filter((function(e){return e})).length}),[l]),O=(0,S.useCallback)((function(){a&&window.confirm("Do you want to move all currently equipped artifacts to inventory?")&&w.equipArtifacts(a.key,(0,we.O)(ee.eV,(function(e){return""})))}),[a,w]),E=(0,S.useMemo)((function(){return C&&ye.y.setEffects(C,i)}),[C,i]),D=(0,ze.Z)(),R=(0,Ke.Z)(D.breakpoints.up("xl")),M=(0,S.useMemo)((function(){return C&&E&&Object.entries(E).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,G.jsx)(T.Z,{sx:{flexGrow:1},children:(0,G.jsx)(h.Z,{children:(0,G.jsx)(f.ZP,{container:!0,spacing:1,flexDirection:"column",height:"100%",children:(0,G.jsx)(f.ZP,{item:!0,display:"flex",flexDirection:"column",gap:2,children:i.map((function(e){return(0,G.jsx)(qe,{setKey:n,setNumKey:e},n+e)}))})})})},n)}))}),[C,E]),I=(0,S.useMemo)((function(){return x.document.length>0&&(0,G.jsx)(T.Z,{children:(0,G.jsx)(h.Z,{children:(0,G.jsx)($e.Z,{sections:x.document})})})}),[x]);return(0,G.jsxs)(u.Z,{display:"flex",flexDirection:"column",gap:1,children:[(0,G.jsx)(S.Suspense,{fallback:!1,children:(0,G.jsx)(Vt,{weaponId:Z,footer:!0,onClose:b,extraButtons:(0,G.jsx)(Ut,{weaponTypeKey:d.weaponTypeKey})})}),(0,G.jsx)(T.Z,{children:(0,G.jsx)(h.Z,{children:(0,G.jsx)(Be,{})})}),(0,G.jsxs)(f.ZP,{container:!0,spacing:1,children:[R&&(0,G.jsxs)(f.ZP,{item:!0,xs:12,md:12,xl:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[I,A&&(0,G.jsx)(j.Z,{color:"error",onClick:O,fullWidth:!0,children:e(It||(It=(0,Me.Z)(["tabEquip.unequipArts"])))}),M]}),(0,G.jsxs)(f.ZP,{item:!0,xs:12,md:12,xl:9,container:!0,spacing:1,children:[(0,G.jsx)(f.ZP,{item:!0,xs:12,sm:6,md:4,display:"flex",flexDirection:"column",gap:1,children:(0,G.jsx)(Ye.Z,{weaponId:o,onEdit:y,canEquip:!0,extraButtons:(0,G.jsx)(Bt,{weaponTypeKey:d.weaponTypeKey})})}),ee.eV.map((function(e){return(0,G.jsx)(f.ZP,{item:!0,xs:12,sm:6,md:4,children:i.get(Y.ri.art[e].id).value?(0,G.jsx)(Xe.Z,{artifactId:i.get(Y.ri.art[e].id).value,mainStatAssumptionLevel:p,extraButtons:(0,G.jsx)(Jt,{slotKey:e}),editor:!0,canExclude:!0,canEquip:!0}):(0,G.jsx)(Gt,{slotKey:e})},e)}))]}),!R&&(0,G.jsxs)(f.ZP,{item:!0,xs:12,md:12,xl:3,container:!0,spacing:1,children:[(0,G.jsx)(f.ZP,{item:!0,xs:12,md:6,lg:4,children:I}),(0,G.jsx)(f.ZP,{item:!0,xs:12,md:6,lg:4,children:M})]})]})]})};function Gt(e){var t=e.slotKey,n=(0,S.useContext)(X.R).character.key,i=(0,S.useContext)(Je.t).database,a=Qe(),s=(0,r.Z)(a,3),o=s[0],c=s[1],l=s[2];return(0,G.jsxs)(T.Z,{sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[(0,G.jsx)(h.Z,{children:(0,G.jsx)(x.Z,{children:(0,G.jsx)(Ne.ZP,{slotKey:t})})}),(0,G.jsx)(w.Z,{}),(0,G.jsxs)(u.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,G.jsx)(Rt,{slotKey:t,show:o,onClose:l,onChangeId:function(e){return i.setArtLocation(e,n)}}),(0,G.jsx)(j.Z,{onClick:c,color:"info",sx:{borderRadius:"1em"},children:(0,G.jsx)(Ie.Z,{sx:{height:100,width:100}})})]})]})}function Bt(e){var t=e.weaponTypeKey,n=(0,_.$)("page_character").t,i=(0,S.useContext)(X.R).character.key,a=(0,S.useContext)(Je.t).database,s=Qe(),o=(0,r.Z)(s,3),c=o[0],l=o[1],u=o[2];return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(We.Z,{title:(0,G.jsx)(x.Z,{children:n(Kt||(Kt=(0,Me.Z)(["tabEquip.swapWeapon"])))}),placement:"top",arrow:!0,children:(0,G.jsx)(j.Z,{color:"info",size:"small",onClick:l,children:(0,G.jsx)(Ie.Z,{})})}),(0,G.jsx)(Ht,{weaponTypeKey:t,onChangeId:function(e){return a.setWeaponLocation(e,i)},show:c,onClose:u})]})}function Ut(e){var t=e.weaponTypeKey,n=(0,_.$)("page_character").t,i=(0,S.useContext)(X.R).character.key,a=(0,S.useContext)(Je.t).database,s=Qe(),o=(0,r.Z)(s,3),c=o[0],l=o[1],u=o[2];return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(j.Z,{color:"info",onClick:l,startIcon:(0,G.jsx)(Ie.Z,{}),children:n(Wt||(Wt=(0,Me.Z)(["tabEquip.swapWeapon"])))}),(0,G.jsx)(Ht,{weaponTypeKey:t,onChangeId:function(e){return a.setWeaponLocation(e,i)},show:c,onClose:u})]})}function Jt(e){var t=e.slotKey,n=(0,_.$)("page_character").t,i=(0,S.useContext)(X.R).character.key,a=(0,S.useContext)(Je.t).database,s=Qe(),o=(0,r.Z)(s,3),c=o[0],l=o[1],u=o[2];return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(We.Z,{title:(0,G.jsx)(x.Z,{children:n(zt||(zt=(0,Me.Z)(["tabEquip.swapArt"])))}),placement:"top",arrow:!0,children:(0,G.jsx)(j.Z,{color:"info",size:"small",onClick:l,children:(0,G.jsx)(Ie.Z,{})})}),(0,G.jsx)(Rt,{slotKey:t,show:c,onClose:u,onChangeId:function(e){return a.setArtLocation(e,i)}})]})}var Xt=n(72247),Yt=n(9912),Qt=n(94070),en=n(23060);function tn(){return new Worker(n.p+"static/js/BackgroundWorker.56afc2e0.worker.js")}var nn=n(21977),rn=n(30865),an=n(14525),sn=n(69292),on=n(64737),cn=n(4942);function ln(e,t){for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length,i=0;i<5;i++){for(var a="",s=0;s<e;s++)a+=n.charAt(Math.floor(Math.random()*r));if(!t||!t.includes(a))return a}throw Error("Too many collisions in `makeid`")}function un(e){return{operation:"read",operands:[],path:["dyn",e],type:"number",accu:"add"}}function dn(e){return"const"===e.operation||"read"===e.operation||"threshold"===e.operation||"add"===e.operation&&e.operands.every((function(e){return"const"===e.operation||"read"===e.operation||"threshold"===e.operation}))}function hn(e,t){delete e.base[t],e.values.flower.forEach((function(e){return delete e.values[t]})),e.values.plume.forEach((function(e){return delete e.values[t]})),e.values.sands.forEach((function(e){return delete e.values[t]})),e.values.goblet.forEach((function(e){return delete e.values[t]})),e.values.circlet.forEach((function(e){return delete e.values[t]}))}function fn(e,t){var n=Object.keys(e.base),i={};function a(e,t){if(!dn(e))throw Error("`distribute` only works on shallow node type.");if(1===t)return e;switch(e.operation){case"threshold":var s=(0,r.Z)(e.operands,4),o=s[0],c=s[1],l=s[2],u=s[3];return(0,Ge.ER)(o,c,yn([l,(0,Ge.a9)(t)]),yn([u,(0,Ge.a9)(t)]),{source:o.path[1]});case"const":return(0,Ge.a9)(t*e.value);case"add":return Ge.Sm.apply(void 0,(0,Ze.Z)(e.operands.map((function(e){return a(e,t)}))));case"read":var d=ln(5,[].concat((0,Ze.Z)(n),(0,Ze.Z)(Object.keys(i))));return i[d]={base:0,coeff:t,sumKeys:[e.path[1]]},un(d);default:throw Error("Should not reach here...")}}for(var s=(0,on.uW)(t,(function(e){return e}),(function(e){switch(e.operation){case"mul":var t=e.operands;if(t.some((function(e){return"mul"===e.operation}))){var r=t.filter((function(e){return"mul"===e.operation})).flatMap((function(e){return(0,Ze.Z)(e.operands)})),s=t.filter((function(e){return"mul"!==e.operation}));t=[].concat((0,Ze.Z)(s),(0,Ze.Z)(r))}if(t.every(dn)&&t.some((function(e){return"const"===e.operation}))){var o=t.reduce((function(e,t){return"const"===t.operation?e*t.value:e}),1),c=t.filter((function(e){return"const"!==e.operation}));if(0===c.length)return(0,Ge.a9)(o);var l=a(c.pop(),o);return 0===c.length?l:Ge.WV.apply(void 0,[l].concat((0,Ze.Z)(c)))}return e;case"add":var u=e.operands;if(u.some((function(e){return"add"===e.operation}))){var d=u.filter((function(e){return"add"===e.operation})).flatMap((function(e){return(0,Ze.Z)(e.operands)})),h=u.filter((function(e){return"add"!==e.operation}));u=[].concat((0,Ze.Z)(h),(0,Ze.Z)(d))}if(u.filter((function(e){return"const"===e.operation||"read"===e.operation})).length>1){var f=u.filter((function(e){return"const"!==e.operation&&"read"!==e.operation})),p=u.filter((function(e){return"const"===e.operation||"read"===e.operation})),x=ln(5,[].concat((0,Ze.Z)(n),(0,Ze.Z)(Object.keys(i)))),m=p.reduce((function(e,t){return"const"===t.operation?e+t.value:e}),0),v=p.map((function(e){return"read"===e.operation?e.path[1]:void 0})).filter((function(e){return e}));return i[x]={base:m,coeff:1,sumKeys:v},0===f.length?un(x):Ge.Sm.apply(void 0,(0,Ze.Z)(f).concat([un(x)]))}return e;default:return e}})),o=new Set(Object.keys(e.base)),c=Object.entries(i),l=function(){var t=c.shift(),n=(0,r.Z)(t,2),i=n[0],a=n[1],s=a.base,l=a.coeff,u=a.sumKeys;if(!u.every((function(e){return o.has(e)})))return c.push([i,{base:s,coeff:l,sumKeys:u}]),"continue";var d=function(e){return l*u.reduce((function(t,n){return t+e[n]}),0)};e.base[i]=s+d(e.base),e.values.flower.forEach((function(e){return e.values[i]=d(e.values)})),e.values.plume.forEach((function(e){return e.values[i]=d(e.values)})),e.values.sands.forEach((function(e){return e.values[i]=d(e.values)})),e.values.goblet.forEach((function(e){return e.values[i]=d(e.values)})),e.values.circlet.forEach((function(e){return e.values[i]=d(e.values)})),o.add(i)};c.length>0;)l();var u=new Set(o);return(0,on.aD)(s,(function(e){}),(function(e){"read"===e.operation&&u.delete(e.path[1])})),u.forEach((function(t){return hn(e,t)})),{a:e,nodes:s}}function pn(e,t){var n=function(e){var t=(0,z.Z)({},e.base),n=(0,z.Z)({},e.base);return Object.entries(e.values).forEach((function(e){var i=(0,r.Z)(e,2),a=(i[0],function(e){if(0===e.length)return{statsMin:{},statsMax:{}};var t=Object.keys(e[0].values),n={},i={},a=new Set;t.forEach((function(e){n[e]=1/0,i[e]=-1/0}));for(var s=0;s<e.length;s++){for(var o=0;o<t.length;o++){var c=t[o];n[c]=Math.min(e[s].values[c],n[c]),i[c]=Math.max(e[s].values[c],i[c])}e[s].set&&a.add(e[s].set)}if(a.forEach((function(e){i[e]=1,n[e]=0})),1===a.size){var l=(0,r.Z)(a,1)[0];n[l]=1}return{statsMin:n,statsMax:i}}(i[1])),s=a.statsMin,o=a.statsMax;Object.keys(s).forEach((function(e){var r,i;t[e]=s[e]+(null!==(r=t[e])&&void 0!==r?r:0),n[e]=o[e]+(null!==(i=n[e])&&void 0!==i?i:0)}))})),{statsMin:t,statsMax:n}}(e),i=n.statsMin,a=n.statsMax;t=function(e,t,n){var i=Object.keys(t).filter((function(e){return t[e]===n[e]})),a=(0,on.uW)(e,(function(e){return e}),(function(e){switch(e.operation){case"add":return gn(e.operands);case"mul":return yn(e.operands);case"read":return i.includes(e.path[1])?(0,Ge.a9)(t[e.path[1]]):e;case"threshold":var a=(0,r.Z)(e.operands,4),s=a[0],o=a[1],c=a[2],l=a[3];if("const"===s.operation&&"const"===o.operation)return s.value>=o.value?c:l;if("read"===s.operation&&"const"===o.operation){if(t[s.path[1]]>=o.value)return c;if(n[s.path[1]]<o.value)return l}return e;case"min":case"max":case"res":case"sum_frac":if(e.operands.every((function(e){return"const"===e.operation}))){var u=sn.aj[e.operation](e.operands.map((function(e){return"const"===e.operation?e.value:NaN})));return(0,Ge.a9)(u)}return e;default:return e}}));return a}(t,i,a);var s=fn(e,t);e=s.a,t=s.nodes;for(var o=Object.keys(e.base),c=[e.base].concat((0,Ze.Z)(Object.values(e.values).flatMap((function(e){return e.map((function(e){return e.values}))})))),l=o.length,u=c.length,d=o.map((function(e){return c.map((function(t){return t[e]}))})),h=Array(l).fill(0).map((function(e){return Array(l).fill(0)})),f=0;f<l;f++)h[f][f]=1;for(var p=new Set,x=function(e){for(var t=-1,n=0;n<l;n++)if(!p.has(n)&&Math.abs(d[n][e])>1e-8){t=n;break}if(t<0)return"continue";p.add(t);for(var r=t,i=0;i<l;i++)p.has(i)||Math.abs(d[i][e])>1e-8&&function(){var t=d[i][e]/d[r][e];d[i]=d[i].map((function(e,n){return e-t*d[r][n]})),h[i]=h[i].map((function(e,n){return e-t*h[r][n]}))}();return p.size===l?"break":void 0},m=0;m<u;m++){var v=x(m);if("continue"!==v&&"break"===v)break}if(p.size===l)return{a:e,nodes:t};for(var j=function(n){if(!p.has(n)){var r=h[n].map((function(e,t){return{w:t===n?0:-e,key:o[t]}})).filter((function(e){var t=e.w;return Math.abs(t)>1e-8}));if(r.some((function(e){return e.w<0})))return"continue";var i=gn(r.map((function(e){var t=e.w,n=e.key;return 1===t?un(n):(0,Ge.WV)(t,un(n))})));t=(0,on.uW)(t,(function(e){return e}),(function(e){return"read"===e.operation&&e.path[1]===o[n]?i:e})),hn(e,o[n])}},Z=0;Z<l;Z++)j(Z);return{a:e,nodes:t}}function xn(e){return(0,on.uW)(e,(function(e){return e}),(function(e){if("threshold"===e.operation){var t=(0,r.Z)(e.operands,4),n=t[0],i=t[1],a=t[2],s=t[3];if("const"!==a.operation||"const"!==s.operation){if("const"===s.operation&&0===s.value)return(0,Ge.WV)((0,Ge.ER)(n,i,1,0),a);throw Error("Not Implemented: threshold() node with non-constant `pass` AND non-zero `fail`")}return e}return e}))}function mn(e){if("add"===e.operation)return e.operands.map((function(e){return mn(e)})).reduce((function(e,t){return Object.entries(t).forEach((function(t){var n,i=(0,r.Z)(t,2),a=i[0],s=i[1];return e[a]=Math.min(s,null!==(n=e[a])&&void 0!==n?n:0)})),e}),{});if("mul"===e.operation)return e.operands.map((function(e){return mn(e)})).reduce((function(e,t){return Object.entries(t).forEach((function(t){var n,i=(0,r.Z)(t,2),a=i[0],s=i[1];return e[a]=Math.max(s,null!==(n=e[a])&&void 0!==n?n:0)})),e}),{});if("threshold"===e.operation){var t=e.operands[0];if("read"===t.operation&&ee.q2.includes(t.path[1])){var n=e.operands[1];return(0,cn.Z)({},t.path[1],n.value)}}return{}}function vn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.flat()}function jn(){return we.Og.apply(void 0,arguments).map((function(e){return e.reduce((function(e,t){var n;return e.coeff*=t.coeff,(n=e.terms).push.apply(n,(0,Ze.Z)(t.terms)),e}),{coeff:1,terms:[]})}))}function Zn(e,t){var n={},i={},a=null!==t&&void 0!==t?t:[];function s(e){for(var t=(0,Ge.PX)(e),r=n[t];void 0!==r;){if((0,Ge.NY)(r.n,e))return r.tag;r=r.next}var s=ln(10,a);return n[t]={n:e,tag:s,next:n[t]},i[s]=e,a.push(s),s}var o={};(0,on.aD)([e],(function(e){}),(function(e){"read"===e.operation&&(o[e.path[1]]=s(e))}));var c=function(e){var t=(0,Ze.Z)(e);t.forEach((function(e){return e.terms.sort()})),t.sort((function(e,t){var n=e.terms,r=t.terms;if(n.length!==r.length)return n.length-r.length;for(var i=0;i<n.length;i++)if(n[i]!==r[i])return n[i]<r[i]?-1:1;return 0}));for(var n=function(e){var n,r,i=t[e].terms,a=t[e+1].terms;if(i.length!==a.length)return"continue";i.every((function(e,t){return e===a[t]}))&&(t[e].coeff=(null!==(n=t[e].coeff)&&void 0!==n?n:0)+(null!==(r=t[e+1].coeff)&&void 0!==r?r:0),t.splice(e+1,1))},r=t.length-2;r>=0;r--)n(r);return t}(function e(t){switch(t.operation){case"add":return vn.apply(void 0,(0,Ze.Z)(t.operands.map(e)));case"mul":return jn.apply(void 0,(0,Ze.Z)(t.operands.map(e)));case"const":return[{coeff:t.value,terms:[]}];default:return[{coeff:1,terms:[s(t)]}]}}(e));return function(e){var t=e.terms,n=e.nodes,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,a=Object.fromEntries(Object.entries(n).map((function(e){var t=(0,r.Z)(e,2);return[t[0],mn(t[1])]})));return{terms:t=t.filter((function(e){var t=e.terms.reduce((function(e,t){return Object.entries(a[t]).forEach((function(t){var n,i=(0,r.Z)(t,2),a=i[0],s=i[1];return e[a]=Math.max(s,null!==(n=e[a])&&void 0!==n?n:0)})),e}),{});return Object.values(t).reduce((function(e,t){return e+t}),0)<=i})),nodes:n}}({terms:c,nodes:i})}function gn(e){if(1===e.length)return e[0];var t=(e=e.flatMap((function(e){return"add"===e.operation?e.operands:e}))).reduce((function(e,t){return"const"===t.operation?e+t.value:e}),0);return 0===(e=e.filter((function(e){return"const"!==e.operation}))).length?(0,Ge.a9)(t):0===t?Ge.Sm.apply(void 0,(0,Ze.Z)(e)):Ge.Sm.apply(void 0,(0,Ze.Z)(e).concat([(0,Ge.a9)(t)]))}function yn(e){if(1===e.length)return e[0];var t=(e=e.flatMap((function(e){return"mul"===e.operation?e.operands:e}))).reduce((function(e,t){return"const"===t.operation?e*t.value:e}),1);return 0===(e=e.filter((function(e){return"const"!==e.operation}))).length?(0,Ge.a9)(t):1===t?Ge.WV.apply(void 0,(0,Ze.Z)(e)):Ge.WV.apply(void 0,(0,Ze.Z)(e).concat([(0,Ge.a9)(t)]))}function bn(e,t,n){Object.entries(e).filter((function(e){var n=(0,r.Z)(e,1)[0];return void 0!==t[n]})).forEach((function(e){var i=(0,r.Z)(e,2),a=i[0],s=i[1];return n[t[a]]=s}))}function wn(e,t){return e=(0,on.uW)(e,(function(e){return e}),(function(e){if("threshold"===e.operation){var n=(0,r.Z)(e.operands,4),i=n[0],a=n[1],s=n[2],o=n[3];if("read"===i.operation&&"const"===a.operation){var c=i.path[1];if(void 0!==t[c]){var l=t[c];if(2===a.value&&l.includes(2))return l.includes(4)?o:(0,Ge.ER)(i,4,s,o);if(4===a.value&&l.includes(4))return o}}return e}return e}))}var Cn=n(20323),kn=n(17278),Pn=n(9138),Sn=n(9274),_n=n(37762);function An(e,t,n,r,i,a){for(var s=a,o={pruneNodeRange:!0},c={pruneNodeRange:!0},l={reaffine:!0},u={pruneOrder:!0,pruneArtRange:!0,pruneNodeRange:!0},d=0;Object.values(s).some((function(e){return e}))&&d++<20;){if(s.pruneOrder){delete s.pruneOrder;var h=En(n,r,i);n!==h&&(n=h,s=(0,z.Z)((0,z.Z)({},s),o))}if(s.pruneArtRange){delete s.pruneArtRange;var f=Tn(e,n,t);n!==f&&(n=f,s=(0,z.Z)((0,z.Z)({},s),c))}if(s.pruneNodeRange){delete s.pruneNodeRange;var p=Dn(e,n);e!==p&&(e=p,s=(0,z.Z)((0,z.Z)({},s),l))}if(s.reaffine){delete s.reaffine;var x=On(e,n),m=x.nodes,v=x.arts;e===m&&n===v||(e=m,n=v,s=(0,z.Z)((0,z.Z)({},s),u))}}return{nodes:e,arts:n}}function On(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new Set,a=new Set;function s(e,t){t?i.add(e):e.operands.forEach((function(e){var t=e;i.has(t)&&a.add(t)}))}var o=new Set;if((0,on.aD)(e,(function(e){}),(function(e){var t=e.operation;switch(t){case"read":if("number"!==e.type||"dyn"!==e.path[0]||"add"!==e.accu)throw new Error("Found unsupported ".concat(t," node at path ").concat(e.path," when computing affine nodes"));o.add(e.path[1]),s(e,!0);break;case"add":s(e,e.operands.every((function(e){return i.has(e)})));break;case"mul":var n=e.operands.filter((function(e){return"const"!==e.operation}));s(e,0===n.length||1===n.length&&i.has(n[0]));break;case"const":if("string"===typeof e.value||void 0===e.value)throw new Error("Found constant ".concat(e.value," while compacting"));s(e,!0);break;case"res":case"threshold":case"sum_frac":case"max":case"min":s(e,!1);break;case"data":case"subscript":case"lookup":case"match":case"prio":case"small":throw new Error("Found unsupported ".concat(t," node when computing affine nodes"));default:(0,we.UT)(t)}})),(0,Ze.Z)(a).every((function(e){var t=e.operation;return"read"===t||"const"===t}))&&Object.keys(t.base).length===o.size)return{nodes:e,arts:t};var c=-1;function l(){for(;o.has("".concat(++c)););return"".concat(c)}e.forEach((function(e){return i.has(e)&&a.add(e)}));var u=(0,Ze.Z)(a).filter((function(e){return"const"!==e.operation})),d=new Map(u.map((function(e){return[e,n||"read"!==e.operation||"dyn"!==e.path[0]?(0,z.Z)((0,z.Z)({},(0,Ge.UF)(["dyn","".concat(l())])),{},{accu:"add"}):e]})));function h(e){var t=(0,sn.CG)((0,Ze.Z)(d.keys()),{dyn:(0,we.xh)(e,(function(e){return(0,Ge.a9)(e)}))},(function(e){return!0}));return Object.fromEntries((0,Ze.Z)(d.values()).map((function(e,n){return[e.path[1],t[n].value]})))}for(var f={nodes:e=(0,on.uW)(e,(function(e){var t;return null!==(t=d.get(e))&&void 0!==t?t:e}),(function(e){return e})),arts:{base:h(t.base),values:(0,we.O)(ee.eV,(function(e){return t.values[e].map((function(e){return{id:e.id,set:e.set,values:h(e.values)}}))}))}},p=Object.entries(h({})),x=0,m=Object.values(f.arts.values);x<m.length;x++){var v,j=m[x],Z=(0,_n.Z)(j);try{for(Z.s();!(v=Z.n()).done;){var g,y=v.value.values,b=(0,_n.Z)(p);try{for(b.s();!(g=b.n()).done;){var w=(0,r.Z)(g.value,2),C=w[0],k=w[1];y[C]-=k}}catch(P){b.e(P)}finally{b.f()}}}catch(P){Z.e(P)}finally{Z.f()}}return f}function En(e,t,n){var i,a=!1,s=!(null!==(i=n.rainbow)&&void 0!==i&&i.length),o=new Set(Object.entries(n).filter((function(e){var t=(0,r.Z)(e,2);t[0];return t[1].length})).map((function(e){return(0,r.Z)(e,1)[0]}))),c=new Set(Object.entries(n).filter((function(e){var t=(0,r.Z)(e,2),n=(t[0],t[1]);return n.includes(2)&&!n.includes(4)})).map((function(e){return(0,r.Z)(e,1)[0]}))),l=(0,we.O)(ee.eV,(function(n){var i=e.values[n],l=i.filter((function(e){var n=0;return i.every((function(i){var a=Object.entries(i.values).every((function(t){var n=(0,r.Z)(t,2),i=n[0];return n[1]>=e.values[i]})),l=Object.entries(i.values).some((function(t){var n=(0,r.Z)(t,2),i=n[0];return n[1]>e.values[i]}));return a&&(l||i.id>e.id)&&(s&&!o.has(i.set)&&!c.has(e.set)||e.set===i.set)&&n++,n<t}))}));return l.length!==i.length&&(a=!0),l}));return a?{base:e.base,values:l}:e}function Tn(e,t,n){for(var i=Object.fromEntries(Object.entries(t.base).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return[n,{min:i,max:i}]}))),a={arts:t},s=function(){var t=(0,we.O)(ee.eV,(function(e){return Mn(a.arts.values[e])})),r=(0,we.O)(ee.eV,(function(e){return Rn(Object.entries(t).map((function(t){return t[0]===e?i:t[1]})).filter((function(e){return e})))})),s=!1,o=(0,we.O)(ee.eV,(function(t){var i=a.arts.values[t].filter((function(i){var a=Rn([Mn([i]),r[t]]),s=In(e,a);return e.every((function(e,t){var r;return s.get(e).max>=(null!==(r=n[t])&&void 0!==r?r:-1/0)}))}));return i.length!==a.arts.values[t].length&&(s=!0),i}));if(!s)return"break";a.arts={base:a.arts.base,values:o}};;){if("break"===s())break}return a.arts}function Dn(e,t){var n=In(e,Rn([Object.fromEntries(Object.entries(t.base).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return[n,{min:i,max:i}]})))].concat((0,Ze.Z)(Object.values(t.values).map((function(e){return Mn(e)}))))));return(0,on.uW)(e,(function(e){var t=e.operation,i=e.operands.map((function(e){return n.get(e)}));switch(t){case"threshold":var a=(0,r.Z)(i,4),s=a[0],o=a[1],c=a[2],l=a[3];if(s.min>=o.max)return e.operands[2];if(s.max<o.min)return(0,Ge.a9)(0);if(c.max===c.min&&l.max===l.min&&c.min===l.min&&isFinite(c.min))return(0,Ge.a9)(c.max);break;case"min":var u=e.operands.filter((function(e,t){var n=i[t];return i.every((function(e,t){return n.min<=e.max}))}));if(u.length<i.length)return Ge.VV.apply(void 0,(0,Ze.Z)(u));break;case"max":var d=e.operands.filter((function(e,t){var n=i[t];return i.every((function(e){return n.max>=e.min}))}));if(d.length<i.length)return Ge.Fp.apply(void 0,(0,Ze.Z)(d))}return e}),(function(e){return e}))}function Rn(e){var t={};return e.forEach((function(e){Object.entries(e).forEach((function(e){var n=(0,r.Z)(e,2),i=n[0],a=n[1];t[i]?(t[i].min+=a.min,t[i].max+=a.max):t[i]=(0,z.Z)({},a)}))})),t}function Mn(e){var t={};return e.length&&(Object.keys(e[0].values).filter((function(t){return e.every((function(e){return e.values[t]}))})).forEach((function(n){return t[n]={min:e[0].values[n],max:e[0].values[n]}})),e.forEach((function(e){for(var n=e.values,i=0,a=Object.entries(n);i<a.length;i++){var s=(0,r.Z)(a[i],2),o=s[0],c=s[1];t[o]?(t[o].max<c&&(t[o].max=c),t[o].min>c&&(t[o].min=c)):t[o]={min:0,max:c}}}))),t}function In(e,t){var n=new Map;return(0,on.aD)(e,(function(e){}),(function(e){var i,a,s=e,o=s.operation,c=s.operands.map((function(e){return n.get(e)}));switch(o){case"read":if("dyn"!==s.path[0])throw new Error("Found non-dyn path ".concat(s.path," while computing range"));a=null!==(i=t[s.path[1]])&&void 0!==i?i:{min:0,max:0};break;case"const":a=Kn([s.value]);break;case"subscript":a=Kn(s.list);break;case"add":case"min":case"max":a={min:sn.aj[o](c.map((function(e){return e.min}))),max:sn.aj[o](c.map((function(e){return e.max})))};break;case"res":a={min:sn.aj[o]([c[0].max]),max:sn.aj[o]([c[0].min])};break;case"mul":a=c.reduce((function(e,t){return Kn([e.min*t.min,e.min*t.max,e.max*t.min,e.max*t.max])}));break;case"threshold":a=c[0].min>=c[1].max?c[2]:c[0].max<c[1].min?Kn([0]):Kn([0],[c[2]]);break;case"sum_frac":var l=(0,r.Z)(c,2),u=l[0],d=l[1],h={min:u.min+d.min,max:u.max+d.max};a=h.min<=0&&h.max>=0?u.min<=0&&u.max>=0?{min:NaN,max:NaN}:{min:-1/0,max:1/0}:Kn([u.min/h.min,u.min/h.max,u.max/h.min,u.max/h.max]);break;case"data":case"lookup":case"match":throw new Error("Unsupported ".concat(o," node"));default:(0,we.UT)(o)}n.set(s,a)})),n}function Kn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Math.max.apply(Math,(0,Ze.Z)(e).concat((0,Ze.Z)(t.map((function(e){return e.max}))))),r=Math.min.apply(Math,(0,Ze.Z)(e).concat((0,Ze.Z)(t.map((function(e){return e.min})))));return{min:r,max:n}}function Wn(e,t){return{base:e.base,values:(0,we.O)(ee.eV,(function(n){var r=t[n];switch(r.kind){case"id":return e.values[n].filter((function(e){return r.ids.has(e.id)}));case"exclude":return e.values[n].filter((function(e){return!r.sets.has(e.set)}));case"required":return e.values[n].filter((function(e){return r.sets.has(e.set)}))}}))}}function zn(e,t){return e.flatMap((function(e){return e})).sort((function(e,t){return t.value-e.value})).slice(0,t)}function $n(e){for(var t=.01,n=new Set(e.flatMap((function(e){return Object.values(e).map((function(e){return Math.round(e.plot/t)}))})));n.size>1500;)t*=2,n=new Set((0,Ze.Z)(n).map((function(e){return Math.round(e/2)})));var r,i={},a=(0,_n.Z)(e);try{for(a.s();!(r=a.n()).done;)for(var s=r.value,o=0,c=Object.values(s);o<c.length;o++){var l=c[o],u=Math.round(l.plot/t)*t;(!i[u]||i[u].value<l.value)&&(i[u]=l)}}catch(d){a.e(d)}finally{a.f()}return i}function qn(e){return ee.eV.reduce((function(t,n){return t*e.values[n].length}),1)}var Nn,Ln,Hn,Vn,Fn,Gn,Bn,Un,Jn,Xn,Yn,Qn,er,tr,nr,rr,ir=(0,we.O)(ee.eV,(function(e){return{kind:"exclude",sets:new Set}})),ar=n(16614),sr=n(76899),or=n(55221),cr=n(66624),lr=n(18327);function ur(e){var t,n,i=e.disabled,a=(0,_.$)(["page_character","sheet"]).t,s=(0,S.useContext)(X.R),o=(0,S.useContext)(Je.t).database,c=s.character,l=c.key,d=c.conditional,p=s.characterDispatch,m=(0,Sn.ZP)(l),v=m.buildSetting.artSetExclusion,Z=m.buildSettingDispatch,g=(0,S.useState)(!1),y=(0,r.Z)(g,2),b=y[0],C=y[1],k=(0,S.useCallback)((function(){return C(!0)}),[C]),P=(0,S.useCallback)((function(){return C(!1)}),[C]),A=(0,Te.Z)(ye.y.getAll,[]),O=(0,S.useMemo)((function(){return A?Object.entries(ye.y.setKeysByRarities(A)).reverse().flatMap((function(e){return(0,r.Z)(e,2)[1]})).filter((function(e){return!e.includes("Prayers")})):[]}),[A]),D=(0,et.Z)(),R=(0,r.Z)(D,2),K=R[0],W=R[1];(0,S.useEffect)((function(){return o.followAnyArt(W)}),[o,W]);var N=(0,S.useMemo)((function(){var e=Object.fromEntries(O.map((function(e){return[e,Object.fromEntries(ee.eV.map((function(e){return[e,0]})))]})));return o._getArts().map((function(t){return e[t.setKey]&&e[t.setKey][t.slotKey]++})),K&&e}),[K,o,O]),L=!(null!==(t=v.rainbow)&&void 0!==t&&t.includes(2)),V=!(null!==(n=v.rainbow)&&void 0!==n&&n.includes(4)),F=(0,S.useMemo)((function(){return{allow2:O.filter((function(e){var t;return!(null!==(t=v[e])&&void 0!==t&&t.includes(2))})).length,allow4:O.filter((function(e){var t;return!(null!==(t=v[e])&&void 0!==t&&t.includes(4))})).length,exclude2:O.filter((function(e){var t;return null===(t=v[e])||void 0===t?void 0:t.includes(2)})).length,exclude4:O.filter((function(e){var t;return null===(t=v[e])||void 0===t?void 0:t.includes(4)})).length}}),[O,v]),B=F.allow2,U=F.allow4,J=F.exclude2,Y=F.exclude4,Q=(0,S.useMemo)((function(){return Object.keys(d).filter((function(e){return ee.q2.includes(e)&&0!==Object.keys(d[e]).length})).length}),[d]),te=(0,S.useMemo)((function(){return e=s,(0,z.Z)((0,z.Z)({},e),{},{data:new lr.w((0,z.Z)((0,z.Z)({},e.data.data[0]),{},{artSet:(0,we.O)(ee.q2,(function(e){return(0,Ge.a9)(4)}))}),void 0)});var e}),[s]),ne=(0,S.useCallback)((function(){var e=Object.fromEntries(Object.entries(d).filter((function(e){var t=(0,r.Z)(e,2),n=t[0];t[1];return!ee.q2.includes(n)})));p({conditional:e})}),[d,p]),re=(0,S.useCallback)((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(0,we.I8)(v);O.forEach((function(r){var i;t?n[r]=[].concat((0,Ze.Z)(null!==(i=n[r])&&void 0!==i?i:[]),[e]):n[r]&&(n[r]=n[r].filter((function(t){return t!==e})))})),Z({artSetExclusion:n})}),[O,v,Z]);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(T.Z,{sx:{display:"flex"},children:[(0,G.jsxs)(h.Z,{sx:{flexGrow:1},children:[(0,G.jsx)(x.Z,{children:(0,G.jsx)("strong",{children:a(Nn||(Nn=(0,Me.Z)(["tabOptimize.artSetConfig.title"])))})}),(0,G.jsxs)(x.Z,{children:[a(Ln||(Ln=(0,Me.Z)(["tabOptimize.artSetConfig.setEffCond"])))," ",(0,G.jsxs)(le.Z,{color:Q?"success":"secondary",children:[Q," ",a("tabOptimize.artSetConfig.enabled")]})]}),(0,G.jsxs)(x.Z,{children:[a(Hn||(Hn=(0,Me.Z)(["sheet:2set"])))," ",(0,G.jsxs)(le.Z,{color:"success",children:[B," ",(0,G.jsx)(q.G,{icon:$.Stf,className:"fa-fw"})," ",a("tabOptimize.artSetConfig.allowed")]}),!!J&&" / ",!!J&&(0,G.jsxs)(le.Z,{color:"secondary",children:[J," ",(0,G.jsx)(q.G,{icon:$.gPx,className:"fa-fw"})," ",a("tabOptimize.artSetConfig.excluded")]})]}),(0,G.jsxs)(x.Z,{children:[a(Vn||(Vn=(0,Me.Z)(["sheet:4set"])))," ",(0,G.jsxs)(le.Z,{color:"success",children:[U," ",(0,G.jsx)(q.G,{icon:$.Stf,className:"fa-fw"})," ",a("tabOptimize.artSetConfig.allowed")]}),!!Y&&" / ",!!Y&&(0,G.jsxs)(le.Z,{color:"secondary",children:[Y," ",(0,G.jsx)(q.G,{icon:$.gPx,className:"fa-fw"})," ",a("tabOptimize.artSetConfig.excluded")]})]}),(0,G.jsxs)(x.Z,{children:[a(Fn||(Fn=(0,Me.Z)(["tabOptimize.artSetConfig.2rainbow"])))," ",(0,G.jsxs)(le.Z,{color:L?"success":"secondary",children:[(0,G.jsx)(q.G,{icon:L?$.Stf:$.gPx,className:"fa-fw"})," ",L?a("tabOptimize.artSetConfig.allowed"):"Excluded"]})]}),(0,G.jsxs)(x.Z,{children:[a(Gn||(Gn=(0,Me.Z)(["tabOptimize.artSetConfig.4rainbow"])))," ",(0,G.jsxs)(le.Z,{color:V?"success":"secondary",children:[(0,G.jsx)(q.G,{icon:V?$.Stf:$.gPx,className:"fa-fw"})," ",V?a("tabOptimize.artSetConfig.allowed"):"Excluded"]})]})]}),(0,G.jsx)(j.Z,{onClick:k,disabled:i,color:"info",sx:{borderRadius:0},children:(0,G.jsx)(ar.Z,{})})]}),A&&(0,G.jsx)(nt.Z,{open:b,onClose:P,children:(0,G.jsxs)(E.Z,{children:[(0,G.jsxs)(h.Z,{sx:{display:"flex",gap:1,justifyContent:"space-between"},children:[(0,G.jsx)(x.Z,{variant:"h6",children:a(Bn||(Bn=(0,Me.Z)(["tabOptimize.artSetConfig.title"])))}),(0,G.jsx)(M.Z,{onClick:P})]}),(0,G.jsx)(w.Z,{}),(0,G.jsxs)(h.Z,{children:[(0,G.jsx)(T.Z,{sx:{mb:1},children:(0,G.jsxs)(h.Z,{children:[(0,G.jsxs)(u.Z,{display:"flex",gap:1,children:[(0,G.jsx)(x.Z,{children:(0,G.jsx)("strong",{children:a(Un||(Un=(0,Me.Z)(["tabOptimize.artSetConfig.modal.setCond.title"])))})}),(0,G.jsx)(x.Z,{sx:{flexGrow:1},children:(0,G.jsxs)(le.Z,{color:Q?"success":"secondary",children:[Q," ",a("tabOptimize.artSetConfig.selected")]})}),(0,G.jsx)(j.Z,{size:"small",onClick:ne,color:"error",startIcon:(0,G.jsx)(H.Z,{}),children:a(Jn||(Jn=(0,Me.Z)(["tabOptimize.artSetConfig.modal.setCond.reset"])))})]}),(0,G.jsx)(x.Z,{children:a(Xn||(Xn=(0,Me.Z)(["tabOptimize.artSetConfig.modal.setCond.text"])))})]})}),(0,G.jsx)(T.Z,{sx:{mb:1},children:(0,G.jsxs)(h.Z,{children:[(0,G.jsx)(x.Z,{sx:{flexGrow:1},children:(0,G.jsx)("strong",{children:(0,G.jsxs)(sr.c,{t:a,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.title",children:["Artifact Sets ",(0,G.jsxs)(I.Z,{color:"success",children:["Allowed",(0,G.jsx)(q.G,{icon:$.Stf,className:"fa-fw"})]})," / ",(0,G.jsxs)(I.Z,{color:"secondary",variant:"light",children:["Excluded",(0,G.jsx)(q.G,{icon:$.gPx,className:"fa-fw"})]})]})})}),(0,G.jsx)(x.Z,{children:(0,G.jsxs)(sr.c,{t:a,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.intro",children:["You can allow/exclude which sets you want the builder to consider. In the following examples, ",(0,G.jsx)("strong",{children:"A"})," is on-set, and ",(0,G.jsx)("strong",{children:"R"})," is rainbow(off-set)"]})}),(0,G.jsx)(x.Z,{children:(0,G.jsxs)(sr.c,{t:a,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.2set",children:[(0,G.jsx)("strong",{children:(0,G.jsxs)(I.Z,{color:"secondary",variant:"light",children:["Excluding",(0,G.jsx)(q.G,{icon:$.gPx,className:"fa-fw"})," 2-Set"]})})," would exclude 2-Set builds: ",(0,G.jsxs)("strong",{children:[(0,G.jsx)(I.Z,{color:"secondary",variant:"light",children:"AA"}),"RRR"]})," and ",(0,G.jsxs)("strong",{children:[(0,G.jsx)(I.Z,{color:"secondary",variant:"light",children:"AAA"}),"RR"]}),"."]})}),(0,G.jsx)(x.Z,{children:(0,G.jsxs)(sr.c,{t:a,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.4set",children:[(0,G.jsx)("strong",{children:(0,G.jsxs)(I.Z,{color:"secondary",variant:"light",children:["Excluding",(0,G.jsx)(q.G,{icon:$.gPx,className:"fa-fw"})," 4-Set"]})})," would exclude 4-Set builds: ",(0,G.jsxs)("strong",{children:[(0,G.jsx)(I.Z,{color:"secondary",variant:"light",children:"AAAA"}),"R"]})," and ",(0,G.jsx)("strong",{children:(0,G.jsx)(I.Z,{color:"secondary",variant:"light",children:"AAAAA"})}),"."]})}),(0,G.jsx)(x.Z,{children:(0,G.jsxs)(sr.c,{t:a,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.2rain",children:[(0,G.jsx)("strong",{children:(0,G.jsxs)(I.Z,{color:"secondary",variant:"light",children:["Excluding",(0,G.jsx)(q.G,{icon:$.gPx,className:"fa-fw"})," 3-Rainbow"]})})," would exclude 2-Set + 3-Rainbow builds: ",(0,G.jsxs)("strong",{children:["AA",(0,G.jsx)(I.Z,{color:"secondary",variant:"light",children:"RRR"})]})," and ",(0,G.jsxs)("strong",{children:["AAA",(0,G.jsx)(I.Z,{color:"secondary",variant:"light",children:"RR"})]}),"."]})}),(0,G.jsx)(x.Z,{children:(0,G.jsxs)(sr.c,{t:a,i18nKey:"tabOptimize.artSetConfig.modal.ArtSetFilter.4rain",children:[(0,G.jsx)("strong",{children:(0,G.jsxs)(I.Z,{color:"secondary",variant:"light",children:["Excluding",(0,G.jsx)(q.G,{icon:$.gPx,className:"fa-fw"})," 5-Rainbow"]})})," would exclude full 5-Rainbow builds: ",(0,G.jsx)("strong",{children:(0,G.jsx)(I.Z,{color:"secondary",variant:"light",children:"RRRRR"})}),"."]})})]})}),(0,G.jsxs)(f.ZP,{container:!0,columns:{xs:2,lg:3},sx:{mb:1},spacing:1,children:[(0,G.jsx)(f.ZP,{item:!0,xs:1,children:(0,G.jsx)(dr,{setNum:2,numAllow:B,numExclude:J,setAllExclusion:re})}),(0,G.jsx)(f.ZP,{item:!0,xs:1,children:(0,G.jsx)(dr,{setNum:4,numAllow:U,numExclude:Y,setAllExclusion:re})}),(0,G.jsx)(f.ZP,{item:!0,xs:1,children:(0,G.jsx)(T.Z,{children:(0,G.jsxs)(h.Z,{children:[(0,G.jsx)(x.Z,{gutterBottom:!0,children:(0,G.jsx)("strong",{children:(0,G.jsxs)(sr.c,{t:a,i18nKey:"tabOptimize.artSetConfig.alExRainbow",children:[(0,G.jsxs)(I.Z,{color:"success",children:["Allow ",(0,G.jsx)(q.G,{icon:$.Stf,className:"fa-fw"})]})," / ",(0,G.jsxs)(I.Z,{color:"secondary",variant:"light",children:["Exclude ",(0,G.jsx)(q.G,{icon:$.gPx,className:"fa-fw"})]})," Rainbow Builds"]})})}),(0,G.jsxs)(u.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,G.jsx)(j.Z,{fullWidth:!0,onClick:function(){return Z({type:"artSetExclusion",setKey:"rainbow",num:2})},color:L?"success":"secondary",startIcon:L?(0,G.jsx)(Xt.Z,{}):(0,G.jsx)(Yt.Z,{}),endIcon:(0,G.jsx)(q.G,{icon:L?$.Stf:$.gPx,className:"fa-fw"}),children:a(Yn||(Yn=(0,Me.Z)(["tabOptimize.artSetConfig.2rainbow"])))}),(0,G.jsx)(j.Z,{fullWidth:!0,onClick:function(){return Z({type:"artSetExclusion",setKey:"rainbow",num:4})},color:V?"success":"secondary",startIcon:V?(0,G.jsx)(Xt.Z,{}):(0,G.jsx)(Yt.Z,{}),endIcon:(0,G.jsx)(q.G,{icon:V?$.Stf:$.gPx,className:"fa-fw"}),children:a(Qn||(Qn=(0,Me.Z)(["tabOptimize.artSetConfig.4rainbow"])))})]})]})})})]}),(0,G.jsx)(f.ZP,{container:!0,spacing:1,columns:{xs:2,lg:3},children:O.map((function(e){return(0,G.jsx)(hr,{setKey:e,sheet:A[e],fakeDataContextObj:te,slotCount:N[e]},e)}))})]}),(0,G.jsx)(w.Z,{}),(0,G.jsx)(h.Z,{sx:{py:1},children:(0,G.jsx)(M.Z,{large:!0,onClick:P})})]})})]})}function dr(e){var t=e.numAllow,n=e.numExclude,r=e.setNum,i=e.setAllExclusion,a=(0,_.$)(["page_character","sheet"]).t;return(0,G.jsx)(T.Z,{children:(0,G.jsxs)(h.Z,{children:[(0,G.jsxs)(x.Z,{gutterBottom:!0,children:[(0,G.jsx)("strong",{children:a("sheet:".concat(r,"set"))})," ",(0,G.jsxs)(le.Z,{color:"success",children:[t," ",(0,G.jsx)(q.G,{icon:$.Stf,className:"fa-fw"})," ",a("tabOptimize.artSetConfig.allowed")]}),!!n&&" / ",!!n&&(0,G.jsxs)(le.Z,{color:"secondary",children:[n," ",(0,G.jsx)(q.G,{icon:$.gPx,className:"fa-fw"})," ",a("tabOptimize.artSetConfig.excluded")]})]}),(0,G.jsxs)(u.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,G.jsx)(j.Z,{fullWidth:!0,disabled:!n,onClick:function(){return i(r,!1)},color:"success",startIcon:(0,G.jsx)(q.G,{icon:$.Stf,className:"fa-fw"}),children:a("tabOptimize.artSetConfig.allowAll".concat(r,"set"))}),(0,G.jsx)(j.Z,{fullWidth:!0,disabled:!t,onClick:function(){return i(r,!0)},color:"secondary",startIcon:(0,G.jsx)(q.G,{icon:$.gPx,className:"fa-fw"}),children:a("tabOptimize.artSetConfig.excludeAll".concat(r,"set"))})]})]})})}function hr(e){var t,n,i,a=e.sheet,s=e.setKey,o=e.fakeDataContextObj,c=e.slotCount,l=(0,_.$)("sheet").t,d=(0,S.useContext)(X.R).character.key,p=(0,Sn.ZP)(d),m=p.buildSetting,v=p.buildSettingDispatch,g=null!==(t=null===m||void 0===m||null===(n=m.artSetExclusion)||void 0===n?void 0:n[s])&&void 0!==t?t:[],y=!g.includes(4),b=(0,S.useMemo)((function(){return Object.values(c).reduce((function(e,t){return e+(t?1:0)}),0)}),[c]),w=(0,S.useMemo)((function(){return y?Object.keys(a.setEffects).filter((function(e){var t;return null===(t=a.setEffects[e])||void 0===t?void 0:t.document.some((function(e){return"states"in e}))})):[]}),[a.setEffects,y]),C=g.includes(2),k=g.includes(4);return b<2?null:(0,G.jsx)(f.ZP,{item:!0,xs:1,children:(0,G.jsxs)(T.Z,{sx:{height:"100%"},children:[(0,G.jsxs)(u.Z,{className:"grad-".concat(a.rarity[0],"star"),width:"100%",sx:{display:"flex"},children:[(0,G.jsx)(u.Z,{component:"img",src:a.defIconSrc,sx:{height:100,width:"auto"}}),(0,G.jsxs)(u.Z,{sx:{flexGrow:1,px:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[(0,G.jsx)(x.Z,{variant:"h6",children:null!==(i=a.name)&&void 0!==i?i:""}),(0,G.jsxs)(u.Z,{display:"flex",gap:1,children:[(0,G.jsx)(x.Z,{variant:"subtitle1",children:a.rarity.map((function(e,t){return(0,G.jsxs)("span",{children:[e," ",(0,G.jsx)($t.t,{stars:1})," ",t<a.rarity.length-1?"/ ":null]},e)}))}),(0,G.jsx)(or.Z,{title:(0,G.jsxs)(u.Z,{children:[(0,G.jsx)(x.Z,{children:(0,G.jsx)(le.Z,{color:"success",children:l(er||(er=(0,Me.Z)(["2set"])))})}),(0,G.jsx)(x.Z,{children:(0,G.jsx)(cr.v,{ns:"artifact_".concat(s,"_gen"),key18:"setEffects.2"})}),(0,G.jsxs)(u.Z,{paddingTop:1,sx:{opacity:g.includes(4)?.6:1},children:[(0,G.jsx)(x.Z,{children:(0,G.jsx)(le.Z,{color:"success",children:l(tr||(tr=(0,Me.Z)(["4set"])))})}),(0,G.jsx)(x.Z,{children:(0,G.jsx)(cr.v,{ns:"artifact_".concat(s,"_gen"),key18:"setEffects.4"})})]})]})})]}),(0,G.jsx)(u.Z,{sx:{display:"flex",gap:1},children:Object.entries(c).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,G.jsx)(x.Z,{sx:{flexGrow:1},variant:"subtitle1",children:(0,G.jsxs)(le.Z,{sx:{width:"100%"},color:i?"primary":"secondary",children:[(0,Ne.Ir)(n)," ",i]})},n)}))})]})]}),(0,G.jsxs)(Z.Z,{sx:{".MuiButton-root":{borderRadius:0}},fullWidth:!0,children:[b>=2&&(0,G.jsx)(j.Z,{startIcon:C?(0,G.jsx)(Yt.Z,{}):(0,G.jsx)(Xt.Z,{}),onClick:function(){return v({type:"artSetExclusion",setKey:s,num:2})},color:C?"secondary":"success",endIcon:(0,G.jsx)(q.G,{icon:C?$.gPx:$.Stf,className:"fa-fw"}),children:l(nr||(nr=(0,Me.Z)(["2set"])))}),b>=4&&(0,G.jsx)(j.Z,{startIcon:k?(0,G.jsx)(Yt.Z,{}):(0,G.jsx)(Xt.Z,{}),onClick:function(){return v({type:"artSetExclusion",setKey:s,num:4})},color:k?"secondary":"success",endIcon:(0,G.jsx)(q.G,{icon:k?$.gPx:$.Stf,className:"fa-fw"}),children:l(rr||(rr=(0,Me.Z)(["4set"])))})]}),!!w.length&&(0,G.jsx)(X.R.Provider,{value:o,children:(0,G.jsx)(h.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:w.map((function(e){return(0,G.jsx)(qe,{setKey:s,setNumKey:parseInt(e),hideHeader:!0,conditionalsOnly:!0},e)}))})})]})},s)}var fr=[0,4,8,12,16,20];function pr(e){var t=e.mainStatAssumptionLevel,n=void 0===t?0:t,r=e.setmainStatAssumptionLevel,i=e.disabled,a=(0,_.$)("page_character").t;return(0,G.jsx)(W.Z,{fullWidth:!0,color:n?"success":"primary",disabled:i,title:n?a("tabOptimize.assumptionLvl.lvl",{lvl:n}):a("tabOptimize.assumptionLvl.no"),children:fr.map((function(e){return(0,G.jsx)(g.Z,{onClick:function(){return r(e)},children:e?a("tabOptimize.assumptionLvl.lvl",{lvl:e}):a("tabOptimize.assumptionLvl.no")},e)}))})}function xr(){var e=(0,S.useContext)(X.R),t=e.data,n=e.character,r=Object.keys(null===n||void 0===n?void 0:n.bonusStats);if(!r.length)return null;var i=r.map((function(e){return t.get(Y.ri.customBonus[e])}));return(0,G.jsxs)(T.Z,{children:[(0,G.jsx)(h.Z,{sx:{py:1},children:(0,G.jsx)(x.Z,{children:"Bonus Stats"})}),(0,G.jsx)(w.Z,{}),(0,G.jsx)(h.Z,{children:i.map((function(e){return(0,G.jsx)(Fe.JW,{node:e},e.info.key)}))})]})}var mr=n(57482),vr=n(52771),jr=(0,V.ZP)("strong")({fontFamily:"monospace"}),Zr=(0,V.ZP)(mr.Z)((function(e){e.theme;return{height:10,borderRadius:5}}));function gr(e){var t=e.status,n=t.type,r=t.tested,i=(t.failed,t.skipped),a=t.total,s=t.startTime,o=t.finishTime,c=e.characterName,l=isFinite(a),u="inactive"!==n,d=a-i,h=(0,G.jsx)(jr,{children:r.toLocaleString()}),p=(0,G.jsx)(jr,{children:d.toLocaleString()}),m=!!i&&(0,G.jsxs)("span",{children:["(",(0,G.jsx)("b",{children:(0,G.jsx)(jr,{children:i.toLocaleString()})})," skipped)"]}),v=(0,G.jsx)(jr,{children:(0,vr.e6)(Math.round((null!==o&&void 0!==o?o:performance.now())-(null!==s&&void 0!==s?s:NaN)))}),j="",Z="",g=void 0;if(u)g=100*(i+r)/(i+d),j=(0,G.jsxs)(x.Z,{children:["Generating and testing ",h,l?(0,G.jsxs)(G.Fragment,{children:["/",p]}):void 0," build configurations against the criteria for ",(0,G.jsx)("b",{children:c}),". ",m]}),Z=(0,G.jsxs)(x.Z,{children:["Time elapsed: ",v]});else{if(!(r+i))return null;g=100,j=(0,G.jsxs)(x.Z,{children:["Generated and tested ",h," Build configurations against the criteria for ",(0,G.jsx)("b",{children:c}),". ",m]}),Z=(0,G.jsxs)(x.Z,{children:["Total duration: ",v]})}return(0,G.jsxs)(Qt.Z,{severity:"success",variant:"filled",sx:{"& .MuiAlert-message":{flexGrow:1}},children:[j,Z,void 0!==g&&(0,G.jsxs)(f.ZP,{container:!0,spacing:1,alignItems:"center",children:[l&&(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(x.Z,{children:"".concat(g.toFixed(1),"%")})}),(0,G.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,G.jsx)(Zr,{variant:l?"determinate":"indeterminate",value:g,color:"primary"})})]})]})}var yr=n(94294),br=n(72456),wr=n(19913),Cr=n(39783),kr=n(82839),Pr=n(90466),Sr=n(12891),_r=n(42633),Ar=n(27281),Or=n(64694),Er=n(62066);function Tr(e){var t=e.chartData,n=e.plotBase,i=e.setPlotBase,a=e.disabled,s=void 0!==a&&a,o=(0,S.useState)(!1),c=(0,r.Z)(o,2),l=c[0],u=c[1],d=(0,S.useState)(!0),p=(0,r.Z)(d,2),m=p[0],v=p[1],Z=(0,S.useContext)(X.R).data,b=["atk","hp","def","eleMas","critRate_","critDMG_","heal_","enerRech_"];"catalyst"!==Z.get(Y.ri.weaponType).value&&b.push("physical_dmg_"),b.push("".concat(Z.get(Y.ri.charEle).value,"_dmg_"));var C=(0,S.useMemo)((function(){var e,n;if(!t)return{displayData:null,downloadData:null};var r,i=t.data.map((function(e){var t=e.value;return{x:e.plot,y:t}})).sort((function(e,t){return e.x-t.x})),a=[],s=(0,_n.Z)(i);try{for(s.s();!(r=s.n()).done;){for(var o=r.value,c=void 0;c=a.pop();)if(c.y>o.y){a.push(c);break}a.push(o)}}catch(u){s.e(u)}finally{s.f()}(null===(e=a[0])||void 0===e?void 0:e.x)!==(null===(n=i[0])||void 0===n?void 0:n.x)&&(i[0].min=a[0].y),a.forEach((function(e){e.min=e.y}));var l={minimum:a.map((function(e){return[e.x,e.y]})),allData:i.map((function(e){return[e.x,e.y]}))};return{displayData:i,downloadData:l}}),[t]),k=C.displayData,P=C.downloadData;return(0,G.jsxs)(T.Z,{children:[(0,G.jsx)(h.Z,{children:(0,G.jsxs)(f.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(x.Z,{variant:"h6",children:"Optimization Target vs"})}),(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsxs)(W.Z,{title:n?Q.ZP.get(n):"Not Selected",color:n?"success":"primary",disabled:s,children:[(0,G.jsx)(g.Z,{onClick:function(){i("")},children:"Unselect"}),(0,G.jsx)(w.Z,{}),b.map((function(e){return(0,G.jsx)(g.Z,{onClick:function(){i(e)},children:Q.ZP.get(e)},e)}))]})}),(0,G.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,G.jsx)(We.Z,{placement:"top",title:"Using data from the builder, this will generate a graph to visualize Optimization Target vs. a selected stat. The graph will show the maximum Optimization Target value per 0.01 of the selected stat.",children:(0,G.jsx)(yr.Z,{})})}),!!P&&(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(j.Z,{startIcon:m?(0,G.jsx)(Xt.Z,{}):(0,G.jsx)(Yt.Z,{}),color:m?"success":"secondary",onClick:function(){return v(!m)},children:"Show Min Stat Threshold"})}),!!P&&(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(j.Z,{color:"info",startIcon:(0,G.jsx)(br.Z,{}),onClick:function(){return u(!l)},children:"Download Data"})})]})}),!!k&&(0,G.jsx)(w.Z,{}),t&&!!k&&(0,G.jsxs)(h.Z,{children:[(0,G.jsx)(y.Z,{in:!!P&&l,children:(0,G.jsx)(E.Z,{sx:{mb:2},children:(0,G.jsxs)(h.Z,{children:[(0,G.jsx)(x.Z,{children:"Min Data"}),(0,G.jsx)(Rr,{data:null===P||void 0===P?void 0:P.minimum}),(0,G.jsx)(x.Z,{children:"All Data"}),(0,G.jsx)(Rr,{data:null===P||void 0===P?void 0:P.allData})]})})}),(0,G.jsx)(Mr,{displayData:k,plotNode:t.plotNode,valueNode:t.valueNode,showMin:m})]})]})}var Dr=(0,V.ZP)("textarea")({width:"100%",fontFamily:"monospace",resize:"vertical",minHeight:"5em"});function Rr(e){var t=e.data;return(0,G.jsx)(Dr,{readOnly:!0,value:JSON.stringify(t),onClick:function(e){var t=e.target;t.selectionStart=0,t.selectionEnd=t.value.length}})}function Mr(e){var t,n,r=e.displayData,i=e.plotNode,a=e.valueNode,s=e.showMin,o=Q.ZP.unit(null===(t=i.info)||void 0===t?void 0:t.key),c=Q.ZP.unit(null===(n=a.info)||void 0===n?void 0:n.key);return(0,G.jsx)(wr.h,{width:"100%",height:600,children:(0,G.jsxs)(Cr.c,{data:r,children:[(0,G.jsx)(kr.q,{strokeDasharray:"3 3"}),(0,G.jsx)(Pr.K,{dataKey:"x",scale:"linear",unit:o,domain:["auto","auto"],tick:{fill:"white"},type:"number",tickFormatter:function(e){return e>1e4?e.toFixed():e.toFixed(1)}}),(0,G.jsx)(Sr.B,{name:"DMG",domain:["auto","auto"],unit:c,allowDecimals:!1,tick:{fill:"white"},type:"number"}),(0,G.jsx)(_r.d,{dataKey:"y",range:[3,25]}),(0,G.jsx)(Ar.D,{}),(0,G.jsx)(Or.b,{name:"Optimization Target",dataKey:"y",fill:"#8884d8",line:!0,lineType:"fitting",isAnimationActive:!1}),s&&(0,G.jsx)(Er.x,{name:"Minimum Stat Requirement Threshold",dataKey:"min",stroke:"#ff7300",type:"stepBefore",connectNulls:!0,strokeWidth:2,isAnimationActive:!1})]})})}var Ir=["sands","goblet","circlet"];function Kr(e){var t=e.disabled,n=void 0!==t&&t,r=(0,_.$)("artifact").t,i=(0,S.useContext)(X.R).character.key,a=(0,Sn.ZP)(i),s=a.buildSetting.mainStatKeys,o=a.buildSettingDispatch;return(0,G.jsx)(Ve.Z,{display:"flex",flexDirection:"column",gap:1,children:Ir.map((function(e){var t=s[e].length;return(0,G.jsxs)(Ve.Z,{children:[(0,G.jsx)(w.Z,{}),(0,G.jsxs)(h.Z,{sx:{pt:1},children:[(0,G.jsxs)(Ve.Z,{sx:{display:"flex",gap:1,alignItems:"center",pb:1},children:[(0,G.jsx)(xt.Z,{placement:"top",title:(0,G.jsx)(x.Z,{children:r("slotName.".concat(e))}),children:(0,G.jsx)("span",{children:(0,Ne.Ir)(e)})}),(0,G.jsx)(Ve.Z,{flexGrow:1,children:(0,G.jsx)(le.Z,{color:"info",children:t?"".concat(t," Selected"):"Any"})}),(0,G.jsx)(j.Z,{color:"error",size:"small",disabled:!s[e].length||n,sx:{mt:-1,mb:-1},onClick:function(){return o({type:"mainStatKey",slotKey:e})},children:(0,G.jsx)(H.Z,{})})]}),(0,G.jsx)(f.ZP,{container:!0,spacing:1,children:ft.Z.slotMainStats(e).map((function(t,r){var i=ee.Kj.find((function(e){return t.includes(e)})),a=s[e].includes(t)?null!==i&&void 0!==i?i:"success":"secondary";return(0,G.jsx)(f.ZP,{item:!0,flexGrow:1,xs:r<3?4:void 0,children:(0,G.jsx)(xt.Z,{placement:"top",title:(0,G.jsx)(x.Z,{children:(0,G.jsx)("strong",{children:Q.ZP.getArtStr(t)})}),disableInteractive:!0,children:(0,G.jsx)(j.Z,{fullWidth:!0,size:"small",color:a,sx:{fontSize:"1.2em",height:"100%",pointerEvents:n?"none":void 0,cursor:n?"none":void 0},onClick:function(){return o({type:"mainStatKey",slotKey:e,mainStatKey:t})},children:i?ne.h[i]:ne.Z[t]})})},t)}))})]})]},e)}))})}var Wr=n(25028),zr=(0,V.ZP)(j.Z)({color:"black",backgroundColor:"white","&:hover":{backgroundColor:"#e1e1e1"}});function $r(e){var t=e.optimizationTarget,n=e.setTarget,i=e.disabled,a=void 0!==i&&i,s=(0,S.useState)(!1),o=(0,r.Z)(s,2),c=o[0],l=o[1],u=(0,S.useCallback)((function(){return!a&&l(!0)}),[l,a]),d=(0,S.useCallback)((function(){return l(!1)}),[l]),f=(0,S.useCallback)((function(e){d(),n(e)}),[d,n]),p=Ae((0,S.useContext)(X.R).data);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(zr,{onClick:u,disabled:a,children:(0,G.jsx)(Lr,{optimizationTarget:t})}),(0,G.jsx)(nt.Z,{open:c,onClose:d,children:(0,G.jsx)(E.Z,{children:(0,G.jsx)(h.Z,{children:(0,G.jsx)(Le.ZP,{columns:{xs:1,sm:2,md:3},spacing:1,children:p.map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,G.jsx)(qr,{displayNs:i,sectionKey:n,setTarget:f},n)}))})})})})]})}function qr(e){var t=e.displayNs,n=e.sectionKey,i=e.setTarget,a=(0,S.useContext)(X.R).data,s=(0,Te.Z)(Se(a,n),[a,n]);return(0,G.jsxs)(T.Z,{children:[s&&(0,G.jsx)(b.Z,{avatar:s.icon&&(0,G.jsx)(xe.Z,{size:2,sx:{m:-1},src:s.icon}),title:s.title,action:s.action,titleTypographyProps:{variant:"subtitle1"}}),(0,G.jsx)(w.Z,{}),(0,G.jsx)(Wr.Z,{children:Object.entries(t).map((function(e){var t=(0,r.Z)(e,2),a=t[0],s=t[1];return(0,G.jsx)(Hr,{node:s,onClick:function(){return i([n,a])}},a)}))})]},n)}function Nr(){return(0,G.jsx)("b",{children:"Select an Optimization Target"})}function Lr(e){var t=e.optimizationTarget,n=(0,S.useContext)(X.R).data,r=(0,Te.Z)(t&&Se(n,t[0]),[n,t]);if(!t||!r)return(0,G.jsx)(Nr,{});var i=(0,we.Hm)(n.getDisplay(),t);return i?(0,G.jsxs)("b",{children:[r.title," : ",(0,G.jsx)(I.Z,{color:i.info.variant,children:Q.ZP.get(i.info.key)})]}):(0,G.jsx)(Nr,{})}function Hr(e){var t=e.node,n=e.onClick;return t.isEmpty?null:(0,G.jsx)(g.Z,{onClick:n,style:{overflow:"hidden",textOverflow:"ellipsis"},children:(0,G.jsx)(I.Z,{color:t.info.variant,children:Q.ZP.get(t.info.key)})})}var Vr=n(89841),Fr=n(70558),Gr=n(1235),Br=n(68125),Ur=n(68087),Jr=n(52991),Xr=n(84684),Yr=n(77208),Qr=n(13434),ei=navigator.hardwareConcurrency||4;function ti(){return{equipmentPriority:[],threads:ei}}function ni(){return(0,kn.Z)("TabOptimize",ti)}function ri(e){var t=e.disabled,n=void 0!==t&&t,i=(0,_.$)("page_character").t,a=(0,S.useContext)(X.R).character.key,s=(0,Sn.ZP)(a),o=s.buildSetting.useEquippedArts,c=s.buildSettingDispatch,l=(0,S.useContext)(Je.t).database,d=Qe(!1),p=(0,r.Z)(d,3),m=p[0],v=p[1],g=p[2],y=ni(),b=(0,r.Z)(y,2),C=b[0].equipmentPriority,k=b[1],P=(0,S.useMemo)((function(){return(0,Ze.Z)(new Set(C)).filter((function(e){return l._getChar(e)}))}),[l,C]),A=(0,S.useCallback)((function(e){return k({equipmentPriority:e})}),[k]),O=(0,S.useCallback)((function(e,t){var n=(0,Ze.Z)(P),r=n[e];n.splice(e,1),n.splice(t,0,r),A(n)}),[P,A]),D=(0,S.useCallback)((function(e){var t=(0,Ze.Z)(P);t.splice(e,1),A(t)}),[P,A]),R=(0,S.useCallback)((function(e){return A([].concat((0,Ze.Z)(P),[e]))}),[P,A]),I=(0,S.useCallback)((function(){return A([])}),[A]),K=(0,S.useMemo)((function(){var e=P.length,t=P.indexOf(a);return t>=0&&(e=t),e}),[a,P]),W=(0,S.useMemo)((function(){return l._getCharKeys().length-1-K}),[K,l]),z=(0,S.useMemo)((function(){return l._getCharKeys().length-P.length}),[P,l]);return(0,G.jsxs)(u.Z,{display:"flex",gap:1,children:[(0,G.jsx)(nt.Z,{open:m,onClose:g,containerProps:{maxWidth:"sm"},children:(0,G.jsxs)(E.Z,{children:[(0,G.jsx)(h.Z,{children:(0,G.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,G.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,G.jsx)(x.Z,{variant:"h6",children:(0,G.jsx)(sr.c,{t:i,i18nKey:"tabOptimize.useEquipped.modal.title",children:"Character Priority for Equipped Artifacts"})})}),(0,G.jsx)(f.ZP,{item:!0,sx:{mb:-1},children:(0,G.jsx)(M.Z,{onClick:g})})]})}),(0,G.jsx)(w.Z,{}),(0,G.jsxs)(h.Z,{children:[(0,G.jsx)(T.Z,{sx:{mb:1},children:(0,G.jsxs)(h.Z,{children:[(0,G.jsx)(x.Z,{gutterBottom:!0,children:(0,G.jsx)(sr.c,{t:i,i18nKey:"tabOptimize.useEquipped.modal.desc1",children:"When generating a build, the Optimizer will only consider equipped artifacts from characters below the current character or those not on the list."})}),(0,G.jsx)(x.Z,{gutterBottom:!0,children:(0,G.jsx)(sr.c,{t:i,i18nKey:"tabOptimize.useEquipped.modal.desc2",children:"If the current character is not on the list, the Optimizer will only consider equipped artifacts from others characters that are not on the list."})})]})}),(0,G.jsxs)(u.Z,{display:"flex",flexDirection:"column",gap:2,children:[P.map((function(e,t){return(0,G.jsx)(ii,{characterKey:e,rank:t+1,maxRank:P.length,setRank:function(e){return e&&O(t,e-1)},onRemove:function(){return D(t)},numAbove:K},e)})),(0,G.jsxs)(u.Z,{sx:{display:"flex",gap:1},children:[(0,G.jsx)(ai,{onAdd:R,list:P}),(0,G.jsx)(j.Z,{color:"error",onClick:I,startIcon:(0,G.jsx)(H.Z,{}),children:(0,G.jsx)(sr.c,{t:i,i18nKey:"tabOptimize.useEquipped.modal.clearList",children:"Clear List"})})]}),!!W&&(0,G.jsx)(le.Z,{color:"success",children:(0,G.jsx)(x.Z,{children:(0,G.jsxs)(sr.c,{t:i,i18nKey:"tabOptimize.useEquipped.modal.usingNum",count:z,children:["Using artifacts from ",(0,G.jsx)("strong",{children:{count:z}})," unlisted characters"]})})})]})]})]})}),(0,G.jsxs)(Z.Z,{sx:{display:"flex",width:"100%"},children:[(0,G.jsx)(j.Z,{sx:{flexGrow:1},onClick:function(){return c({useEquippedArts:!o})},disabled:n,startIcon:o?(0,G.jsx)(Xt.Z,{}):(0,G.jsx)(Yt.Z,{}),color:o?"success":"secondary",children:(0,G.jsxs)(u.Z,{children:[(0,G.jsx)("span",{children:(0,G.jsx)(sr.c,{t:i,i18nKey:"tabOptimize.useEquipped.title",children:"Use Equipped Artifacts"})}),o&&(0,G.jsx)(le.Z,{children:(0,G.jsxs)(sr.c,{t:i,i18nKey:"tabOptimize.useEquipped.usingNum",count:W,children:["Using from ",(0,G.jsx)("strong",{children:{count:W}})," characters"]})})]})}),o&&(0,G.jsx)(j.Z,{sx:{flexShrink:1},color:"info",onClick:v,disabled:n,children:(0,G.jsx)(ar.Z,{})})]})]})}function ii(e){var t=e.characterKey,n=e.rank,i=e.maxRank,a=e.setRank,s=e.onRemove,o=e.numAbove,c=(0,_.$)("page_character").t,l=(0,S.useContext)(Je.t).database,d=(0,Qr.Z)(t),h=(0,Ee.Z)();if(!d)return null;var p=d.equippedWeapon,m=d.equippedArtifacts;return(0,G.jsxs)(T.Z,{sx:{p:1},children:[(0,G.jsxs)(u.Z,{sx:{pb:1,display:"flex",justifyContent:"space-between",gap:1},children:[(0,G.jsx)(le.Z,{color:"info",children:(0,G.jsxs)(x.Z,{children:["#",n]})}),(0,G.jsx)(le.Z,{sx:{flexGrow:1},color:o===n-1?"warning":n-1<o?"error":"success",children:(0,G.jsx)(x.Z,{children:o===n-1?(0,G.jsx)(sr.c,{t:c,i18nKey:"tabOptimize.useEquipped.modal.status.curr",children:"Current character"}):n-1<o?(0,G.jsx)(sr.c,{t:c,i18nKey:"tabOptimize.useEquipped.modal.status.dont",children:"Don't Use artifacts"}):(0,G.jsx)(sr.c,{t:c,i18nKey:"tabOptimize.useEquipped.modal.status.use",children:"Use artifacts"})})}),(0,G.jsx)(u.Z,{children:(0,G.jsxs)(Z.Z,{sx:{flexGrow:1},size:"small",children:[(0,G.jsx)(K.CC,{children:(0,G.jsx)(K.ZP,{onChange:a,value:n,inputProps:{min:1,max:i,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2}})}),(0,G.jsx)(j.Z,{disabled:1===n,onClick:function(){return a(1)},children:(0,G.jsx)(Vr.Z,{})}),(0,G.jsx)(j.Z,{disabled:1===n,onClick:function(){return a(n-1)},children:(0,G.jsx)(Fr.Z,{})}),(0,G.jsx)(j.Z,{disabled:n===i,onClick:function(){return a(n+1)},children:(0,G.jsx)(Gr.Z,{})}),(0,G.jsx)(j.Z,{disabled:n===i,onClick:function(){return a(i)},children:(0,G.jsx)(Br.Z,{})}),(0,G.jsx)(j.Z,{color:"error",onClick:s,children:(0,G.jsx)(st.Z,{})})]})})]}),(0,G.jsxs)(f.ZP,{container:!0,columns:7,spacing:1,children:[(0,G.jsx)(f.ZP,{item:!0,xs:1,children:(0,G.jsx)(Xr.Z,{characterKey:t,onClick:h})}),(0,G.jsx)(f.ZP,{item:!0,xs:1,children:(0,G.jsx)(Yr.Z,{weaponId:p})}),Object.entries(m).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,G.jsx)(f.ZP,{item:!0,xs:1,children:(0,G.jsx)(Jr.Z,{slotKey:n,artifactObj:l._getArt(i)})},n)}))]})]})}function ai(e){var t=e.onAdd,n=e.list,i=(0,_.$)("page_character").t,a=Qe(!1),s=(0,r.Z)(a,3),o=s[0],c=s[1],l=s[2],u=(0,S.useCallback)((function(e){return!!e&&!n.includes(e.key)}),[n]);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(D.w,{show:o,onHide:l,onSelect:t,filter:u}),(0,G.jsx)(j.Z,{fullWidth:!0,sx:{height:60},color:"info",onClick:c,startIcon:(0,G.jsx)(Ur.Z,{}),children:(0,G.jsx)(sr.c,{t:i,i18nKey:"tabOptimize.useEquipped.modal.add",children:"Add character to list"})})]})}function si(e){var t=e.disabled,n=void 0!==t&&t,r=e.artsDirty,i=(0,_.$)("page_character").t,a=(0,S.useContext)(X.R).character.key,s=(0,Sn.ZP)(a),o=s.buildSetting.useExcludedArts,c=s.buildSettingDispatch,l=(0,S.useContext)(Je.t).database,d=(0,S.useMemo)((function(){return r&&l._getArts().reduce((function(e,t){return e+(t.exclude?1:0)}),0)}),[l,r]);return(0,G.jsx)(j.Z,{fullWidth:!0,onClick:function(){return c({useExcludedArts:!o})},disabled:!d||n,startIcon:o?(0,G.jsx)(Xt.Z,{}):(0,G.jsx)(Yt.Z,{}),color:o?"success":"secondary",children:(0,G.jsxs)(u.Z,{children:[(0,G.jsx)("span",{children:(0,G.jsx)(sr.c,{t:i,i18nKey:"tabOptimize.useExcluded.title",count:d,children:"Use Excluded Artifacts"})}),o&&(0,G.jsx)(le.Z,{children:(0,G.jsxs)(sr.c,{t:i,i18nKey:"tabOptimize.useExcluded.usingNum",count:d,children:["Using ",(0,G.jsx)("strong",{children:{count:d}})," excluded artifacts"]})})]})})}var oi,ci=n(50765),li=(0,Ge.yY)((0,we.I8)({dyn:(0,z.Z)((0,z.Z)({},Y.qH.art),Y.qH.artSet)})),ui={art:(0,we.O)([].concat((0,Ze.Z)(ci.r),(0,Ze.Z)(ci._)),(function(e){return li.dyn[e]})),artSet:(0,we.xh)(Y.qH.artSet,(function(e,t){return li.dyn[t]}))};function di(e,t,n){var r,i={base:{},values:{flower:[],plume:[],goblet:[],circlet:[],sands:[]}},a=new Set,s=(0,_n.Z)(e);try{for(s.s();!(r=s.n()).done;){var o,c=r.value,l=ft.Z.mainStatValue(c.mainStatKey,c.rarity,Math.max(Math.min(t,4*c.rarity),c.level)),u={id:c.id,set:c.setKey,values:(0,z.Z)((o={},(0,cn.Z)(o,c.setKey,1),(0,cn.Z)(o,c.mainStatKey,c.mainStatKey.endsWith("_")?l/100:l),o),Object.fromEntries(c.substats.map((function(e){return[e.key,e.key.endsWith("_")?e.accurateValue/100:e.accurateValue]}))))};delete u.values[""],i.values[c.slotKey].push(u),Object.keys(u.values).forEach((function(e){return a.add(e)}))}}catch(f){s.e(f)}finally{s.f()}if(i.base=(0,we.O)((0,Ze.Z)(a),(function(e){return 0})),n)for(var d=0,h=Object.values(i.values);d<h.length;d++){h[d].push({id:"",values:{}})}return i}function hi(){var e,t,n,i=(0,_.$)("page_character").t,a=(0,S.useContext)(X.R),s=a.character,o=a.character.key,c=(0,kn.Z)("GlobalSettings",Cn.c),l=(0,r.Z)(c,1)[0].tcMode,d=(0,S.useContext)(Je.t).database,p=(0,S.useState)({type:"inactive",tested:0,failed:0,skipped:0,total:0}),m=(0,r.Z)(p,2),v=m[0],y=m[1],b="inactive"!==v.type,C=(0,S.useState)(void 0),k=(0,r.Z)(C,2),P=k[0],O=k[1],E=(0,et.Z)(),D=(0,r.Z)(E,2),R=D[0],M=D[1],I=ni(),K=(0,r.Z)(I,2),N=K[0],L=N.equipmentPriority,H=N.threads,V=void 0===H?ei:H,F=K[1],B=V>ei?ei:V,U=(0,S.useCallback)((function(e){return F({threads:e})}),[F]),J=(0,Oe.Z)(o),ee=(0,Ee.Z)(),te=null!==(e=null===s||void 0===s?void 0:s.compareData)&&void 0!==e&&e,ne=(0,S.useMemo)((function(){return!d._getArts().length}),[d]),re=(0,Sn.ZP)(o),ie=re.buildSetting,ae=re.buildSettingDispatch,oe=ie.plotBase,le=ie.optimizationTarget,ue=ie.mainStatAssumptionLevel,de=ie.allowPartial,he=ie.builds,xe=ie.buildDate,me=ie.maxBuildsToShow,ve=ie.levelLow,ye=ie.levelHigh,be=(0,De.Z)(o,ue),Ce=null!==(t=null===be||void 0===be?void 0:be[o])&&void 0!==t?t:{},ke=Ce.characterSheet,Pe=Ce.target,Se=(0,S.useMemo)((function(){return he.map((function(e){return e.map((function(e){return d._getArt(e)}))}))}),[he,d]);(0,S.useEffect)((function(){return d.followAnyArt(M)}),[M,d]);var _e=(0,S.useRef)((function(){}));(0,S.useEffect)((function(){return function(){return _e.current()}}),[]);var Ae=(0,S.useCallback)((0,ge.Z)((0,je.Z)().mark((function e(){var t,n,i,a,s,c,l,u,h,f,p,x,m,v,j,Z,g,b,w,C,k,P,S,_,A,E,T,D,R,M,I,K,W,$,q,N,H,V,F,G,U,J,X,ee,te,ne,re,se,oe,ce,le,ue,de,he,fe,pe,xe,me;return(0,je.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re=function(e){return{command:"share",sender:e}},ne=function(){var e=J.shift();if(e)return qn(Wn(E,e.filter))<=G?{command:"iterate",threshold:K.buildValues[x-1],subproblem:e}:{command:"split",threshold:K.buildValues[x-1],minCount:G,maxIter:F,subproblem:e}},te=function(){return{command:"split",minCount:G,maxIter:F,threshold:K.buildValues[x-1]}},i=ie.artSetExclusion,a=ie.plotBase,s=ie.statFilters,c=ie.mainStatKeys,l=ie.optimizationTarget,u=ie.mainStatAssumptionLevel,h=ie.useExcludedArts,f=ie.useEquippedArts,p=ie.allowPartial,x=ie.maxBuildsToShow,m=ie.levelLow,v=ie.levelHigh,o&&l){e.next=6;break}return e.abrupt("return");case 6:return j=[],f&&(Z=L.indexOf(o),j=Z<0?(0,Ze.Z)(L):L.slice(0,Z)),g=d._getArts().filter((function(e){if(e.level<m)return!1;if(e.level>v)return!1;var t=c[e.slotKey];return!(null!==t&&void 0!==t&&t.length&&!t.includes(e.mainStatKey))&&(e.location===o||!(e.exclude&&!h)&&(!(e.location&&!f)&&!(e.location&&f&&j.includes(e.location))))})),b=di(g,u,p),e.next=12,(0,De.V)(d,o,u,[]);case 12:if(w=e.sent){e.next=15;break}return e.abrupt("return");case 15:if(C=null===(t=(0,wt.Qo)(w.teamData,o)[o])||void 0===t?void 0:t.target.data[0]){e.next=18;break}return e.abrupt("return");case 18:if(Object.assign(C,(0,wt.b3)([C,ui])),k=(0,we.Hm)(null!==(n=C.display)&&void 0!==n?n:{},l)){e.next=22;break}return e.abrupt("return");case 22:for(P=k,S=Object.entries(s).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return n.endsWith("_")&&(i/=100),{value:Y.ri.total[n],minimum:i}})).filter((function(e){return e.value&&e.minimum>-1/0})),O(void 0),_=new Promise((function(e){return _e.current=e})),A=[].concat((0,Ze.Z)(S.map((function(e){return e.value}))),[k]),E=b,T=[].concat((0,Ze.Z)(S.map((function(e){return e.minimum}))),[-1/0]),D={tested:0,failed:0,skipped:0,total:NaN,startTime:performance.now()},a&&(A.push(Y.ri.total[a]),T.push(-1/0)),A=(0,sn.tL)(A,C,(function(e){return"dyn"!==(0,r.Z)(e.path,1)[0]})),R=An(A,T,E,x,i,{reaffine:!0,pruneArtRange:!0,pruneNodeRange:!0,pruneOrder:!0}),A=R.nodes,E=R.arts,A=xn(A=wn(A=(0,sn.tL)(A,C,(function(e){return"dyn"!==(0,r.Z)(e.path,1)[0]})),i)),M=pn(E,A),E=M.a,A=M.nodes,I=a?A.pop():void 0,k=A.pop(),K={buildValues:Array(x).fill(0).map((function(e){return-1/0})),finalizing:!1},W=(0,we.Uq)(Object.entries(i),(function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return"rainbow"===n?["uniqueKey",i.map((function(e){return e+1}))]:[n,i.flatMap((function(e){return 2===e?[2,3]:[4,5]}))]})),console.log({artSetExclFull:W}),$=A.map((function(e,t){return{value:e,min:T[t]}})).filter((function(e){return e.min>-1/0})),q=A.map((function(e,t){return{value:Zn(e),min:T[t]}})).filter((function(e){return e.min>-1/0})),N={cache:!1,optimizationTarget:Zn(k),constraints:q,artSetExclusion:W,filter:ir,depth:0},H={id:-1,ready:!0},V=[],F=10,G=2e3,U=4*B,J=[N],X=[],ee=new Set,D.total=Object.values(E.values).reduce((function(e,t){return e*t.length}),1),se=[],oe=function(e){var t=new tn;V.push(t);var n={command:"setup",id:e,arts:E,optimizationTarget:k,artSetExclusion:i,plotBase:I,maxBuilds:x,filters:$};t.postMessage(n,void 0);var r=void 0,a=new Promise((function(e){return r=e}));t.onmessage=function(){var e=(0,ge.Z)((0,je.Z)().mark((function e(n){var i,a,s,o,c,l,u;return(0,je.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.data,e.t0=i.command,e.next="interim"===e.t0?4:"split"===e.t0?9:"iterate"===e.t0?14:"finalize"===e.t0?16:"share"===e.t0?19:21;break;case 4:return D.tested+=i.tested,D.failed+=i.failed,D.skipped+=i.skipped,i.buildValues&&((a=K.buildValues).push.apply(a,(0,Ze.Z)(i.buildValues)),K.buildValues.sort((function(e,t){return t-e})).splice(x)),e.abrupt("break",22);case 9:return J.push.apply(J,(0,Ze.Z)(i.subproblems)),i.ready&&i.id===H.id&&(H.ready=!0),i.ready?ee.delete(i.id):ee.add(i.id),X.push({id:i.id,worker:t}),e.abrupt("break",22);case 14:return X.push({id:i.id,worker:t}),e.abrupt("break",22);case 16:return t.terminate(),r(i),e.abrupt("break",22);case 19:return i.subproblem?(s={command:"split",threshold:K.buildValues[x-1],minCount:G,maxIter:F,subproblem:i.subproblem},V[i.sender].postMessage(s)):X.push({id:i.sender,worker:V[i.sender]}),e.abrupt("break",22);case 21:console.log("DEBUG",i);case 22:if(!X.length){e.next=43;break}if(o=X.pop(),c=o.id,l=o.worker,u=void 0,K.finalizing?u={command:"finalize"}:J.length>=U?u=ne():ee.has(c)&&(u=te()),u||(u=ne()),H.id<0&&(H.id=c,H.ready=!1),!u){e.next=32;break}l.postMessage(u),e.next=41;break;case 32:if(H.ready){e.next=36;break}V[H.id].postMessage(re(c)),e.next=41;break;case 36:if(X.push({id:c,worker:l}),X.length!==B||0!==ee.size){e.next=40;break}return K.finalizing=!0,e.abrupt("continue",22);case 40:return e.abrupt("break",43);case 41:e.next=22;break;case 43:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_.then((function(){return t.terminate()})),se.push(a)},ce=0;ce<B;ce++)oe(ce);return le=setInterval((function(){return y((0,z.Z)({type:"active"},D))}),100),e.next=63,Promise.any([Promise.all(se),_]);case 63:ue=e.sent,clearInterval(le),_e.current=function(){},ue?(a&&(fe=$n(ue.map((function(e){return e.plotData}))),pe=Y.ri.total[a],xe=Object.values(fe),"%"===Q.ZP.unit(null===(de=P.info)||void 0===de?void 0:de.key)&&(xe=xe.map((function(e){return{value:100*e.value,plot:e.plot}}))),"%"===Q.ZP.unit(null===(he=pe.info)||void 0===he?void 0:he.key)&&(xe=xe.map((function(e){var t=e.value,n=e.plot;return{value:t,plot:100*(null!==n&&void 0!==n?n:0)}}))),O({valueNode:P,plotNode:pe,data:xe})),me=zn(ue.map((function(e){return e.builds})),x),ae({builds:me.map((function(e){return e.artifactIds})),buildDate:Date.now()})):(D.tested=0,D.failed=0,D.skipped=0,D.total=0),y((0,z.Z)((0,z.Z)({},D),{},{type:"inactive",finishTime:performance.now()}));case 68:case"end":return e.stop()}}),e)}))),[o,d,ae,B,ie,L]),Te=null!==(n=null===ke||void 0===ke?void 0:ke.name)&&void 0!==n?n:"Character Name",Re=(0,S.useCallback)((function(e){ae({plotBase:e}),O(void 0)}),[ae]),Ie=(0,S.useMemo)((function(){return Pe&&ke&&s&&be&&{data:Pe,characterSheet:ke,character:s,mainStatAssumptionLevel:ue,teamData:be,characterDispatch:J}}),[Pe,ke,s,be,J,ue]);return(0,G.jsxs)(u.Z,{display:"flex",flexDirection:"column",gap:1,children:[ne&&(0,G.jsxs)(Qt.Z,{severity:"warning",variant:"filled",children:[" Opps! It looks like you haven't added any artifacts to GO yet! You should go to the ",(0,G.jsx)(en.Z,{component:A.rU,to:"/artifact",children:"Artifacts"})," page and add some!"]}),Ie&&(0,G.jsxs)(X.R.Provider,{value:Ie,children:[(0,G.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,G.jsx)(f.ZP,{item:!0,xs:12,sm:6,lg:3,display:"flex",flexDirection:"column",gap:1,children:(0,G.jsx)(u.Z,{children:(0,G.jsx)(rn.Z,{characterKey:o,onClickTeammate:ee})})}),(0,G.jsxs)(f.ZP,{item:!0,xs:12,sm:6,lg:3,display:"flex",flexDirection:"column",gap:1,children:[(0,G.jsxs)(T.Z,{children:[(0,G.jsxs)(h.Z,{children:[(0,G.jsx)(x.Z,{gutterBottom:!0,children:"Main Stat"}),(0,G.jsx)(xt.Z,{placement:"top",title:(0,G.jsxs)(x.Z,{children:[(0,G.jsx)("strong",{children:"Level Assumption"})," changes mainstat value to be at least a specific level. Does not change substats."]}),children:(0,G.jsx)(u.Z,{children:(0,G.jsx)(pr,{mainStatAssumptionLevel:ue,setmainStatAssumptionLevel:function(e){return ae({mainStatAssumptionLevel:e})},disabled:b})})})]}),(0,G.jsx)(Kr,{disabled:b})]}),(0,G.jsx)(xr,{})]}),(0,G.jsxs)(f.ZP,{item:!0,xs:12,sm:6,lg:6,display:"flex",flexDirection:"column",gap:1,children:[(0,G.jsx)(ur,{disabled:b}),(0,G.jsx)(si,{disabled:b,artsDirty:R}),(0,G.jsx)(ri,{disabled:b}),(0,G.jsx)(j.Z,{fullWidth:!0,startIcon:de?(0,G.jsx)(Xt.Z,{}):(0,G.jsx)(Yt.Z,{}),color:de?"success":"secondary",onClick:function(){return ae({allowPartial:!de})},children:i(oi||(oi=(0,Me.Z)(["tabOptimize.allowPartial"])))}),(0,G.jsxs)(T.Z,{children:[(0,G.jsx)(h.Z,{sx:{py:1},children:"Artifact Level Filter"}),(0,G.jsx)(nn.Z,{levelLow:ve,levelHigh:ye,setLow:function(e){return ae({levelLow:e})},setHigh:function(e){return ae({levelHigh:e})},setBoth:function(e,t){return ae({levelLow:e,levelHigh:t})},disabled:b})]}),(0,G.jsx)(an.Z,{disabled:b})]})]}),(0,G.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,G.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,G.jsxs)(Z.Z,{children:[(0,G.jsx)(j.Z,{disabled:!o||b||!le||!(0,we.Hm)(null===Pe||void 0===Pe?void 0:Pe.getDisplay(),le),color:o?"success":"warning",onClick:Ae,startIcon:(0,G.jsx)(q.G,{icon:$.lTt}),children:"Generate Builds"}),(0,G.jsxs)(W.Z,{disabled:b||!o,title:(0,G.jsxs)("span",{children:[(0,G.jsx)("b",{children:me})," ",1===me?"Build":"Builds"]}),children:[(0,G.jsx)(g.Z,{children:(0,G.jsx)(x.Z,{variant:"caption",color:"info.main",children:"Decreasing the number of generated build will decrease build calculation time for large number of builds."})}),(0,G.jsx)(w.Z,{}),Pn.s.map((function(e){return(0,G.jsxs)(g.Z,{onClick:function(){return ae({maxBuildsToShow:e})},children:[e," ",1===e?"Build":"Builds"]},e)}))]}),(0,G.jsxs)(W.Z,{disabled:b||!o,title:(0,G.jsxs)("span",{children:[(0,G.jsx)("b",{children:B})," ",1===B?"Thread":"Threads"]}),children:[(0,G.jsx)(g.Z,{children:(0,G.jsx)(x.Z,{variant:"caption",color:"info.main",children:"Increasing the number of threads will speed up build time, but will use more CPU power."})}),(0,G.jsx)(w.Z,{}),(0,we.w6)(1,ei).reverse().map((function(e){return(0,G.jsxs)(g.Z,{onClick:function(){return U(e)},children:[e," ",1===e?"Thread":"Threads"]},e)}))]}),(0,G.jsx)(j.Z,{disabled:!b,color:"error",onClick:function(){return _e.current()},startIcon:(0,G.jsx)(st.Z,{}),children:"Cancel"})]})}),(0,G.jsxs)(f.ZP,{item:!0,children:[(0,G.jsx)("span",{children:"Optimization Target: "}),(0,G.jsx)($r,{optimizationTarget:le,setTarget:function(e){return ae({optimizationTarget:e})},disabled:!!b})]})]}),!!o&&(0,G.jsx)(gr,{status:v,characterName:Te,maxBuildsToShow:me}),l&&(0,G.jsx)(u.Z,{children:(0,G.jsx)(Tr,{disabled:b,chartData:P,plotBase:oe,setPlotBase:Re})}),(0,G.jsx)(T.Z,{children:(0,G.jsxs)(h.Z,{children:[(0,G.jsxs)(u.Z,{display:"flex",alignItems:"center",gap:1,mb:1,children:[(0,G.jsx)(x.Z,{sx:{flexGrow:1},children:he?(0,G.jsxs)("span",{children:["Showing ",(0,G.jsx)("strong",{children:he.length})," Builds generated for ",Te,". ",!!xe&&(0,G.jsxs)("span",{children:["Build generated on: ",(0,G.jsx)("strong",{children:new Date(xe).toLocaleString()})]})]}):(0,G.jsx)("span",{children:"Select a character to generate builds."})}),(0,G.jsx)(j.Z,{disabled:!he.length,color:"error",onClick:function(){return ae({builds:[],buildDate:0})},children:"Clear Builds"})]}),(0,G.jsxs)(f.ZP,{container:!0,display:"flex",spacing:1,children:[(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(pe,{size:"small"})}),(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(fe,{size:"small"})}),(0,G.jsx)(f.ZP,{item:!0,flexGrow:1}),(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsxs)(ce.Z,{exclusive:!0,value:te,onChange:function(e,t){return J({compareData:t})},size:"small",children:[(0,G.jsx)(se.Z,{value:!1,disabled:!te,children:(0,G.jsx)("small",{children:"Show New artifact Stats"})}),(0,G.jsx)(se.Z,{value:!0,disabled:te,children:(0,G.jsx)("small",{children:"Compare against equipped artifacts"})})]})})]})]})}),(0,G.jsx)(fi,{buildsArts:Se,character:s,characterKey:o,characterSheet:ke,data:Pe,compareData:te,mainStatAssumptionLevel:ue,characterDispatch:J,disabled:!!b})]})]})}function fi(e){var t=e.buildsArts,n=e.character,r=e.characterKey,i=e.characterSheet,a=e.data,s=e.compareData,o=e.mainStatAssumptionLevel,c=e.characterDispatch,l=e.disabled;return(0,S.useMemo)((function(){return(0,G.jsx)(S.Suspense,{fallback:(0,G.jsx)(d.Z,{variant:"rectangular",width:"100%",height:600}),children:null===t||void 0===t?void 0:t.map((function(e,t){return n&&r&&i&&a&&(0,G.jsx)(pi,{characterKey:r,character:n,build:e,characterSheet:i,oldData:a,mainStatAssumptionLevel:o,characterDispatch:c,children:(0,G.jsx)(At,{index:t,compareBuild:s,disabled:l})},t+e.join())}))})}),[t,n,r,i,a,s,o,c,l])}function pi(e){var t=e.children,n=e.characterKey,r=e.character,i=e.build,a=e.characterDispatch,s=e.mainStatAssumptionLevel,o=void 0===s?0:s,c=e.characterSheet,l=e.oldData,u=(0,De.Z)(n,o,i);return u?(0,G.jsx)(X.R.Provider,{value:{characterSheet:c,character:r,characterDispatch:a,mainStatAssumptionLevel:o,data:u[n].target,teamData:u,oldData:l},children:t}):null}var xi=n(14361),mi=n(90690),vi=n(13400),ji=n(96874),Zi=n(74954);function gi(){var e,t=(0,S.useContext)(X.R),n=t.data,r=t.characterSheet,i=t.character,a=t.character.key,s=(0,Oe.Z)(a),o=(0,O.s0)(),c=(0,_.$)("page_character").t,l=n.get(Y.ri.charEle).value,d=r.weaponTypeKey,p=n.get(Y.ri.lvl).value,m=n.get(Y.ri.asc).value,v=n.get(Y.ri.constellation).value,j={auto:n.get(Y.ri.total.auto).value,skill:n.get(Y.ri.total.skill).value,burst:n.get(Y.ri.total.burst).value},Z={auto:n.get(Y.ri.bonus.auto).value,skill:n.get(Y.ri.bonus.skill).value,burst:n.get(Y.ri.bonus.burst).value};return(0,G.jsxs)(f.ZP,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[(0,G.jsx)(f.ZP,{item:!0,xs:8,sm:5,md:4,lg:2.5,children:(0,G.jsxs)(T.Z,{children:[(0,G.jsx)(u.Z,{src:r.cardImg,component:"img",width:"100%",height:"auto"}),(0,G.jsxs)(h.Z,{children:[(0,G.jsxs)(x.Z,{variant:"h5",children:[r.name,"\xa0",(0,G.jsx)(xe.Z,{sx:{pr:.5},src:null===(e=tt.Z.weaponTypes)||void 0===e?void 0:e[d]}),ne.Z[l],(0,G.jsx)(vi.Z,{sx:{p:.5,mt:-.5},onClick:function(){return s({favorite:!i.favorite})},children:i.favorite?(0,G.jsx)(xi.Z,{}):(0,G.jsx)(mi.Z,{})})]}),(0,G.jsx)(x.Z,{variant:"h6",children:(0,G.jsx)($t.t,{stars:r.rarity,colored:!0})}),(0,G.jsxs)(x.Z,{variant:"h5",children:["Lvl. ",be.Z.getLevelString(p,m)]}),(0,G.jsx)(ut.Z,{sx:{p:1},onClick:function(){return o("talent")},children:(0,G.jsx)(f.ZP,{container:!0,spacing:1,mt:-1,children:["auto","skill","burst"].map((function(e){var t;return(0,G.jsx)(f.ZP,{item:!0,xs:4,children:(0,G.jsx)(ji.Z,{badgeContent:j[e],color:Z[e]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:(0,G.jsx)(u.Z,{component:"img",src:null===(t=r.getTalentOfKey(e,l))||void 0===t?void 0:t.img,width:"100%",height:"auto"})})},e)}))})}),(0,G.jsx)(x.Z,{sx:{textAlign:"center",mt:1},variant:"h6",children:r.constellationName}),(0,G.jsx)(f.ZP,{container:!0,spacing:1,children:(0,we.w6)(1,6).map((function(e){var t;return(0,G.jsx)(f.ZP,{item:!0,xs:4,children:(0,G.jsx)(ut.Z,{onClick:function(){return s({constellation:e===v?e-1:e})},children:(0,G.jsx)(u.Z,{component:"img",src:null===(t=r.getTalentOfKey("constellation".concat(e),l))||void 0===t?void 0:t.img,sx:(0,z.Z)({},v>=e?{}:{filter:"brightness(50%)"}),width:"100%",height:"auto"})})},e)}))}),(0,G.jsx)(x.Z,{sx:{textAlign:"center",mt:1},variant:"h6",children:c("teammates")}),(0,G.jsx)(ut.Z,{sx:{p:1},onClick:function(){return o("teambuffs")},children:(0,G.jsx)(f.ZP,{container:!0,columns:3,spacing:1,children:(0,we.w6)(0,2).map((function(e){return(0,G.jsx)(f.ZP,{item:!0,xs:1,height:"100%",children:(0,G.jsx)(Xr.Z,{characterKey:i.team[e],index:e})},e)}))})})]})]})}),(0,G.jsxs)(f.ZP,{item:!0,xs:12,sm:7,md:8,lg:9.5,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,G.jsxs)(f.ZP,{container:!0,spacing:1,columns:{xs:2,sm:2,md:3,lg:4,xl:6},children:[(0,G.jsx)(f.ZP,{item:!0,xs:1,children:(0,G.jsx)(Pt,{weaponId:i.equippedWeapon,BGComponent:T.Z,onClick:function(){return o("equip")}})}),ee.eV.map((function(e){return(0,G.jsx)(f.ZP,{item:!0,xs:1,children:(0,G.jsx)(jt,{artifactId:n.get(Y.ri.art[e].id).value,slotKey:e,BGComponent:T.Z,onClick:function(){return o("equip")}})},e)}))]}),(0,G.jsx)(Oi,{})]})]})}var yi=["eleMas","critRate_","critDMG_","enerRech_","heal_"],bi=[].concat(["atk","hp","def"],yi).map((function(e){return Y.ri.total[e]})),wi=["atk_","atk","hp_","hp","def_","def"].concat(yi),Ci=[].concat((0,Ze.Z)(ee.Kj.map((function(e){return Y.ri.total["".concat(e,"_dmg_")]}))),(0,Ze.Z)(ee.Kj.map((function(e){return Y.ri.total["".concat(e,"_res_")]}))),(0,Ze.Z)(["stamina","incHeal_","shield_","cdRed_"].map((function(e){return Y.ri.total[e]})))),ki=Ci.map((function(e){return e.info.key})),Pi=[Y.ri.total.all_dmg_].concat((0,Ze.Z)(ee.Kj.map((function(e){return Y.ri.total["".concat(e,"_enemyRes_")]}))),[Y.ri.total.normal_dmg_,Y.ri.total.normal_critRate_,Y.ri.total.charged_dmg_,Y.ri.total.charged_critRate_,Y.ri.total.plunging_dmg_,Y.ri.total.plunging_critRate_,Y.ri.total.skill_dmg_,Y.ri.total.skill_critRate_,Y.ri.total.burst_dmg_,Y.ri.total.burst_critRate_],(0,Ze.Z)(Object.keys(Zi.Ne).map((function(e){return Y.ri.total["".concat(e,"_dmg_")]}))),(0,Ze.Z)(Object.keys(Zi.UT).map((function(e){return Y.ri.total["".concat(e,"_dmg_")]}))),(0,Ze.Z)(["moveSPD_","atkSPD_","weakspotDMG_"].map((function(e){return Y.ri.total[e]}))),[Y.ri.total.dmgRed_]),Si=Pi.map((function(e){return e.info.key})),_i={xs:12,sm:12,md:6,lg:4};function Ai(e){var t=e.nodes,n=e.statBreakpoint,r=e.extra,i=(0,S.useContext)(X.R),a=i.data,s=i.oldData;return(0,G.jsxs)(f.ZP,{container:!0,columnSpacing:{xs:2,lg:3},rowSpacing:1,children:[t.map((function(e){var t,r;return(0,G.jsx)(f.ZP,(0,z.Z)((0,z.Z)({item:!0},n),{},{children:(0,G.jsx)(Fe.JW,{node:a.get(e),oldValue:null===s||void 0===s||null===(r=s.get(e))||void 0===r?void 0:r.value})}),null===(t=e.info)||void 0===t?void 0:t.key)})),r]})}function Oi(){var e=(0,S.useContext)(X.R),t=e.data,n=e.character,r=e.character.key,i=(0,Oe.Z)(r),a=t.get(Y.ri.special);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Ei,{title:"Main Stats",content:(0,G.jsx)(Ai,{statBreakpoint:_i,nodes:bi,extra:a&&(0,G.jsxs)(f.ZP,(0,z.Z)((0,z.Z)({item:!0},_i),{},{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[(0,G.jsxs)("span",{children:[(0,G.jsx)("b",{children:"Special:"})," ",(0,G.jsxs)(I.Z,{color:a.info.variant,children:[a.info.key&&ne.Z[a.info.key]," ",a.info.key&&Q.ZP.get(a.info.key)]})]}),(0,G.jsx)("span",{children:(0,Q.EC)(a.value,a.unit)})]}))}),editContent:(0,G.jsx)(f.ZP,{container:!0,columnSpacing:2,rowSpacing:1,children:wi.map((function(e){var t,r=Q.ZP.get(e);return(0,G.jsx)(f.ZP,{item:!0,xs:12,lg:6,children:(0,G.jsx)(J,{name:(0,G.jsxs)("span",{children:[ne.Z[e]," ",r]}),placeholder:Q.ZP.getStr(e),value:null!==(t=n.bonusStats[e])&&void 0!==t?t:0,percent:"%"===Q.ZP.unit(e),onValueChange:function(t){return i({type:"editStats",statKey:e,value:t})}})},e)}))})}),(0,G.jsx)(Ei,{title:"Other Stats",content:(0,G.jsx)(Ai,{statBreakpoint:_i,nodes:Ci}),editContent:(0,G.jsx)(f.ZP,{container:!0,columnSpacing:2,rowSpacing:1,children:ki.map((function(e){var t,r=Q.ZP.get(e);return(0,G.jsx)(f.ZP,{item:!0,xs:12,lg:6,children:(0,G.jsx)(J,{name:(0,G.jsxs)("span",{children:[ne.Z[e]," ",r]}),placeholder:Q.ZP.getStr(e),value:null!==(t=n.bonusStats[e])&&void 0!==t?t:0,percent:"%"===Q.ZP.unit(e),defaultValue:void 0,onValueChange:function(t){return i({type:"editStats",statKey:e,value:t})}})},e)}))})}),(0,G.jsx)(Ei,{title:"Misc Stats",content:(0,G.jsx)(Ai,{statBreakpoint:{xs:12,sm:12,md:6},nodes:Pi}),editContent:(0,G.jsx)(f.ZP,{container:!0,columnSpacing:2,rowSpacing:1,children:Si.map((function(e){var t,r=Q.ZP.get(e);return(0,G.jsx)(f.ZP,{item:!0,xs:12,lg:6,children:(0,G.jsx)(J,{name:(0,G.jsxs)("span",{children:[ne.Z[e]," ",r]}),placeholder:Q.ZP.getStr(e),value:null!==(t=n.bonusStats[e])&&void 0!==t?t:0,percent:"%"===Q.ZP.unit(e),onValueChange:function(t){return i({type:"editStats",statKey:e,value:t})}})},e)}))})})]})}function Ei(e){var t=e.title,n=e.content,i=e.editContent,a=(0,S.useState)(!1),s=(0,r.Z)(a,2),o=s[0],c=s[1];return(0,G.jsxs)(T.Z,{children:[(0,G.jsx)(h.Z,{sx:{py:1},children:(0,G.jsxs)(u.Z,{display:"flex",justifyContent:"space-between",children:[(0,G.jsx)(x.Z,{variant:"subtitle1",children:t}),(0,G.jsx)(j.Z,{size:"small",color:o?"error":"info",onClick:function(){return c(!o)},children:(0,G.jsxs)("span",{children:[(0,G.jsx)(q.G,{icon:o?$.r6l:$.Xcf})," ",o?"EXIT":"Edit Stats"]})})]})}),(0,G.jsx)(w.Z,{}),(0,G.jsx)(h.Z,{children:o?i:n})]})}var Ti={xs:12,sm:6,md:4};function Di(){var e=(0,S.useContext)(X.R),t=e.data,n=e.character,i=e.characterSheet,a=(0,Oe.Z)(n.key),s=t.get(Y.ri.charEle).value,o=t.get(Y.ri.asc).value,c=t.get(Y.ri.constellation).value,l=(0,ze.Z)(),d=(0,Ke.Z)(l.breakpoints.up("lg")),p=(0,S.useMemo)((function(){return(0,we.w6)(1,6).map((function(e){return(0,G.jsx)(Ii,{talentKey:"constellation".concat(e),subtitle:"Constellation Lv. ".concat(e),onClickTitle:function(){return a({constellation:e===c?e-1:e})}})}))}),[c,a]);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Ri,{}),(0,G.jsxs)(f.ZP,{container:!0,spacing:1,children:[d&&(0,G.jsxs)(f.ZP,{item:!0,xs:12,md:12,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,G.jsx)(T.Z,{children:(0,G.jsx)(h.Z,{children:(0,G.jsxs)(x.Z,{variant:"h6",sx:{textAlign:"center"},children:["Constellation Lv. ",c]})})}),p.map((function(e,t){return(0,G.jsx)(u.Z,{sx:{opacity:c>=t+1?1:.5},children:e},t)}))]}),(0,G.jsxs)(f.ZP,{item:!0,xs:12,md:12,lg:9,container:!0,spacing:1,children:[[["auto","Normal/Charged Attack"],["skill","Elemental Skill"],["burst","Elemental Burst"]].map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,G.jsx)(f.ZP,(0,z.Z)((0,z.Z)({item:!0},Ti),{},{children:(0,G.jsx)(Ii,{talentKey:n,subtitle:i})}),n)})),!!i.getTalentOfKey("sprint",s)&&(0,G.jsx)(f.ZP,(0,z.Z)((0,z.Z)({item:!0},Ti),{},{children:(0,G.jsx)(Ii,{talentKey:"sprint",subtitle:"Alternative Sprint"})})),!!i.getTalentOfKey("passive",s)&&(0,G.jsx)(f.ZP,(0,z.Z)((0,z.Z)({item:!0},Ti),{},{children:(0,G.jsx)(Ii,{talentKey:"passive",subtitle:"Passive"})})),[["passive1","Unlocked at Ascension 1",1],["passive2","Unlocked at Ascension 4",4],["passive3","Unlocked by Default",0]].map((function(e){var t=(0,r.Z)(e,3),n=t[0],a=t[1],c=t[2],l=o>=c;return i.getTalentOfKey(n,s)?(0,G.jsx)(f.ZP,(0,z.Z)((0,z.Z)({item:!0,style:{opacity:l?1:.5}},Ti),{},{children:(0,G.jsx)(Ii,{talentKey:n,subtitle:a})}),n):null}))]}),!d&&(0,G.jsxs)(f.ZP,{item:!0,xs:12,md:12,lg:3,container:!0,spacing:1,children:[(0,G.jsx)(f.ZP,{item:!0,xs:12,children:(0,G.jsx)(T.Z,{children:(0,G.jsx)(h.Z,{children:(0,G.jsxs)(x.Z,{variant:"h6",sx:{textAlign:"center"},children:["Constellation Lv. ",c]})})})}),p.map((function(e,t){return(0,G.jsx)(f.ZP,(0,z.Z)((0,z.Z)({item:!0,sx:{opacity:c>=t+1?1:.5}},Ti),{},{children:e}),t)}))]})]})]})}function Ri(){var e=(0,S.useContext)(X.R).data.getDisplay().reaction;return(0,G.jsx)(T.Z,{sx:{mb:1},children:(0,G.jsx)(h.Z,{children:(0,G.jsx)(f.ZP,{container:!0,spacing:1,children:Object.entries(e).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(E.Z,{children:(0,G.jsx)(h.Z,{sx:{p:1,"&:last-child":{pb:1}},children:(0,G.jsx)(Fe.JW,{node:i})})})},n)}))})})})}var Mi=[1,1,2,4,6,8,10];function Ii(e){var t=e.talentKey,n=e.subtitle,r=e.onClickTitle,i=(0,S.useContext)(X.R),a=i.data,s=i.character.talent,o=i.characterSheet,c=i.characterDispatch,l=(0,S.useCallback)((function(e){return(0,G.jsx)(ut.Z,{onClick:r,children:e})}),[r]),d=null;if(t in s){var p=a.get(Y.ri.bonus[t]).value,m=a.get(Y.ri.total[t]).value,v=a.get(Y.ri.asc).value;d=(0,G.jsx)(W.Z,{fullWidth:!0,title:"Talent Lv. ".concat(m),color:p?"info":"primary",sx:{borderRadius:0},children:(0,we.w6)(1,Mi[v]).map((function(e){return(0,G.jsxs)(g.Z,{selected:s[t]===e,disabled:s[t]===e,onClick:function(){return n=e,s[t]=n,void c({talent:s});var n},children:["Talent Lv. ",e+p]},e)}))})}var j=o.getTalentOfKey(t,a.get(Y.ri.charEle).value);return(0,G.jsxs)(T.Z,{sx:{height:"100%"},children:[d,(0,G.jsxs)(h.Z,{children:[(0,G.jsx)(mt.Z,{condition:!!r,wrapper:l,children:(0,G.jsxs)(f.ZP,{container:!0,sx:{flexWrap:"nowrap"},children:[(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(u.Z,{component:"img",src:null===j||void 0===j?void 0:j.img,sx:{width:60,height:"auto"}})}),(0,G.jsxs)(f.ZP,{item:!0,flexGrow:1,sx:{pl:1},children:[(0,G.jsx)(x.Z,{variant:"h6",children:null===j||void 0===j?void 0:j.name}),(0,G.jsx)(x.Z,{variant:"subtitle1",children:n})]})]})}),null!==j&&void 0!==j&&j.sections?(0,G.jsx)($e.Z,{sections:j.sections,hideDesc:!0,hideHeader:function(e){var n,r=null===(n=e.header)||void 0===n?void 0:n.action;return!(!r||"string"===typeof r)&&r.props.children.props.key18.includes(t)}}):null]})]})}var Ki=n(43992),Wi=n(31038),zi=n(11741);function $i(){return(0,G.jsx)(Ve.Z,{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch",children:(0,G.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,G.jsxs)(f.ZP,{item:!0,xs:12,md:6,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,G.jsx)(qi,{}),(0,G.jsx)(Ni,{})]}),(0,we.w6)(0,2).map((function(e){return(0,G.jsx)(f.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,G.jsx)(Li,{index:e})},e)}))]})})}function qi(){var e,t,n,i=(0,S.useContext)(X.R),a=i.data,s=i.oldData,o=a.getTeamBuff(),c=[];return Object.entries(null!==(e=o.total)&&void 0!==e?e:{}).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return!i.isEmpty&&0!==i.value&&c.push([["total",n],i])})),Object.entries(null!==(t=o.premod)&&void 0!==t?t:{}).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return!i.isEmpty&&0!==i.value&&c.push([["premod",n],i])})),Object.entries(null!==(n=o.enemy)&&void 0!==n?n:{}).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return!i.isEmpty&&0!==i.value&&c.push([["enemy",n],i])})),c.length?(0,G.jsxs)(T.Z,{children:[(0,G.jsx)(h.Z,{children:"Team Buffs"}),(0,G.jsx)(w.Z,{}),(0,G.jsx)(h.Z,{children:(0,G.jsx)(f.ZP,{container:!0,children:c.map((function(e,t){var n,i=(0,r.Z)(e,2),a=i[0],o=i[1];return o&&(0,G.jsx)(f.ZP,{item:!0,xs:12,children:(0,G.jsx)(Fe.JW,{node:o,oldValue:null===(n=(0,we.Hm)(null===s||void 0===s?void 0:s.getTeamBuff(),a))||void 0===n?void 0:n.value})},o.info.key)}))})})]}):null}function Ni(){var e=(0,S.useContext)(X.R).data;return(0,G.jsx)(G.Fragment,{children:zi.J.map((function(t,n){var r=(0,G.jsx)(or.Z,{title:(0,G.jsx)(x.Z,{children:t.desc})}),i=(0,G.jsxs)("span",{children:[t.name," ",r]});return(0,G.jsxs)(T.Z,{sx:{opacity:t.canShow(e)?1:.5},children:[(0,G.jsx)(b.Z,{title:i,action:t.icon,titleTypographyProps:{variant:"subtitle2"}}),t.canShow(e)&&(0,G.jsx)(w.Z,{}),t.canShow(e)&&(0,G.jsx)(h.Z,{children:(0,G.jsx)($e.Z,{sections:t.sections,teamBuffOnly:!0,hideDesc:!0})})]},n)}))})}function Li(e){var t=e.index,n=(0,S.useContext)(X.R),r=(0,_.$)("page_character").t,i=n.character,a=n.teamData,s=n.characterDispatch,o=i.key,c=i.team[t],l=(0,Oe.Z)(c),u=(0,Ee.Z)(),d=a[c],f=d&&{character:d.character,characterSheet:d.characterSheet,data:d.target,teamData:a,mainStatAssumptionLevel:0,characterDispatch:l};return(0,G.jsxs)(T.Z,{children:[(0,G.jsx)(h.Z,{children:(0,G.jsx)(Wi.Z,{fullWidth:!0,value:c,onChange:function(e){return s({type:"team",index:t,charKey:e})},disable:function(e){return e===o||i.team.includes(e)},labelText:r("teammate",{count:t+1}),defaultText:r("none"),defaultIcon:(0,G.jsx)(Ki.Z,{}),showDefault:!0})}),f&&(0,G.jsx)(X.R.Provider,{value:f,children:(0,G.jsx)(rn.Z,{characterKey:c,onClickHeader:u,artifactChildren:(0,G.jsx)(Hi,{}),weaponChildren:(0,G.jsx)(Vi,{}),characterChildren:(0,G.jsx)(Fi,{}),isTeammateCard:!0})})]})}function Hi(){var e=(0,S.useContext)(X.R).data,t=(0,Te.Z)(ye.y.getAll,[]),n=(0,S.useMemo)((function(){return t&&Object.entries(ye.y.setEffects(t,e)).flatMap((function(e){var n=(0,r.Z)(e,2),i=n[0];return n[1].flatMap((function(e){return t[i].setEffectDocument(e)}))}))}),[t,e]);return n?(0,G.jsx)($e.Z,{sections:n,teamBuffOnly:!0}):null}function Vi(){var e=(0,S.useContext)(X.R),t=e.teamData[e.character.key].weaponSheet;return t.document?(0,G.jsx)($e.Z,{sections:t.document,teamBuffOnly:!0}):null}function Fi(){var e=(0,S.useContext)(X.R),t=e.data,n=e.teamData[e.character.key].characterSheet.getTalent(t.get(Y.ri.charEle).value),r=Object.values(n.sheets).flatMap((function(e){return e.sections}));return r?(0,G.jsx)($e.Z,{sections:r,teamBuffOnly:!0}):null}var Gi=n(57246);function Bi(e,t,n){var r=!0;return(0,on.aD)([e],(function(e){}),(function(e){var i=e.operation;if("read"===i){if("number"!==e.type||e.accu&&"add"!==e.accu)throw new Error("Unsupported [".concat(i,"] node in zero_deriv"));t(e)===n&&(r=!1)}})),r}function Ui(e,t,n){var i=e.operation;switch(i){case"read":if("number"!==e.type||e.accu&&"add"!==e.accu)throw new Error("Unsupported [".concat(i,"] node in d/dx"));return t(e)===n?(0,Ge.a9)(1):(0,Ge.a9)(0);case"const":return(0,Ge.a9)(0);case"res":if(!Bi(e,t,n))throw new Error("[".concat(i,"] node takes only constant inputs. ").concat(e));return(0,Ge.a9)(0);case"add":return Ge.Sm.apply(void 0,(0,Ze.Z)(e.operands.map((function(e){return Ui(e,t,n)}))));case"mul":var a=e.operands.map((function(r,i){return Ge.WV.apply(void 0,[Ui(r,t,n)].concat((0,Ze.Z)(e.operands.filter((function(e,t){return t!==i})))))}));return Ge.Sm.apply(void 0,(0,Ze.Z)(a));case"sum_frac":var s=e.operands[0],o=Ui(s,t,n),c=Ge.Sm.apply(void 0,(0,Ze.Z)(e.operands.slice(1))),l=Ui(c,t,n),u=(0,Ge.WV)(Ge.Sm.apply(void 0,(0,Ze.Z)(e.operands)),Ge.Sm.apply(void 0,(0,Ze.Z)(e.operands))),d=(0,Ge.Sm)((0,Ge.WV)(c,o),(0,Ge.WV)(-1,s,l));return{operation:"sum_frac",operands:[d,(0,Ge.WV)(d,-1),u]};case"min":case"max":switch(e.operands.length){case 1:return Ui(e.operands[0],t,n);case 2:var h=(0,r.Z)(e.operands,2),f=h[0],p=h[1];if("min"===i)return(0,Ge.ER)(f,p,Ui(p,t,n),Ui(f,t,n));if("max"===i)return(0,Ge.ER)(f,p,Ui(f,t,n),Ui(p,t,n));(0,we.UT)(i);break;default:throw new Error("[".concat(i,"] node operates on only 1 or 2 arguments. ").concat(e))}break;case"threshold":var x=(0,r.Z)(e.operands,4),m=x[0],v=x[1],j=x[2],Z=x[3];if(!Bi(m,t,n)||!Bi(v,t,n))throw new Error("[".concat(i,"] node must branch on constant inputs. ").concat(e));return(0,Ge.ER)(m,v,Ui(j,t,n),Ui(Z,t,n));case"match":case"lookup":case"subscript":case"data":throw new Error("Unsupported [".concat(i,"] node in ddx"));default:(0,we.UT)(i)}}var Ji=[[1],[1,1,1,1],[1,2,3,4,3,2,1],[1,3,6,10,12,12,10,6,3,1],[1,4,10,20,31,40,44,40,31,20,10,4,1],[1,5,15,35,65,101,135,155,155,135,101,65,35,15,5,1]];function Xi(e,t){for(var n;e>=Ji.length;){for(var r=Ji.length,i=[],a=0,s=r-1;a<=3*r;a++){var o,c,l,u,d=null!==(o=Ji[s][a-3])&&void 0!==o?o:0,h=null!==(c=Ji[s][a-2])&&void 0!==c?c:0,f=null!==(l=Ji[s][a-1])&&void 0!==l?l:0,p=null!==(u=Ji[s][a])&&void 0!==u?u:0;i[a]=d+h+f+p}Ji.push(i)}return null!==(n=Ji[e][t])&&void 0!==n?n:0}function Yi(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),n<=0?0:Math.exp(-(t-e)*(t-e)/n/2)/Math.sqrt(2*Math.PI*n)}var Qi=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return e.flatMap((function(e){return t.map((function(t){return[e,t].flat()}))}))}))},ea=[270/1024,80/1024,0,12/256,8/256,120/1024,0,60/1024,4/256,60/1024,4/256,30/1024,24/256,.15625,1/64,1/64,24/256,1/64,12/256,0,6/256,2/16,6/256,0,81/256,.0625,0,27/64,12/64,0,1/16,1/16,12/64,1/16,6/64,3/4,.5,243/1024,.03125,0,108/256,.125,0,9/64,6/64,.1875,0,24/256,3/64,5/1024,3/64,5/1024,0,405/1024,80/1024,0,54/256,90/1024,40/1024,0,1/256,1/256,40/1024,1/256,20/1024,9/16,.25,0,1/4,1/4,0,1/4,27/64,8/64,0,6/16,.25,10/1024,0,10/1024,2/16,0,0,0,15/1024,10/1024,1/1024,1/1024,0,1/1024],ta=[35,64,70,21,33,45,12,0,53,76,48,86];function na(e,t){var n=e.reduce((function(e,t){return e+t}));if(e.length>4||n>t)return 0;if(4===e.length&&n!==t)return 0;3===e.length&&(e=[].concat((0,Ze.Z)(e),[t-n])),e.sort().reverse();var r=13*t+e.length-14+16*e[0];e.length>1&&(r+=4*e[1]);var i=r%12,a=Math.trunc(r/12);return ea[i+ta[a]]}function ra(e,t){if(0!==e)for(var n=e;n>=0;n--)for(var r=e-n;r>=0;r--)for(var i=e-n-r;i>=0;i--){var a=e-n-r-i;t([n,r,i,a],na([n,r,i,a],e))}else t([0,0,0,0],1)}function ia(e){var t=e.statsBase,n=e.rollsLeft,r=e.subs,i=e.skippableDerivs,a=e.fourthsubOpts,s=e.evalFn,o=function(e){return e.endsWith("_")?ft.Z.maxSubstatValues(e,5)/1e3:ft.Z.maxSubstatValues(e,5)/10},c=t,l=[];return ra(n,(function(e,t){a&&(e[3]+=1);var n=e.map((function(e,t){if(a&&3===t)return(0,we.w6)(7*e,10*e);var n=r[t];return n&&!i[ci._.indexOf(n)]?(0,we.w6)(7*e,10*e):[NaN]}));Qi.apply(void 0,(0,Ze.Z)(n)).forEach((function(n){for(var i=(0,z.Z)({},c),u=1,d=0;d<3;d++){var h;if(!isNaN(n[d])){var f=r[d],p=n[d],x=e[d];i[f]=(null!==(h=i[f])&&void 0!==h?h:0)+p*o(f);var m=Math.pow(4,-x)*Xi(x,p-7*x);u*=m}}if(void 0===a){if(!isNaN(n[3])){var v,j=r[3],Z=n[3],g=e[3];i[j]=(null!==(v=i[j])&&void 0!==v?v:0)+Z*o(j);var y=Math.pow(4,-g)*Xi(g,Z-7*g);u*=y}l.push({v:s(i).map((function(e){return e.v})),p:t*u})}else a.forEach((function(r){var a,c=r.sub,d=r.subprob,h=(0,z.Z)({},i),f=c,p=n[3],x=e[3];h[f]=(null!==(a=h[f])&&void 0!==a?a:0)+p*o(f);var m=Math.pow(4,-x)*Xi(x,p-7*x)*d,v=u*m;l.push({v:s(h).map((function(e){return e.v})),p:t*v})}))}))})),l}var aa=n(61503);function sa(e,t,n){if(t<1e-5)return e>n?{p:1,upAvg:e-n}:{p:0,upAvg:0};var r=(n-e)/Math.sqrt(t),i=(1-function(e){var t=1;e<0&&(t=-1);var n=1/(1+.3275911*(e=Math.abs(e)));return t*(1-((((1.061405429*n-1.453152027)*n+1.421413741)*n-.284496736)*n+.254829592)*n*Math.exp(-e*e))}(r/Math.sqrt(2)))/2;if(r>5){var a=1/r,s=a*a;return{p:i,upAvg:Math.sqrt(t)*a*(1-2*s*(1-s*(5+37*s)))}}var o=Math.exp(-r*r/2)/Math.sqrt(2*Math.PI);return{p:i,upAvg:e-n+Math.sqrt(t)*o/i}}function oa(e){var t={};return Object.values(e).forEach((function(e){e&&Object.entries(e.values).forEach((function(e){var n,i=(0,r.Z)(e,2),a=i[0],s=i[1];return t[a]=(null!==(n=t[a])&&void 0!==n?n:0)+s}))})),t}function ca(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=(0,z.Z)({},e.curBuild);i[t.slot]=t;var a=oa(i),s=(0,z.Z)({},a),o=function(e){return e.endsWith("_")?ft.Z.maxSubstatValues(e,t.rarity)/1e3:ft.Z.maxSubstatValues(e,t.rarity)/10},c=ft.Z.rollsRemaining(t.level,t.rarity)-(4-t.subs.length);if(4===t.subs.length&&(r=!1),r){var l=Object.keys(t.values).filter((function(e){return!t.subs.includes(e)})).filter((function(e){return!ee.q2.includes(e)}));if(1!==l.length)throw Error("Failed to extract artifact main stat");var u=l[0],d=ci._.filter((function(e){return!t.subs.includes(e)&&e!==u})),h=d.map((function(i){var s=[].concat((0,Ze.Z)(t.subs),[i]),l={rollsLeft:c,subs:s,calc4th:r,stats:a,thresholds:e.thresholds,objectiveEval:function(t){return e.evalFn(t).map((function(e){var t=e.v,n=e.grads;return{v:t,ks:s.map((function(e){return n[ci._.indexOf(e)]*o(e)}))}}))},scale:o},d=n?ua(l):la(l);return(0,z.Z)((0,z.Z)({},d),{},{p2:ma(i,[].concat((0,Ze.Z)(t.subs),[u]))})})),f=h.reduce((function(e,t){return e+t.prob*t.p2}),0),p=f<1e-6?0:h.reduce((function(e,t){return e+t.prob*t.p2*t.upAvg}),0)/f,x=h.reduce((function(e,t){var n,r=t.p2,i=t.distr;return e.lower=Math.min(e.lower,i.lower),e.upper=Math.max(e.upper,i.upper),(n=e.gmm).push.apply(n,(0,Ze.Z)(i.gmm.map((function(e){var t=e.phi,n=e.cp,i=e.mu,a=e.sig2;return{phi:r*t,cp:n,mu:i,sig2:a}})))),e}),{gmm:[],lower:1/0,upper:-1/0});return{id:t.id,subs:t.subs,fourthsubOpts:d.map((function(e){return{sub:e,subprob:ma(e,[].concat((0,Ze.Z)(t.subs),[u]))}})),rollsLeft:c,statsBase:s,prob:f,upAvg:p,distr:x,evalFn:e.evalFn,skippableDerivs:e.skippableDerivs,thresholds:e.thresholds,evalMode:n?"slow":"fast"}}var m={rollsLeft:c,subs:t.subs,calc4th:r,stats:a,thresholds:e.thresholds,objectiveEval:function(n){return e.evalFn(n).map((function(e){var n=e.v,r=e.grads;return{v:n,ks:t.subs.map((function(e){return r[ci._.indexOf(e)]*o(e)}))}}))},scale:o},v=n?ua(m):la(m);return(0,z.Z)((0,z.Z)({id:t.id,subs:t.subs,rollsLeft:c,statsBase:s},v),{},{evalFn:e.evalFn,skippableDerivs:e.skippableDerivs,thresholds:e.thresholds,evalMode:n?"slow":"fast"})}function la(e){var t=e.rollsLeft,n=e.subs,r=e.stats,i=e.thresholds,a=e.calc4th,s=e.scale,o=e.objectiveEval,c=(0,z.Z)({},r);n.forEach((function(e,n){var r,i=a&&3===n?1:0;c[e]=(null!==(r=c[e])&&void 0!==r?r:0)+8.5*(t/4+i)*s(e)}));for(var l=t,u=o(c),d=1,h=-1,f={gmm:[],lower:u[0].v,upper:u[0].v},p=0;p<u.length;p++){var x=u[p],m=x.v,v=x.ks,j=v.reduce((function(e,t){return e+t})),Z=m,g=(147/8*v.reduce((function(e,t){return e+t*t}),0)-289/64*j*j)*l+(a?5/4*v[3]*v[3]:0),y=sa(Z,g,i[p]),b=y.p,w=y.upAvg;0===p&&(h=w,f={gmm:[{phi:1,mu:Z,sig2:g,cp:1}],lower:Z-4*Math.sqrt(g),upper:Z+4*Math.sqrt(g)}),d=Math.min(b,d)}return{prob:d,upAvg:h,distr:f}}function ua(e){var t=e.rollsLeft,n=e.stats,r=e.subs,i=e.thresholds,a=e.calc4th,s=e.scale,o=e.objectiveEval,c={gmm:[],lower:i[0],upper:i[0]},l=[];ra(t,(function(e,t){var u=(0,z.Z)({},n);a&&(e[3]+=1),r.forEach((function(t,n){var r;u[t]=(null!==(r=u[t])&&void 0!==r?r:0)+8.5*e[n]*s(t)}));var d=o(u),h=d.map((function(e){return e.v})),f=d.map((function(t){return d.map((function(n){return t.ks.reduce((function(r,i,a){return r+t.ks[a]*n.ks[a]*e[a]}),0)}))})),p=function(e,t,n){var r=new aa.Y.MVNHandle(e.length);try{return n.forEach((function(e){return r.pushX(e)})),e.forEach((function(e){return r.pushMu(e)})),t.forEach((function(e){return e.forEach((function(e){return r.pushCov(e)}))})),r.compute(),{p:r.p,upAvg:r.Eup,cp:r.cp}}finally{r.delete()}}(h,f,i);l.push((0,z.Z)({l:t},p)),c.gmm.push({phi:t,mu:h[0],sig2:f[0][0],cp:p.cp}),c.lower=Math.min(c.lower,h[0]-4*Math.sqrt(f[0][0])),c.upper=Math.max(c.upper,h[0]+4*Math.sqrt(f[0][0]))}));var u=0,d=0;return l.forEach((function(e){var t=e.l,n=e.p,r=e.upAvg,i=e.cp;u+=t*n*i,d+=t*n*i*r})),u<1e-10?{prob:0,upAvg:0,distr:c}:{prob:u,upAvg:d/=u,distr:c}}function da(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=[];e.forEach((function(e){a.push.apply(a,[e].concat((0,Ze.Z)(ci._.map((function(t){return Ui(e,(function(e){return e.path[1]}),t)})))))}));var s=(0,sn.tL)(a,i,(function(e){return"dyn"!==(0,r.Z)(e.path,1)[0]}));s=(0,sn.tL)(s,i,(function(e){return"dyn"!==(0,r.Z)(e.path,1)[0]}));var o=(0,sn.I3)(s,(function(e){return e.path[1]})),c=(0,r.Z)(o,3),l=c[0],u=c[1],d=c[2],h=oa(n);bn(h,u,d);var f=l()[0],p=ci._.map((function(t){return e.every((function(e){return Bi(e,(function(e){return e.path[1]}),t)}))})),x=function(t){Object.values(u).forEach((function(e){return d[e]=0})),bn(t,u,d);var n=l();return e.map((function(e,t){var r=t*(1+ci._.length);return{v:n[r],grads:ci._.map((function(e,t){return n[r+1+t]}))}}))};return{formulas:e,thresholds:[f].concat((0,Ze.Z)(t)),curBuild:n,evalFn:x,skippableDerivs:p}}function ha(e,t){var n;void 0===t&&(t=e.level);var r=ft.Z.mainStatValue(e.mainStatKey,e.rarity,t),i={id:e.id,slot:e.slotKey,level:e.level,rarity:e.rarity,values:(0,z.Z)((n={},(0,cn.Z)(n,e.setKey,1),(0,cn.Z)(n,e.mainStatKey,e.mainStatKey.endsWith("_")?r/100:r),n),Object.fromEntries(e.substats.map((function(e){return[e.key,e.key.endsWith("_")?e.accurateValue/100:e.accurateValue]})))),subs:e.substats.reduce((function(e,t){return""!==t.key&&e.push(t.key),e}),[])};return delete i.values[""],i}function fa(e,t){if(t.prob>1e-5||e.prob>1e-5)return t.prob*t.upAvg-e.prob*e.upAvg;var n=e.distr.gmm.reduce((function(e,t){return e+t.phi*t.mu}),0);return t.distr.gmm.reduce((function(e,t){return e+t.phi*t.mu}),0)-n}var pa={hp:6,atk:6,def:6,hp_:4,atk_:4,def_:4,eleMas:4,enerRech_:4,critRate_:3,critDMG_:3},xa=Object.values(pa).reduce((function(e,t){return e+t}));function ma(e,t){if(t.includes(e))return 0;var n=xa-t.reduce((function(e,t){var n;return e+(null!==(n=pa[t])&&void 0!==n?n:0)}),0);return pa[e]/n}var va=n(17684),ja=n(18602),Za=n(94783),ga=n(48004),ya=n(35667);var ba=50;function wa(e){var t=e.upgradeOpt,n=e.objMin,i=e.objMax,a=(0,S.useState)(!1),s=(0,r.Z)(a,2),o=s[0],c=s[1],l=(0,S.useContext)(Je.t).database,d=l._getArt(t.id);if(!d)throw new Error("artifact ".concat(t.id," not found."));var p=t.thresholds.length>1,x=d.slotKey,m=(0,S.useContext)(X.R).data,v=(0,S.useMemo)((function(){return ee.eV.map((function(e){var t;return[e,l._getArt(null!==(t=m.get(Y.ri.art[e].id).value)&&void 0!==t?t:"")]}))}),[m,l]),Z=function(e){return t.distr.gmm.reduce((function(t,n){var r=n.phi,i=n.cp,a=n.mu,s=n.sig2;return t+i*r*Yi(e,a,s)}),0)},g=t.thresholds,y=g[0],b=(0,S.useCallback)((function(e){return 100*(e-y)/y}),[y]),w=n,C=i,k=0,P=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,n=[],r=((arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)-e)/t,i=0;i<t;++i)n.push(e+i*r);return n}(w,C,500).map((function(e){var n,r=(n=e,t.distr.gmm.reduce((function(e,t){var r=t.phi,i=t.mu,a=t.sig2;return e+r*Yi(n,i,a)}),0));return k=Math.max(k,r),{x:b(e),est:r,estCons:Z(e)}}));0===k&&(k=ba/(C-w));var _={},A={};t.distr.gmm.forEach((function(e){var t,n,r=e.phi,i=e.mu,a=e.sig2,s=e.cp;a<=0&&(_[i]=(null!==(t=_[i])&&void 0!==t?t:0)+r,A[i]=(null!==(n=A[i])&&void 0!==n?n:0)+r*s)})),Object.entries(_).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return P.push({x:b(parseFloat(n)),est:i*ba/(C-w),estCons:A[n]*ba/(C-w)})})),P.sort((function(e,t){return e.x-t.x}));var O=(y-w)/(C-w),E=(0,S.useState)([]),D=(0,r.Z)(E,2),R=D[0],M=D[1],I=(0,S.useState)(-1),K=(0,r.Z)(I,2),W=K[0],z=K[1],$=(0,S.useState)(-1),q=(0,r.Z)($,2),N=q[0],L=q[1];if((0,S.useEffect)((function(){if(o){var e=ia(t),n=0,r=0,i=new Array(ba).fill(0),a=new Array(ba).fill(0),s=(C-w)/ba;e.forEach((function(e){var t=e.p,o=e.v,c=Math.min(Math.trunc((o[0]-w)/s),49);i[c]+=t,o.every((function(e,t){return 0===t||e>g[t]}))&&(a[c]+=t,o[0]>y&&(n+=t,r+=t*(o[0]-y)))})),n>0&&(r/=n);var c=i.map((function(e,t){return{x:b(w+t*s),exact:e/s,exactCons:a[t]/s}}));z(n),L(r),M(c)}}),[o,C,w,y,g,t,b]),0===R.length)for(var H=(C-w)/ba,V=0;V<ba;V++)R.push({x:b(w+V*H),exact:0,exactCons:0});var F=W>=0?W:t.prob,B=N>=0?N:t.upAvg,U=P.concat(R),J=function(e){var t=e.active;e.payload,e.label;return t?(0,G.jsxs)("div",{className:"custom-tooltip",children:[(0,G.jsx)("p",{className:"label"}),(0,G.jsxs)("p",{className:"desc",children:["prob. upgrade",W>=0?"":" (est.)",": ",(100*F).toFixed(1),"%"]}),(0,G.jsxs)("p",{className:"desc",children:["average increase",N>=0?"":" (est.)",": ",B<=0?"":"+",(100*B/y).toFixed(1),"%"]})]}):null};return(0,G.jsx)(T.Z,{children:(0,G.jsxs)(h.Z,{children:[(0,G.jsx)(wr.h,{width:"100%",aspect:2.5,children:(0,G.jsxs)(Cr.c,{data:U,margin:{top:5,right:30,left:20,bottom:20},children:[(0,G.jsx)(Pr.K,{dataKey:"x",type:"number",domain:["auto","auto"],allowDecimals:!1,tickFormatter:function(e){return"".concat(e<=0?"":"+").concat(e,"%")},children:(0,G.jsx)(va._,{value:"Relative Damage Potential",position:"insideBottom",style:{fill:"#eaebed"},offset:-10})}),(0,G.jsx)(Sr.B,{type:"number",domain:[0,k],tick:!1,children:(0,G.jsx)(va._,{value:"Probability",position:"insideLeft",angle:-90,style:{fill:"#eaebed"}})}),(0,G.jsx)(Ar.D,{verticalAlign:"top",height:36}),(0,G.jsx)("defs",{children:(0,G.jsxs)("linearGradient",{id:"splitOpacity".concat(t.id),x1:"0",y1:"0",x2:O,y2:"0",children:[(0,G.jsx)("stop",{offset:1,stopColor:"orange",stopOpacity:0}),(0,G.jsx)("stop",{offset:0,stopColor:"orange",stopOpacity:1})]})}),(0,G.jsx)(Er.x,{dataKey:"dne",stroke:"red",name:"Current Damage"}),p&&!o&&(0,G.jsx)(ja.u,{type:"monotone",dataKey:"est",stroke:"grey",dot:!1,fill:"grey",legendType:"none",tooltipType:"none",opacity:.5,activeDot:!1}),p&&o&&(0,G.jsx)(ja.u,{type:"stepAfter",dataKey:"exact",dot:!1,legendType:"none",tooltipType:"none",opacity:.7,activeDot:!1,fill:"grey",stroke:"grey"}),(0,G.jsx)(ja.u,{type:"monotone",dataKey:"estCons",stroke:"orange",dot:!1,fill:"url(#splitOpacity".concat(t.id,")"),opacity:.5,name:"Estimated Distribution",activeDot:!1}),o&&(0,G.jsx)(ja.u,{type:"stepAfter",dataKey:"exactCons",dot:!1,opacity:.7,name:"Exact".concat(p?" Constrained":""," Distribution (Histogram)"),activeDot:!1}),(0,G.jsx)(Za.d,{x:b(y),stroke:"red",strokeDasharray:"3 3",name:"Current Damage"}),(0,G.jsx)(ga.q,{x:b(y+B),y:(Z(y+B)||k)/2,shape:(0,G.jsx)("circle",{radius:1,opacity:.5})}),(0,G.jsx)(ya.u,{content:(0,G.jsx)(J,{}),cursor:!1})]})},t.id),(0,G.jsx)(f.ZP,{direction:"row",container:!0,spacing:.75,columns:12,children:v.map((function(e){var n=(0,r.Z)(e,2),i=n[0],a=n[1];return i!==x?(0,G.jsx)(f.ZP,{item:!0,xs:1,children:(0,G.jsx)(Jr.Z,{slotKey:i,artifactObj:a})},"".concat(i,"_").concat(t.id)):(0,G.jsx)(f.ZP,{item:!0,xs:1,children:(0,G.jsx)(j.Z,{variant:"contained",style:{height:"100%",width:"100%"},onClick:function(){return c(!0)},startIcon:(0,G.jsx)(u.Z,{sx:{position:"absolute",width:"70%",height:"70%",left:"50%",top:"50%",transform:"translate(-50%, -50%)",opacity:.7},component:"img",src:tt.Z.slot[i]}),sx:{minWidth:0}})},"".concat(i,"_").concat(t.id))}))}),(0,G.jsx)("br",{}),(0,G.jsx)("span",{children:"Click above to calculate Exact upgrade distribution"}),(0,G.jsx)("br",{})]})})}function Ca(){var e,t=(0,S.useContext)(X.R),n=t.character,i=t.character.key,a=(0,S.useContext)(Je.t).database,s=(0,Oe.Z)(i),o=(0,Ee.Z)(),c=(0,S.useMemo)((function(){return!a._getArts().length}),[a]),l=(0,Sn.ZP)(i),p=l.buildSetting,x=l.buildSettingDispatch,m=p.optimizationTarget,v=(0,De.Z)(i),Z=null!==(e=null===v||void 0===v?void 0:v[i])&&void 0!==e?e:{},g=Z.characterSheet,y=Z.target,b=(0,S.useState)(void 0),w=(0,r.Z)(b,2),C=w[0],k=w[1],P=(0,S.useState)(!0),_=(0,r.Z)(P,2),O=_[0],D=_[1],R=(0,S.useState)(!1),M=(0,r.Z)(R,2),I=M[0],K=M[1],W=(0,S.useState)(!1),z=(0,r.Z)(W,2),N=z[0],L=z[1],H=(0,S.useCallback)((function(e,t,n){var r=e.query,i=e.arts,s=a._getArts().filter((function(e){return 5===e.rarity})).map((function(e){return ha(e,20)})),o={};s.forEach((function(e){return o[e.id]=e}));var c=i.slice(0,t),l=i.slice(t),u=0,d=Math.min(n-t+5,l.length);do{for(;u<d;u++){var h=o[l[u].id];h&&(l[u]=ca(r,h,!0,I))}for(l.sort(fa),u=0;u<d&&"fast"!==l[u].evalMode;u++);}while(u<d);return{query:r,arts:[].concat((0,Ze.Z)(c),(0,Ze.Z)(l))}}),[a,I]),V=(0,S.useState)(0),F=(0,r.Z)(V,2),B=F[0],U=F[1],J=(0,S.useRef)(null),Q=(0,S.useMemo)((function(){if(!C)return{artifactsToShow:[],numPages:0,toShow:0,minObj0:0,maxObj0:0};var e=Math.ceil(C.arts.length/5),t=(0,we.uZ)(B,0,e-1),n=C.arts.slice(5*t,5*(t+1)),r=n.length>0?n[0].thresholds[0]:0;return{artifactsToShow:n,numPages:e,currentPageIndex:t,minObj0:n.reduce((function(e,t){return Math.min(t.distr.lower,e)}),r),maxObj0:n.reduce((function(e,t){return Math.max(t.distr.upper,e)}),r)}}),[C,5,B]),te=Q.artifactsToShow,ne=Q.numPages,re=Q.currentPageIndex,ie=Q.minObj0,ae=Q.maxObj0,se=(0,S.useCallback)((function(e,t){var n;if(C){null===(n=J.current)||void 0===n||n.scrollIntoView({behavior:"smooth"});var r=H(C,5*(re+1),5*t);k(r),U(t-1)}}),[U,k,J,re,5,C,H]),oe=(0,S.useCallback)((0,ge.Z)((0,je.Z)().mark((function e(){var t,n,s,o,c,l,u,d,h,f,x,m,v,j,Z,g,b,w,C;return(0,je.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=p.statFilters,l=p.optimizationTarget,u=p.mainStatKeys,i&&l){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,De.V)(a,i,0,[]);case 5:if(d=e.sent){e.next=8;break}return e.abrupt("return");case 8:if(h=null===(t=(0,wt.Qo)(d.teamData,i)[i])||void 0===t?void 0:t.target.data[0]){e.next=11;break}return e.abrupt("return");case 11:if(Object.assign(h,(0,wt.b3)([h,ui])),f=(0,we.Hm)(null!==(n=h.display)&&void 0!==n?n:{},l)){e.next=15;break}return e.abrupt("return");case 15:k(void 0),U(0),x=Object.entries(c).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return n.endsWith("_")&&(i/=100),{value:Y.ri.total[n],minimum:i}})).filter((function(e){return e.value&&e.minimum>-1/0})),console.log(u),m=a._getArts().filter((function(e){return 5===e.rarity})).filter((function(e){return O||20!==e.level})).filter((function(e){var t,n;return!N||!(null!==(t=u[e.slotKey])&&void 0!==t&&t.length)||(null===(n=u[e.slotKey])||void 0===n?void 0:n.includes(e.mainStatKey))})).map((function(e){return ha(e,20)})),v=null!==(s=null===(o=a._getChar(i))||void 0===o?void 0:o.equippedArtifacts)&&void 0!==s?s:{},j=Object.assign.apply(Object,[{}].concat((0,Ze.Z)(ee.eV.map((function(e){var t,n=a._getArt(null!==(t=v[e])&&void 0!==t?t:"");return n?(0,cn.Z)({},e,ha(n)):(0,cn.Z)({},e,void 0)}))))),Z={},m.forEach((function(e){return Z[e.id]=e})),console.log({equippedArts:v}),g=[f].concat((0,Ze.Z)(x.map((function(e){return e.value})))),g=(0,sn.tL)(g,h,(function(e){return"dyn"!==(0,r.Z)(e.path,1)[0]})),b=da(g,x.map((function(e){return e.minimum})),j,y),w=(w=m.map((function(e){return ca(b,e,!1,I)}))).sort((function(e,t){return t.prob*t.upAvg-e.prob*e.upAvg})),C=H(C={query:b,arts:w},0,5),k(C),console.log("result",C);case 34:case"end":return e.stop()}}),e)}))),[O,I,N,i,p,y,a,k,U,H]),ce=(0,S.useMemo)((function(){return n&&y&&g&&v&&{data:y,characterSheet:g,character:n,mainStatAssumptionLevel:0,teamData:v,characterDispatch:s}}),[y,g,n,v,s]);return(0,G.jsxs)(u.Z,{display:"flex",flexDirection:"column",gap:1,children:[c&&(0,G.jsxs)(Qt.Z,{severity:"warning",variant:"filled",children:[" Opps! It looks like you haven't added any artifacts to GO yet! You should go to the ",(0,G.jsx)(en.Z,{component:A.rU,to:"/artifact",children:"Artifacts"})," page and add some!"]}),ce&&(0,G.jsx)(X.R.Provider,{value:ce,children:(0,G.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,G.jsxs)(f.ZP,{item:!0,xs:12,sm:6,lg:3,display:"flex",flexDirection:"column",gap:1,children:[(0,G.jsx)(u.Z,{children:(0,G.jsx)(rn.Z,{characterKey:i,onClickTeammate:o})}),(0,G.jsx)(xr,{})]}),(0,G.jsxs)(f.ZP,{item:!0,xs:12,sm:6,lg:9,display:"flex",flexDirection:"column",gap:1,children:[(0,G.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,G.jsxs)(f.ZP,{item:!0,lg:4,display:"flex",flexDirection:"column",gap:1,children:[(0,G.jsx)(T.Z,{children:(0,G.jsxs)(h.Z,{children:[(0,G.jsx)("span",{children:"Optimization Target: "}),(0,G.jsx)($r,{optimizationTarget:m,setTarget:function(e){return x({optimizationTarget:e})},disabled:!1})]})}),(0,G.jsx)(T.Z,{children:(0,G.jsx)(h.Z,{children:(0,G.jsx)(an.Z,{disabled:!1})})}),N&&(0,G.jsx)(T.Z,{children:(0,G.jsx)(h.Z,{children:(0,G.jsx)(Kr,{disabled:!1})})})]}),(0,G.jsxs)(f.ZP,{item:!0,lg:8,display:"flex",flexDirection:"column",gap:1,children:[(0,G.jsx)(T.Z,{children:(0,G.jsx)(h.Z,{children:(0,G.jsx)(ur,{disabled:!1})})}),(0,G.jsx)(T.Z,{children:(0,G.jsx)(h.Z,{children:(0,G.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(j.Z,{startIcon:O?(0,G.jsx)(Xt.Z,{}):(0,G.jsx)(Yt.Z,{}),color:O?"success":"secondary",onClick:function(){return D(!O)},children:"show lvl 20"})}),(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(j.Z,{startIcon:I?(0,G.jsx)(Xt.Z,{}):(0,G.jsx)(Yt.Z,{}),color:I?"success":"secondary",onClick:function(){return K(!I)},children:"compute 4th sub"})}),(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(j.Z,{startIcon:N?(0,G.jsx)(Xt.Z,{}):(0,G.jsx)(Yt.Z,{}),color:N?"success":"secondary",onClick:function(){return L(!N)},children:"filter main stats"})})]})})})]})]}),(0,G.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,G.jsx)(f.ZP,{item:!0,lg:12,children:(0,G.jsx)(T.Z,{children:(0,G.jsx)(h.Z,{children:(0,G.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(j.Z,{disabled:!i||!m||!(0,we.Hm)(null===y||void 0===y?void 0:y.getDisplay(),m),color:i?"success":"warning",onClick:oe,startIcon:(0,G.jsx)(q.G,{icon:$.lTt}),children:"Calc Upgrade Priority"})}),(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(pe,{size:"small"})}),(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(fe,{size:"small"})})]})})})}),ne>1&&(0,G.jsx)(E.Z,{children:(0,G.jsx)(h.Z,{children:(0,G.jsxs)(f.ZP,{container:!0,children:[(0,G.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,G.jsx)(Gi.Z,{count:ne,page:re+1,onChange:se})}),(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(ka,{numShowing:te.length,total:null===C||void 0===C?void 0:C.arts.length})})]})})}),(0,G.jsx)(f.ZP,{item:!0,lg:12,spacing:1,children:(0,G.jsxs)(f.ZP,{container:!0,display:"flex",flexDirection:"column",gap:1,children:[c&&(0,G.jsxs)(Qt.Z,{severity:"info",variant:"filled",children:["Looks like you haven't added any artifacts yet. If you want, there are ",(0,G.jsx)(en.Z,{color:"warning.main",component:A.rU,to:"/scanner",children:"automatic scanners"})," that can speed up the import process!"]}),(0,G.jsx)(S.Suspense,{fallback:(0,G.jsx)(d.Z,{variant:"rectangular",sx:{width:"100%",height:600,minHeight:5e3}}),children:te.map((function(e){return(0,G.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,G.jsx)(f.ZP,{item:!0,xs:5,sm:4,md:4,lg:3,xl:3,children:(0,G.jsx)(Xe.Z,{artifactId:e.id,editor:!0})}),(0,G.jsx)(f.ZP,{item:!0,xs:7,sm:8,md:8,lg:9,xl:9,children:(0,G.jsx)(wa,{upgradeOpt:e,objMax:ae,objMin:ie})})]},e.id+"asdfsf")}))})]})}),ne>1&&(0,G.jsx)(E.Z,{children:(0,G.jsx)(h.Z,{children:(0,G.jsxs)(f.ZP,{container:!0,children:[(0,G.jsx)(f.ZP,{item:!0,flexGrow:1,children:(0,G.jsx)(Gi.Z,{count:ne,page:re+1,onChange:se})}),(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(ka,{numShowing:te.length,total:null===C||void 0===C?void 0:C.arts.length})})]})})})]})]})]})})]})}function ka(e){var t=e.numShowing,n=e.total;return(0,G.jsx)(x.Z,{color:"text.secondary",children:(0,G.jsxs)(sr.c,{i18nKey:"showingNum",count:t,value:n,children:["Showing ",(0,G.jsx)("b",{children:{count:t}})," out of ",{value:n}," Artifacts"]})})}function Pa(){var e,t=(0,O.s0)(),n=(0,O.UO)().characterKey;return!ee.IV.includes(null!==(e=n)&&void 0!==e?e:"")?(0,G.jsx)(O.Fg,{to:"/characters"}):(0,G.jsx)(u.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:n&&(0,G.jsx)(S.Suspense,{fallback:(0,G.jsx)(d.Z,{variant:"rectangular",width:"100%",height:1e3}),children:(0,G.jsx)(Sa,{characterKey:n,onClose:function(){return t("/characters")}})})})}function Sa(e){var t,n,r,i=e.characterKey,a=e.newteamData,s=e.mainStatAssumptionLevel,o=void 0===s?0:s,c=e.onClose,l=(0,De.Z)(i,o),u=null!==(t=null===l||void 0===l?void 0:l[i])&&void 0!==t?t:{},m=u.character,v=u.characterSheet,j=u.target,Z=(null!==(n=(0,O.bS)({path:"/characters/:charKey/:tab",end:!1}))&&void 0!==n?n:{params:{tab:"overview"}}).params.tab,g=void 0===Z?"overview":Z,y=(0,_.$)().t;(0,Re.Z)("".concat(y("char_".concat(i,"_gen:name"))," - ").concat(y("page_character:tabs.".concat(g))));var b=(0,Oe.Z)(null!==(r=null===m||void 0===m?void 0:m.key)&&void 0!==r?r:""),w=(null!==m&&void 0!==m?m:{}).compareData,C=(0,S.useMemo)((function(){if(l&&m&&v&&j)return{character:m,characterSheet:v,mainStatAssumptionLevel:o,data:a?a[i].target:j,teamData:a||l,oldData:w&&a?j:void 0,characterDispatch:b}}),[m,v,o,a,j,l,b,i,w]);return l&&m&&v&&j&&C?(0,G.jsx)(E.Z,{children:(0,G.jsx)(X.R.Provider,{value:C,children:(0,G.jsxs)(h.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,G.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(Aa,{})}),(0,G.jsx)(f.ZP,{item:!0,flexGrow:1}),!!o&&(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(p.Z,{sx:{p:1,bgcolor:function(e){return e.palette.warning.dark}},children:(0,G.jsx)(x.Z,{children:(0,G.jsxs)("strong",{children:["Assume Main Stats are Level ",o]})})})}),!!c&&(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(M.Z,{onClick:c})})]}),(0,G.jsx)(T.Z,{children:(0,G.jsx)(_a,{tab:g})}),(0,G.jsx)(Oa,{}),(0,G.jsx)(re,{}),(0,G.jsx)(S.Suspense,{fallback:(0,G.jsx)(d.Z,{variant:"rectangular",width:"100%",height:500}),children:(0,G.jsxs)(O.Z5,{children:[(0,G.jsx)(O.AW,{index:!0,element:(0,G.jsx)(gi,{})}),(0,G.jsx)(O.AW,{path:"/talent",element:(0,G.jsx)(Di,{})}),(0,G.jsx)(O.AW,{path:"/equip",element:(0,G.jsx)(Ft,{})}),(0,G.jsx)(O.AW,{path:"/teambuffs",element:(0,G.jsx)($i,{})}),(0,G.jsx)(O.AW,{path:"/optimize",element:(0,G.jsx)(hi,{})}),(0,G.jsx)(O.AW,{path:"/upgradeOpt",element:(0,G.jsx)(Ca,{})})]})}),(0,G.jsx)(T.Z,{children:(0,G.jsx)(_a,{tab:g})})]})})}):(0,G.jsx)(G.Fragment,{})}function _a(e){var t=e.tab,n=(0,_.$)("page_character").t;return(0,G.jsxs)(m.Z,{value:t,variant:"scrollable",allowScrollButtonsMobile:!0,sx:{"& .MuiTab-root:hover":{transition:"background-color 0.25s ease",backgroundColor:"rgba(255,255,255,0.1)"}},children:[(0,G.jsx)(v.Z,{sx:{minWidth:"15%"},value:"overview",label:n("tabs.overview"),icon:(0,G.jsx)(i.Z,{}),component:A.rU,to:""}),(0,G.jsx)(v.Z,{sx:{minWidth:"15%"},value:"talent",label:n("tabs.talent"),icon:(0,G.jsx)(a.Z,{}),component:A.rU,to:"talent"}),(0,G.jsx)(v.Z,{sx:{minWidth:"15%"},value:"equip",label:n("tabs.equip"),icon:(0,G.jsx)(s.Z,{}),component:A.rU,to:"equip"}),(0,G.jsx)(v.Z,{sx:{minWidth:"15%"},value:"teambuffs",label:n("tabs.teambuffs"),icon:(0,G.jsx)(o.Z,{}),component:A.rU,to:"teambuffs"}),(0,G.jsx)(v.Z,{sx:{minWidth:"15%"},value:"optimize",label:n("tabs.optimize"),icon:(0,G.jsx)(c.Z,{}),component:A.rU,to:"optimize"}),(0,G.jsx)(v.Z,{sx:{minWidth:"15%"},value:"upgradeOpt",label:n("tabs.upgradeOpt"),icon:(0,G.jsx)(c.Z,{}),component:A.rU,to:"upgradeOpt"})]})}function Aa(){var e,t=(0,_.$)("page_character").t,n=(0,S.useContext)(X.R),i=n.character,a=n.characterSheet,s=n.characterDispatch,o=(0,S.useState)(!1),c=(0,r.Z)(o,2),l=c[0],u=c[1],d=(0,Ee.Z)(),h=(0,S.useCallback)((function(e){e=(0,we.uZ)(e,1,90);var t=me.SJ.findIndex((function(t){return e<=t}));s({level:e,ascension:t})}),[s]),p=(0,S.useCallback)((function(){if(i){var e=i.level,t=void 0===e?1:e,n=i.ascension,r=void 0===n?0:n,a=me.SJ.findIndex((function(e){return 90!==t&&t===e}));s(r===a?{ascension:r+1}:{ascension:a})}}),[s,i]),x=i.elementKey,m=void 0===x?"anemo":x,v=i.level,y=void 0===v?1:v,b=i.ascension,w=void 0===b?0:b;return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(D.w,{show:l,onHide:function(){return u(!1)},onSelect:d}),(0,G.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(j.Z,{color:"info",onClick:function(){return u(!0)},startIcon:(0,G.jsx)(R.Z,{src:null===a||void 0===a?void 0:a.thumbImgSide}),children:null!==(e=null===a||void 0===a?void 0:a.name)&&void 0!==e?e:t("selectCharacter")})}),(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsxs)(Z.Z,{sx:{bgcolor:function(e){return e.palette.contentDark.main}},children:[(null===a||void 0===a?void 0:a.sheet)&&"talents"in(null===a||void 0===a?void 0:a.sheet)&&(0,G.jsx)(W.Z,{title:(0,G.jsx)("strong",{children:(0,G.jsx)(I.Z,{color:m,children:(0,ve.Oy)("element.".concat(m))})}),children:Object.keys(a.sheet.talents).map((function(e){return(0,G.jsx)(g.Z,{selected:m===e,disabled:m===e,onClick:function(){return s({elementKey:e})},children:(0,G.jsx)("strong",{children:(0,G.jsx)(I.Z,{color:e,children:(0,ve.Oy)("element.".concat(e))})})},e)}))}),(0,G.jsx)(K.CC,{children:(0,G.jsx)(K.ZP,{onChange:h,value:y,startAdornment:"Lv. ",inputProps:{min:1,max:90,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2},disabled:!a})}),(0,G.jsx)(j.Z,{sx:{pl:1},disabled:!(0,me.ek)(y)||!a,onClick:p,children:(0,G.jsxs)("strong",{children:["/ ",me.SJ[w]]})}),(0,G.jsx)(W.Z,{title:t("selectLevel"),disabled:!a,children:me.D4.map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1],a=n===me.SJ[i]?"Lv. ".concat(n):"Lv. ".concat(n,"/").concat(me.SJ[i]),o=n===y&&i===w;return(0,G.jsx)(g.Z,{selected:o,disabled:o,onClick:function(){return s({level:n,ascension:i})},children:a},"".concat(n,"/").concat(i))}))})]})})]})]})}function Oa(){var e=(0,_.$)("page_character").t,t=(0,S.useState)(!1),n=(0,r.Z)(t,2),i=n[0],a=n[1],s=(0,S.useCallback)((function(){return a(!i)}),[a,i]);return(0,G.jsxs)(T.Z,{children:[(0,G.jsxs)(h.Z,{sx:{display:"flex",gap:1},children:[(0,G.jsxs)(f.ZP,{container:!0,spacing:1,children:[(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(pe,{size:"small"})}),(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(de,{})}),(0,G.jsx)(f.ZP,{item:!0,children:(0,G.jsx)(fe,{size:"small"})})]}),(0,G.jsxs)(u.Z,{display:"flex",gap:1,children:[(0,G.jsxs)(u.Z,{children:[(0,G.jsxs)(x.Z,{variant:"subtitle2",children:[e("formulas")," ","&"]}),(0,G.jsx)(x.Z,{variant:"subtitle2",children:e("calculations")})]}),(0,G.jsx)(te.Z,{expand:i,onClick:s,"aria-expanded":i,"aria-label":"show more",size:"small",sx:{p:0},children:(0,G.jsx)(l.Z,{})})]})]}),(0,G.jsx)(y.Z,{in:i,timeout:"auto",unmountOnExit:!0,children:(0,G.jsx)(h.Z,{sx:{pt:0},children:(0,G.jsx)(Ea,{})})})]})}function Ea(){var e=Ae((0,S.useContext)(X.R).data);return(0,G.jsx)(S.Suspense,{fallback:(0,G.jsx)(d.Z,{variant:"rectangular",width:"100%",height:1e3}),children:(0,G.jsx)(u.Z,{sx:{mr:-1,mb:-1},children:e.map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,G.jsx)(Ta,{displayNs:i,sectionKey:n},n)}))})})}function Ta(e){var t=e.sectionKey,n=e.displayNs,i=(0,S.useContext)(X.R).data,a=(0,Te.Z)(Se(i,t),[i,t]);if(!a)return null;if(Object.entries(n).every((function(e){var t=(0,r.Z)(e,2);t[0];return t[1].isEmpty})))return null;var s=a.title,o=a.icon,c=a.action;return(0,G.jsxs)(E.Z,{sx:{mb:1},children:[(0,G.jsx)(b.Z,{avatar:o&&(0,G.jsx)(xe.Z,{size:2,sx:{m:-1},src:o}),title:s,action:c,titleTypographyProps:{variant:"subtitle1"}}),(0,G.jsx)(w.Z,{}),(0,G.jsx)(h.Z,{children:Object.entries(n).map((function(e){var t,n=(0,r.Z)(e,2),i=n[0],a=n[1];return!a.isEmpty&&(0,G.jsxs)(C.Z,{sx:{bgcolor:"contentLight.main"},children:[(0,G.jsx)(k.Z,{expandIcon:(0,G.jsx)(l.Z,{}),children:(0,G.jsxs)(x.Z,{children:[(0,G.jsx)(I.Z,{color:a.info.variant,children:Q.ZP.get(null!==(t=a.info.key)&&void 0!==t?t:"")})," ",(0,G.jsx)("strong",{children:(0,Q.EC)(a.value,a.unit)})]})}),(0,G.jsx)(P.Z,{children:a.formulas.map((function(e,t){return(0,G.jsx)(x.Z,{children:e},t)}))})]},i)}))})]})}},90543:function(e,t,n){"use strict";n.d(t,{Z:function(){return W}});var r,i=n(30168),a=n(53174),s=n(54483),o=n(40117),c=n(62002),l=n(63204),u=n(66647),d=n(68870),h=n(47047),f=n(13400),p=n(20890),x=n(39504),m=n(2199),v=n(40165),j=n(24518),Z=n(72791),g=n(22020),y=n(2191),b=n(71310),w=n(31038),C=n(40020),k=n(20005),P=n(55942),S=n(10157),_=n(75545),A=n(2139),O=n(66218),E=n(56928),T=n(26138),D=n(73036),R=n(79406),M=n(42320),I=n(74480),K=n(80184);function W(e){var t,n=e.weaponId,W=e.onClick,z=e.onEdit,$=e.onDelete,q=e.canEquip,N=void 0!==q&&q,L=e.extraButtons,H=(0,g.$)(["page_weapon","ui"]).t,V=(0,Z.useContext)(E.t).database,F=(0,I.Z)(n),G=(0,M.Z)(null!==F&&void 0!==F&&F.key?O.Z.get(F.key):void 0,[null===F||void 0===F?void 0:F.key]),B=(0,Z.useCallback)((function(e){return e.weaponTypeKey===(null===G||void 0===G?void 0:G.weaponType)}),[G]),U=(0,Z.useCallback)((function(e){return(0,K.jsx)(u.Z,{onClick:function(){return null===W||void 0===W?void 0:W(n)},children:e})}),[W,n]),J=(0,Z.useCallback)((function(e){return(0,K.jsx)(d.Z,{children:e})}),[]),X=(0,Z.useCallback)((function(e){return V.setWeaponLocation(n,e)}),[V,n]),Y=(0,Z.useMemo)((function(){return G&&F&&(0,D.mP)([G.data,(0,D.v0)(F)])}),[G,F]);if(!F||!G||!Y)return null;var Q=F.level,ee=F.ascension,te=F.refinement,ne=F.id,re=F.location,ie=void 0===re?"":re,ae=F.lock,se=Y.get(T.ri.weapon.type).value,oe=[T.ri.weapon.main,T.ri.weapon.sub,T.ri.weapon.sub2].map((function(e){return Y.get(e)})),ce=ee<2?null===G||void 0===G?void 0:G.img:null===G||void 0===G?void 0:G.imgAwaken;return(0,K.jsx)(Z.Suspense,{fallback:(0,K.jsx)(h.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:(0,K.jsxs)(b.Z,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,K.jsxs)(k.Z,{condition:!!W,wrapper:U,falseWrapper:J,children:[(0,K.jsxs)(d.Z,{className:"grad-".concat(G.rarity,"star"),sx:{position:"relative",pt:2,px:2},children:[!W&&(0,K.jsx)(f.Z,{color:"primary",onClick:function(){return V.updateWeapon({lock:!ae},ne)},sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:ae?(0,K.jsx)(o.Z,{}):(0,K.jsx)(c.Z,{})}),(0,K.jsxs)(d.Z,{sx:{position:"relative",zIndex:1},children:[(0,K.jsxs)(d.Z,{component:"div",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,K.jsx)(P.Z,{sx:{fontSize:"1.5em"},src:null===(t=y.Z.weaponTypes)||void 0===t?void 0:t[se]}),(0,K.jsx)(p.Z,{noWrap:!0,sx:{textAlign:"center",backgroundColor:"rgba(100,100,100,0.35)",borderRadius:"1em",px:1},children:(0,K.jsx)("strong",{children:G.name})})]}),(0,K.jsxs)(p.Z,{component:"span",variant:"h5",children:["Lv. ",Q]}),(0,K.jsxs)(p.Z,{component:"span",variant:"h5",color:"text.secondary",children:["/",A.SJ[ee]]}),(0,K.jsxs)(p.Z,{variant:"h6",children:["Refinement ",(0,K.jsx)("strong",{children:te})]}),(0,K.jsx)(p.Z,{children:(0,K.jsx)(S.t,{stars:G.rarity,colored:!0})})]}),(0,K.jsx)(d.Z,{sx:{height:"100%",position:"absolute",right:0,top:0},children:(0,K.jsx)(d.Z,{component:"img",src:null!==ce&&void 0!==ce?ce:"",width:"auto",height:"100%",sx:{float:"right"}})})]}),(0,K.jsx)(x.Z,{children:oe.map((function(e){if(!e.info.key)return null;var t=(0,R.EC)(e.value,e.unit,e.unit?void 0:0);return(0,K.jsxs)(d.Z,{sx:{display:"flex"},children:[(0,K.jsxs)(p.Z,{flexGrow:1,children:[_.Z[e.info.key]," ",R.ZP.get(e.info.key)]}),(0,K.jsx)(p.Z,{children:t})]},e.info.key)}))})]}),(0,K.jsxs)(d.Z,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[N?(0,K.jsx)(w.Z,{size:"small",sx:{flexGrow:1},disable:function(e){return""===e},showDefault:!0,defaultIcon:(0,K.jsx)(l.Z,{}),defaultText:H("ui:inventory"),value:ie,onChange:X,filter:B,disableClearable:!0}):(0,K.jsx)(C.Z,{location:ie}),(0,K.jsxs)(m.Z,{children:[!!z&&(0,K.jsx)(v.Z,{title:(0,K.jsx)(p.Z,{children:H(r||(r=(0,i.Z)(["page_weapon:edit"])))}),placement:"top",arrow:!0,children:(0,K.jsx)(j.Z,{color:"info",onClick:function(){return z(ne)},children:(0,K.jsx)(s.G,{icon:a.Xcf,className:"fa-fw"})})}),!!$&&(0,K.jsx)(j.Z,{color:"error",onClick:function(){return $(ne)},disabled:!!ie||ae,children:(0,K.jsx)(s.G,{icon:a.I7k,className:"fa-fw"})}),L]})]})]})})}},74480:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(29439),i=n(72791),a=n(56928);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,i.useContext)(a.t),n=t.database,s=(0,i.useState)(n._getWeapon(e)),o=(0,r.Z)(s,2),c=o[0],l=o[1];return(0,i.useEffect)((function(){return l(n._getWeapon(e))}),[n,e]),(0,i.useEffect)((function(){return e?n.followWeapon(e,l):void 0}),[e,l,n]),c}},52771:function(e,t,n){"use strict";n.d(t,{JR:function(){return l},e6:function(){return u},g4:function(){return a},mf:function(){return o},vL:function(){return i},yJ:function(){return s}});var r=n(60393),i=1e3,a=60*i,s=60*a,o=24*s;function c(e){var t=e%1e3,n=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60);return{hours:Math.floor(e/36e5),minutes:r,seconds:n,milliseconds:t}}function l(e){var t=c(e),n=t.hours,i=t.minutes,a=t.seconds,s="Minutes";return n&&(s="Hours"),"".concat(n?"".concat(n,":"):"").concat((0,r.H_)(i,"0",2),":").concat((0,r.H_)(a,"0",2)," ").concat(s)}function u(e){var t=c(e),n=t.hours,i=t.minutes,a=t.seconds,s=t.milliseconds,o="Minutes";return n&&(o="Hours"),"".concat(n?"".concat(n,":"):"").concat((0,r.H_)(i,"0",2),":").concat((0,r.H_)(a,"0",2),".").concat((0,r.H_)(s,"0",3)," ").concat(o)}},66045:function(e,t,n){"use strict";n.d(t,{Ol:function(){return r},Sn:function(){return i},Xg:function(){return a}});var r=["level","rarity"];function i(e){return{level:{getValue:function(e){var t;return null!==(t=e.level)&&void 0!==t?t:0},tieBreaker:"rarity"},rarity:{getValue:function(t){var n;return null===e||void 0===e||null===(n=e[t.key])||void 0===n?void 0:n.rarity},tieBreaker:"level"}}}function a(e){return{rarity:function(t,n){var r;return n.includes(null===e||void 0===e||null===(r=e[t.key])||void 0===r?void 0:r.rarity)},weaponType:function(t,n){var r;return n.includes(null===e||void 0===e||null===(r=e[t.key])||void 0===r?void 0:r.weaponType)}}}},61503:function(e,t,n){"use strict";n.d(t,{Y:function(){return l}}),e=n.hmd(e);var r,i,a,s,o,c,l="undefined"!==typeof l?l:{},u=Object.assign,d=u({},l),h=[],f="object"===typeof window,p="function"===typeof importScripts,x="object"===typeof process&&"object"===typeof process.versions&&"string"===typeof process.versions.node,m="";x?(m=p?n(10699).dirname(m)+"/":"//",c=function(){o||(s=n(21678),o=n(10699))},r=function(e,t){return c(),e=o.normalize(e),s.readFileSync(e,t?null:"utf8")},a=function(e){var t=r(e,!0);return t.buffer||(t=new Uint8Array(t)),t},i=function(e,t,n){c(),e=o.normalize(e),s.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),h=process.argv.slice(2),e.exports=l,process.on("uncaughtException",(function(e){if(!(e instanceof bt))throw e})),process.on("unhandledRejection",(function(e){throw e})),function(e,t){if(V())throw process.exitCode=e,t;var n;(n=t)instanceof bt||v("exiting due to exception: "+n),process.exit(e)},l.inspect=function(){return"[Emscripten Module object]"}):(f||p)&&(p?m=self.location.href:"undefined"!==typeof document&&document.currentScript&&(m=document.currentScript.src),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",r=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},p&&(a=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),i=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});l.print||console.log.bind(console);var v=l.printErr||console.warn.bind(console);u(l,d),d=null,l.arguments&&(h=l.arguments),l.thisProgram&&l.thisProgram,l.quit&&l.quit;var j;l.wasmBinary&&(j=l.wasmBinary);var Z,g=l.noExitRuntime||!0;"object"!==typeof WebAssembly&&U("no native wasm support detected");var y=!1;var b="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;function w(e,t){return e?function(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.subarray&&b)return b.decode(e.subarray(t,i));for(var a="";t<i;){var s=e[t++];if(128&s){var o=63&e[t++];if(192!=(224&s)){var c=63&e[t++];if((s=224==(240&s)?(15&s)<<12|o<<6|c:(7&s)<<18|o<<12|c<<6|63&e[t++])<65536)a+=String.fromCharCode(s);else{var l=s-65536;a+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else a+=String.fromCharCode((31&s)<<6|o)}else a+=String.fromCharCode(s)}return a}(S,e,t):""}function C(e,t,n){return function(e,t,n,r){if(!(r>0))return 0;for(var i=n,a=n+r-1,s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++s)),o<=127){if(n>=a)break;t[n++]=o}else if(o<=2047){if(n+1>=a)break;t[n++]=192|o>>6,t[n++]=128|63&o}else if(o<=65535){if(n+2>=a)break;t[n++]=224|o>>12,t[n++]=128|o>>6&63,t[n++]=128|63&o}else{if(n+3>=a)break;t[n++]=240|o>>18,t[n++]=128|o>>12&63,t[n++]=128|o>>6&63,t[n++]=128|63&o}}return t[n]=0,n-i}(e,S,t,n)}var k,P,S,_,A,O,E,T,D,R="undefined"!==typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function M(e,t){for(var n=e,r=n>>1,i=r+t/2;!(r>=i)&&A[r];)++r;if((n=r<<1)-e>32&&R)return R.decode(S.subarray(e,n));for(var a="",s=0;!(s>=t/2);++s){var o=_[e+2*s>>1];if(0==o)break;a+=String.fromCharCode(o)}return a}function I(e,t,n){if(void 0===n&&(n=2147483647),n<2)return 0;for(var r=t,i=(n-=2)<2*e.length?n/2:e.length,a=0;a<i;++a){var s=e.charCodeAt(a);_[t>>1]=s,t+=2}return _[t>>1]=0,t-r}function K(e){return 2*e.length}function W(e,t){for(var n=0,r="";!(n>=t/4);){var i=O[e+4*n>>2];if(0==i)break;if(++n,i>=65536){var a=i-65536;r+=String.fromCharCode(55296|a>>10,56320|1023&a)}else r+=String.fromCharCode(i)}return r}function z(e,t,n){if(void 0===n&&(n=2147483647),n<4)return 0;for(var r=t,i=r+n-4,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343)s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a);if(O[t>>2]=s,(t+=4)+4>i)break}return O[t>>2]=0,t-r}function $(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&++n,t+=4}return t}l.INITIAL_MEMORY;var q,N=[],L=[],H=[];function V(){return g||!1}var F=0,G=null,B=null;function U(e){throw l.onAbort&&l.onAbort(e),v(e="Aborted("+e+")"),y=!0,1,e+=". Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}l.preloadedImages={},l.preloadedAudios={};var J,X;function Y(e){return e.startsWith("data:application/octet-stream;base64,")}function Q(e){return e.startsWith("file://")}function ee(e){try{if(e==J&&j)return new Uint8Array(j);if(a)return a(e);throw"both async and sync fetching of the wasm failed"}catch(v){U(v)}}function te(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"===typeof n?void 0===t.arg?re(n)():re(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(l)}}Y(J="assembly.wasm")||(X=J,J=l.locateFile?l.locateFile(X,m):m+X);var ne=[];function re(e){var t=ne[e];return t||(e>=ne.length&&(ne.length=e+1),ne[e]=t=q.get(e)),t}function ie(e){this.excPtr=e,this.ptr=e-16,this.set_type=function(e){O[this.ptr+4>>2]=e},this.get_type=function(){return O[this.ptr+4>>2]},this.set_destructor=function(e){O[this.ptr+8>>2]=e},this.get_destructor=function(){return O[this.ptr+8>>2]},this.set_refcount=function(e){O[this.ptr>>2]=e},this.set_caught=function(e){e=e?1:0,P[this.ptr+12>>0]=e},this.get_caught=function(){return 0!=P[this.ptr+12>>0]},this.set_rethrown=function(e){e=e?1:0,P[this.ptr+13>>0]=e},this.get_rethrown=function(){return 0!=P[this.ptr+13>>0]},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=O[this.ptr>>2];O[this.ptr>>2]=e+1},this.release_ref=function(){var e=O[this.ptr>>2];return O[this.ptr>>2]=e-1,1===e}}function ae(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var se=void 0;function oe(e){for(var t="",n=e;S[n];)t+=se[S[n++]];return t}var ce={},le={},ue={};function de(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?"_"+e:e}function he(e,t){return e=de(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function fe(e,t){var n=he(t,(function(e){this.name=t,this.message=e;var n=new Error(e).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var pe=void 0;function xe(e){throw new pe(e)}var me=void 0;function ve(e){throw new me(e)}function je(e,t,n){function r(t){var r=n(t);r.length!==e.length&&ve("Mismatched type converter count");for(var i=0;i<e.length;++i)Ze(e[i],r[i])}e.forEach((function(e){ue[e]=t}));var i=new Array(t.length),a=[],s=0;t.forEach((function(e,t){le.hasOwnProperty(e)?i[t]=le[e]:(a.push(e),ce.hasOwnProperty(e)||(ce[e]=[]),ce[e].push((function(){i[t]=le[e],++s===a.length&&r(i)})))})),0===a.length&&r(i)}function Ze(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||xe('type "'+r+'" must have a positive integer typeid pointer'),le.hasOwnProperty(e)){if(n.ignoreDuplicateRegistrations)return;xe("Cannot register type '"+r+"' twice")}if(le[e]=t,delete ue[e],ce.hasOwnProperty(e)){var i=ce[e];delete ce[e],i.forEach((function(e){e()}))}}function ge(e){if(!(this instanceof De))return!1;if(!(e instanceof De))return!1;for(var t=this.$$.ptrType.registeredClass,n=this.$$.ptr,r=e.$$.ptrType.registeredClass,i=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;r.baseClass;)i=r.upcast(i),r=r.baseClass;return t===r&&n===i}function ye(e){xe(e.$$.ptrType.registeredClass.name+" instance already deleted")}var be=!1;function we(e){}function Ce(e){e.count.value-=1,0===e.count.value&&function(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}(e)}function ke(e){return"undefined"===typeof FinalizationGroup?(ke=function(e){return e},e):(be=new FinalizationGroup((function(e){for(var t=e.next();!t.done;t=e.next()){var n=t.value;n.ptr?Ce(n):console.warn("object already deleted: "+n.ptr)}})),ke=function(e){return be.register(e,e.$$,e.$$),e},we=function(e){be.unregister(e.$$)},ke(e))}function Pe(){if(this.$$.ptr||ye(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e,t=ke(Object.create(Object.getPrototypeOf(this),{$$:{value:(e=this.$$,{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType})}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t}function Se(){this.$$.ptr||ye(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&xe("Object already scheduled for deletion"),we(this),Ce(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function _e(){return!this.$$.ptr}var Ae=void 0,Oe=[];function Ee(){for(;Oe.length;){var e=Oe.pop();e.$$.deleteScheduled=!1,e.delete()}}function Te(){return this.$$.ptr||ye(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&xe("Object already scheduled for deletion"),Oe.push(this),1===Oe.length&&Ae&&Ae(Ee),this.$$.deleteScheduled=!0,this}function De(){}var Re={};function Me(e,t,n){if(void 0===e[t].overloadTable){var r=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||xe("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[r.argCount]=r}}function Ie(e,t,n,r,i,a,s,o){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=r,this.baseClass=i,this.getActualType=a,this.upcast=s,this.downcast=o,this.pureVirtualFunctions=[]}function Ke(e,t,n){for(;t!==n;)t.upcast||xe("Expected null or instance of "+n.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function We(e,t){if(null===t)return this.isReference&&xe("null is not a valid "+this.name),0;t.$$||xe('Cannot pass "'+pt(t)+'" as a '+this.name),t.$$.ptr||xe("Cannot pass deleted object as a pointer of type "+this.name);var n=t.$$.ptrType.registeredClass;return Ke(t.$$.ptr,n,this.registeredClass)}function ze(e,t){var n;if(null===t)return this.isReference&&xe("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,n),n):0;t.$$||xe('Cannot pass "'+pt(t)+'" as a '+this.name),t.$$.ptr||xe("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&xe("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;if(n=Ke(t.$$.ptr,r,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&xe("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:xe("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var i=t.clone();n=this.rawShare(n,ft.toHandle((function(){i.delete()}))),null!==e&&e.push(this.rawDestructor,n)}break;default:xe("Unsupporting sharing policy")}return n}function $e(e,t){if(null===t)return this.isReference&&xe("null is not a valid "+this.name),0;t.$$||xe('Cannot pass "'+pt(t)+'" as a '+this.name),t.$$.ptr||xe("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&xe("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass;return Ke(t.$$.ptr,n,this.registeredClass)}function qe(e){return this.fromWireType(E[e>>2])}function Ne(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function Le(e){this.rawDestructor&&this.rawDestructor(e)}function He(e){null!==e&&e.delete()}function Ve(e,t,n){if(t===n)return e;if(void 0===n.baseClass)return null;var r=Ve(e,t,n.baseClass);return null===r?null:n.downcast(r)}function Fe(){return Object.keys(Ue).length}function Ge(){var e=[];for(var t in Ue)Ue.hasOwnProperty(t)&&e.push(Ue[t]);return e}function Be(e){Ae=e,Oe.length&&Ae&&Ae(Ee)}var Ue={};function Je(e,t){return t=function(e,t){for(void 0===t&&xe("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}(e,t),Ue[t]}function Xe(e,t){return t.ptrType&&t.ptr||ve("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!==!!t.smartPtr&&ve("Both smartPtrType and smartPtr must be specified"),t.count={value:1},ke(Object.create(e,{$$:{value:t}}))}function Ye(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=Je(this.registeredClass,t);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var r=n.clone();return this.destructor(e),r}function i(){return this.isSmartPointer?Xe(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Xe(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var a,s=this.registeredClass.getActualType(t),o=Re[s];if(!o)return i.call(this);a=this.isConst?o.constPointerType:o.pointerType;var c=Ve(t,this.registeredClass,a.registeredClass);return null===c?i.call(this):this.isSmartPointer?Xe(a.registeredClass.instancePrototype,{ptrType:a,ptr:c,smartPtrType:this,smartPtr:e}):Xe(a.registeredClass.instancePrototype,{ptrType:a,ptr:c})}function Qe(e,t,n,r,i,a,s,o,c,l,u){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=r,this.isSmartPointer=i,this.pointeeType=a,this.sharingPolicy=s,this.rawGetPointee=o,this.rawConstructor=c,this.rawShare=l,this.rawDestructor=u,i||void 0!==t.baseClass?this.toWireType=ze:r?(this.toWireType=We,this.destructorFunction=null):(this.toWireType=$e,this.destructorFunction=null)}function et(e,t,n){return e.includes("j")?function(e,t,n){var r=l["dynCall_"+e];return n&&n.length?r.apply(null,[t].concat(n)):r.call(null,t)}(e,t,n):re(t).apply(null,n)}function tt(e,t){var n=(e=oe(e)).includes("j")?function(e,t){var n=[];return function(){n.length=arguments.length;for(var r=0;r<arguments.length;r++)n[r]=arguments[r];return et(e,t,n)}}(e,t):re(t);return"function"!==typeof n&&xe("unknown function pointer with signature "+e+": "+t),n}var nt=void 0;function rt(e){var t=yt(e),n=oe(t);return gt(t),n}function it(e,t){var n=[],r={};throw t.forEach((function e(t){r[t]||le[t]||(ue[t]?ue[t].forEach(e):(n.push(t),r[t]=!0))})),new nt(e+": "+n.map(rt).join([", "]))}function at(e,t){for(var n=[],r=0;r<e;r++)n.push(O[(t>>2)+r]);return n}function st(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function ot(e,t,n,r,i){var a=t.length;a<2&&xe("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var s=null!==t[1]&&null!==n,o=!1,c=1;c<t.length;++c)if(null!==t[c]&&void 0===t[c].destructorFunction){o=!0;break}var l="void"!==t[0].name,u="",d="";for(c=0;c<a-2;++c)u+=(0!==c?", ":"")+"arg"+c,d+=(0!==c?", ":"")+"arg"+c+"Wired";var h="return function "+de(e)+"("+u+") {\nif (arguments.length !== "+(a-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(a-2)+" args!');\n}\n";o&&(h+="var destructors = [];\n");var f=o?"destructors":"null",p=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],x=[xe,r,i,st,t[0],t[1]];s&&(h+="var thisWired = classParam.toWireType("+f+", this);\n");for(c=0;c<a-2;++c)h+="var arg"+c+"Wired = argType"+c+".toWireType("+f+", arg"+c+"); // "+t[c+2].name+"\n",p.push("argType"+c),x.push(t[c+2]);if(s&&(d="thisWired"+(d.length>0?", ":"")+d),h+=(l?"var rv = ":"")+"invoker(fn"+(d.length>0?", ":"")+d+");\n",o)h+="runDestructors(destructors);\n";else for(c=s?1:2;c<t.length;++c){var m=1===c?"thisWired":"arg"+(c-2)+"Wired";null!==t[c].destructorFunction&&(h+=m+"_dtor("+m+"); // "+t[c].name+"\n",p.push(m+"_dtor"),x.push(t[c].destructorFunction))}return l&&(h+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),h+="}\n",p.push(h),function(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var n=he(e.name||"unknownFunctionName",(function(){}));n.prototype=e.prototype;var r=new n,i=e.apply(r,t);return i instanceof Object?i:r}(Function,p).apply(null,x)}function ct(e,t,n){return e instanceof Object||xe(n+' with invalid "this": '+e),e instanceof t.registeredClass.constructor||xe(n+' incompatible with "this" of type '+e.constructor.name),e.$$.ptr||xe("cannot call emscripten binding method "+n+" on deleted object"),Ke(e.$$.ptr,e.$$.ptrType.registeredClass,t.registeredClass)}var lt=[],ut=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function dt(){for(var e=0,t=5;t<ut.length;++t)void 0!==ut[t]&&++e;return e}function ht(){for(var e=5;e<ut.length;++e)if(void 0!==ut[e])return ut[e];return null}var ft={toValue:function(e){return e||xe("Cannot use deleted val. handle = "+e),ut[e].value},toHandle:function(e){switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=lt.length?lt.pop():ut.length;return ut[t]={refcount:1,value:e},t}}};function pt(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function xt(e,t){switch(t){case 2:return function(e){return this.fromWireType(T[e>>2])};case 3:return function(e){return this.fromWireType(D[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function mt(e,t,n){switch(t){case 0:return n?function(e){return P[e]}:function(e){return S[e]};case 1:return n?function(e){return _[e>>1]}:function(e){return A[e>>1]};case 2:return n?function(e){return O[e>>2]}:function(e){return E[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}!function(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);se=e}(),pe=l.BindingError=fe(Error,"BindingError"),me=l.InternalError=fe(Error,"InternalError"),De.prototype.isAliasOf=ge,De.prototype.clone=Pe,De.prototype.delete=Se,De.prototype.isDeleted=_e,De.prototype.deleteLater=Te,Qe.prototype.getPointee=Ne,Qe.prototype.destructor=Le,Qe.prototype.argPackAdvance=8,Qe.prototype.readValueFromPointer=qe,Qe.prototype.deleteObject=He,Qe.prototype.fromWireType=Ye,l.getInheritedInstanceCount=Fe,l.getLiveInheritedInstances=Ge,l.flushPendingDeletes=Ee,l.setDelayFunction=Be,nt=l.UnboundTypeError=fe(Error,"UnboundTypeError"),l.count_emval_handles=dt,l.get_first_emval=ht;var vt,jt={__cxa_allocate_exception:function(e){return Zt(e+16)+16},__cxa_throw:function(e,t,n){throw new ie(e).init(t,n),e,e},_embind_register_bigint:function(e,t,n,r,i){},_embind_register_bool:function(e,t,n,r,i){var a=ae(n);Ze(e,{name:t=oe(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?r:i},argPackAdvance:8,readValueFromPointer:function(e){var r;if(1===n)r=P;else if(2===n)r=_;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+t);r=O}return this.fromWireType(r[e>>a])},destructorFunction:null})},_embind_register_class:function(e,t,n,r,i,a,s,o,c,u,d,h,f){d=oe(d),a=tt(i,a),o&&(o=tt(s,o)),u&&(u=tt(c,u)),f=tt(h,f);var p=de(d);!function(e,t,n){l.hasOwnProperty(e)?((void 0===n||void 0!==l[e].overloadTable&&void 0!==l[e].overloadTable[n])&&xe("Cannot register public name '"+e+"' twice"),Me(l,e,e),l.hasOwnProperty(n)&&xe("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),l[e].overloadTable[n]=t):(l[e]=t,void 0!==n&&(l[e].numArguments=n))}(p,(function(){it("Cannot construct "+d+" due to unbound types",[r])})),je([e,t,n],r?[r]:[],(function(t){var n,i;t=t[0],i=r?(n=t.registeredClass).instancePrototype:De.prototype;var s=he(p,(function(){if(Object.getPrototypeOf(this)!==c)throw new pe("Use 'new' to construct "+d);if(void 0===h.constructor_body)throw new pe(d+" has no accessible constructor");var e=h.constructor_body[arguments.length];if(void 0===e)throw new pe("Tried to invoke ctor of "+d+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(h.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),c=Object.create(i,{constructor:{value:s}});s.prototype=c;var h=new Ie(d,s,c,f,n,a,o,u),x=new Qe(d,h,!0,!1,!1),m=new Qe(d+"*",h,!1,!1,!1),v=new Qe(d+" const*",h,!1,!0,!1);return Re[e]={pointerType:m,constPointerType:v},function(e,t,n){l.hasOwnProperty(e)||ve("Replacing nonexistant public symbol"),void 0!==l[e].overloadTable&&void 0!==n?l[e].overloadTable[n]=t:(l[e]=t,l[e].argCount=n)}(p,s),[x,m,v]}))},_embind_register_class_constructor:function(e,t,n,r,i,a){var s;t>0||U(s);var o=at(t,n);i=tt(r,i),je([],[e],(function(e){var n="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new pe("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=function(){it("Cannot construct "+e.name+" due to unbound types",o)},je([],o,(function(r){return r.splice(1,0,null),e.registeredClass.constructor_body[t-1]=ot(n,r,null,i,a),[]})),[]}))},_embind_register_class_function:function(e,t,n,r,i,a,s,o){var c=at(n,r);t=oe(t),a=tt(i,a),je([],[e],(function(e){var r=(e=e[0]).name+"."+t;function i(){it("Cannot call "+r+" due to unbound types",c)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),o&&e.registeredClass.pureVirtualFunctions.push(t);var l=e.registeredClass.instancePrototype,u=l[t];return void 0===u||void 0===u.overloadTable&&u.className!==e.name&&u.argCount===n-2?(i.argCount=n-2,i.className=e.name,l[t]=i):(Me(l,t,r),l[t].overloadTable[n-2]=i),je([],c,(function(i){var o=ot(r,i,e,a,s);return void 0===l[t].overloadTable?(o.argCount=n-2,l[t]=o):l[t].overloadTable[n-2]=o,[]})),[]}))},_embind_register_class_property:function(e,t,n,r,i,a,s,o,c,l){t=oe(t),i=tt(r,i),je([],[e],(function(e){var r=(e=e[0]).name+"."+t,u={get:function(){it("Cannot access "+r+" due to unbound types",[n,s])},enumerable:!0,configurable:!0};return u.set=c?function(){it("Cannot access "+r+" due to unbound types",[n,s])}:function(e){xe(r+" is a read-only property")},Object.defineProperty(e.registeredClass.instancePrototype,t,u),je([],c?[n,s]:[n],(function(n){var s=n[0],u={get:function(){var t=ct(this,e,r+" getter");return s.fromWireType(i(a,t))},enumerable:!0};if(c){c=tt(o,c);var d=n[1];u.set=function(t){var n=ct(this,e,r+" setter"),i=[];c(l,n,d.toWireType(i,t)),st(i)}}return Object.defineProperty(e.registeredClass.instancePrototype,t,u),[]})),[]}))},_embind_register_emval:function(e,t){Ze(e,{name:t=oe(t),fromWireType:function(e){var t=ft.toValue(e);return function(e){e>4&&0===--ut[e].refcount&&(ut[e]=void 0,lt.push(e))}(e),t},toWireType:function(e,t){return ft.toHandle(t)},argPackAdvance:8,readValueFromPointer:qe,destructorFunction:null})},_embind_register_float:function(e,t,n){var r=ae(n);Ze(e,{name:t=oe(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:xt(t,r),destructorFunction:null})},_embind_register_integer:function(e,t,n,r,i){t=oe(t),-1===i&&(i=4294967295);var a=ae(n),s=function(e){return e};if(0===r){var o=32-8*n;s=function(e){return e<<o>>>o}}var c=t.includes("unsigned");Ze(e,{name:t,fromWireType:s,toWireType:c?function(e,t){return this.name,t>>>0}:function(e,t){return this.name,t},argPackAdvance:8,readValueFromPointer:mt(t,a,0!==r),destructorFunction:null})},_embind_register_memory_view:function(e,t,n){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function i(e){var t=E,n=t[e>>=2],i=t[e+1];return new r(k,i,n)}Ze(e,{name:n=oe(n),fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})},_embind_register_std_string:function(e,t){var n="std::string"===(t=oe(t));Ze(e,{name:t,fromWireType:function(e){var t,r=E[e>>2];if(n)for(var i=e+4,a=0;a<=r;++a){var s=e+4+a;if(a==r||0==S[s]){var o=w(i,s-i);void 0===t?t=o:(t+=String.fromCharCode(0),t+=o),i=s+1}}else{var c=new Array(r);for(a=0;a<r;++a)c[a]=String.fromCharCode(S[e+4+a]);t=c.join("")}return gt(e),t},toWireType:function(e,t){var r;t instanceof ArrayBuffer&&(t=new Uint8Array(t));var i="string"===typeof t;i||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||xe("Cannot pass non-string to std::string"),r=n&&i?function(){return function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}(t)}:function(){return t.length};var a=r(),s=Zt(4+a+1);if(E[s>>2]=a,n&&i)C(t,s+4,a+1);else if(i)for(var o=0;o<a;++o){var c=t.charCodeAt(o);c>255&&(gt(s),xe("String has UTF-16 code units that do not fit in 8 bits")),S[s+4+o]=c}else for(o=0;o<a;++o)S[s+4+o]=t[o];return null!==e&&e.push(gt,s),s},argPackAdvance:8,readValueFromPointer:qe,destructorFunction:function(e){gt(e)}})},_embind_register_std_wstring:function(e,t,n){var r,i,a,s,o;n=oe(n),2===t?(r=M,i=I,s=K,a=function(){return A},o=1):4===t&&(r=W,i=z,s=$,a=function(){return E},o=2),Ze(e,{name:n,fromWireType:function(e){for(var n,i=E[e>>2],s=a(),c=e+4,l=0;l<=i;++l){var u=e+4+l*t;if(l==i||0==s[u>>o]){var d=r(c,u-c);void 0===n?n=d:(n+=String.fromCharCode(0),n+=d),c=u+t}}return gt(e),n},toWireType:function(e,r){"string"!==typeof r&&xe("Cannot pass non-string to C++ string type "+n);var a=s(r),c=Zt(4+a+t);return E[c>>2]=a>>o,i(r,c+4,a+t),null!==e&&e.push(gt,c),c},argPackAdvance:8,readValueFromPointer:qe,destructorFunction:function(e){gt(e)}})},_embind_register_void:function(e,t){Ze(e,{isVoid:!0,name:t=oe(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})},abort:function(){U("")},emscripten_memcpy_big:function(e,t,n){S.copyWithin(e,t,t+n)},emscripten_resize_heap:function(e){S.length,U("OOM")}},Zt=(function(){var e={env:jt,wasi_snapshot_preview1:jt};function t(e,t){var n,r,i=e.exports;l.asm=i,Z=l.asm.memory,n=Z.buffer,k=n,l.HEAP8=P=new Int8Array(n),l.HEAP16=_=new Int16Array(n),l.HEAP32=O=new Int32Array(n),l.HEAPU8=S=new Uint8Array(n),l.HEAPU16=A=new Uint16Array(n),l.HEAPU32=E=new Uint32Array(n),l.HEAPF32=T=new Float32Array(n),l.HEAPF64=D=new Float64Array(n),q=l.asm.__indirect_function_table,r=l.asm.__wasm_call_ctors,L.unshift(r),function(e){if(F--,l.monitorRunDependencies&&l.monitorRunDependencies(F),0==F&&(null!==G&&(clearInterval(G),G=null),B)){var t=B;B=null,t()}}()}function n(e){t(e.instance)}function r(t){return function(){if(!j&&(f||p)){if("function"===typeof fetch&&!Q(J))return fetch(J,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+J+"'";return e.arrayBuffer()})).catch((function(){return ee(J)}));if(i)return new Promise((function(e,t){i(J,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return ee(J)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){v("failed to asynchronously prepare wasm: "+e),U(e)}))}if(F++,l.monitorRunDependencies&&l.monitorRunDependencies(F),l.instantiateWasm)try{return l.instantiateWasm(e,t)}catch(a){return v("Module.instantiateWasm callback failed with error: "+a),!1}j||"function"!==typeof WebAssembly.instantiateStreaming||Y(J)||Q(J)||"function"!==typeof fetch?r(n):fetch(J,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return v("wasm streaming compile failed: "+e),v("falling back to ArrayBuffer instantiation"),r(n)}))}))}(),l.___wasm_call_ctors=function(){return(l.___wasm_call_ctors=l.asm.__wasm_call_ctors).apply(null,arguments)},l._malloc=function(){return(Zt=l._malloc=l.asm.malloc).apply(null,arguments)}),gt=l._free=function(){return(gt=l._free=l.asm.free).apply(null,arguments)},yt=l.___getTypeName=function(){return(yt=l.___getTypeName=l.asm.__getTypeName).apply(null,arguments)};l.___embind_register_native_and_builtin_types=function(){return(l.___embind_register_native_and_builtin_types=l.asm.__embind_register_native_and_builtin_types).apply(null,arguments)},l.___errno_location=function(){return(l.___errno_location=l.asm.__errno_location).apply(null,arguments)},l.stackSave=function(){return(l.stackSave=l.asm.stackSave).apply(null,arguments)},l.stackRestore=function(){return(l.stackRestore=l.asm.stackRestore).apply(null,arguments)},l.stackAlloc=function(){return(l.stackAlloc=l.asm.stackAlloc).apply(null,arguments)};function bt(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function wt(e){function t(){vt||(vt=!0,l.calledRun=!0,y||(!0,te(L),l.onRuntimeInitialized&&l.onRuntimeInitialized(),function(){if(l.postRun)for("function"==typeof l.postRun&&(l.postRun=[l.postRun]);l.postRun.length;)e=l.postRun.shift(),H.unshift(e);var e;te(H)}()))}e=e||h,F>0||(!function(){if(l.preRun)for("function"==typeof l.preRun&&(l.preRun=[l.preRun]);l.preRun.length;)e=l.preRun.shift(),N.unshift(e);var e;te(N)}(),F>0||(l.setStatus?(l.setStatus("Running..."),setTimeout((function(){setTimeout((function(){l.setStatus("")}),1),t()}),1)):t()))}if(B=function e(){vt||wt(),vt||(B=e)},l.run=wt,l.preInit)for("function"==typeof l.preInit&&(l.preInit=[l.preInit]);l.preInit.length>0;)l.preInit.pop()();wt()},21678:function(){},10699:function(){}}]);
//# sourceMappingURL=78.3c27c588.chunk.js.map