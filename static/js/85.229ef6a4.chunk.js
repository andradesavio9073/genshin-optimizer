"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[85],{31038:function(e,t,n){n.d(t,{Z:function(){return E}});var r=n(1413),i=n(93433),a=n(45987),l=n(53174),o=n(54483),s=n(63204),c=n(14361),u=n(13967),d=n(14868),f=n(47047),p=n(20890),h=n(68870),v=n(72791),x=n(22020),Z=n(947),m=n(56928),g=n(42320),y=n(24351),b=n(50921),j=n(46956),k=n(610),w=n(68244),C=n(2380),I=n(80184),S=["value","onChange","defaultText","defaultIcon","placeholderText","labelText","showDefault","showInventory","showEquipped","filter","disable"];function E(e){var t=e.value,n=e.onChange,E=e.defaultText,M=void 0===E?"":E,F=e.defaultIcon,P=void 0===F?"":F,_=e.placeholderText,R=void 0===_?"":_,A=e.labelText,G=void 0===A?"":A,T=e.showDefault,O=void 0!==T&&T,D=e.showInventory,N=void 0!==D&&D,z=e.showEquipped,q=void 0!==z&&z,K=e.filter,V=void 0===K?function(){return!0}:K,W=e.disable,L=void 0===W?function(){return!1}:W,B=(0,a.Z)(e,S),U=(0,x.$)(["ui","artifact"].concat((0,i.Z)(y.IV.map((function(e){return"char_".concat(e,"_gen")}))))).t,$=(0,u.Z)(),H=(0,v.useContext)(m.t).database,Q=(0,g.Z)(Z.Z.getAll,[]),X=(0,v.useMemo)((function(){return Q&&(0,b.zU)(H,Q)}),[H,Q]),J=H._getCharKeys().filter((function(e){return(null===Q||void 0===Q?void 0:Q[e])&&V(Q[e],e)})).sort(),Y=(0,v.useCallback)((function(e){switch(e){case"Equipped":return U("artifact:filterLocation.currentlyEquipped");case"Inventory":return U("artifact:filterLocation.inventory");case"":return M;default:return U("char_".concat(e,"_gen:name"))}}),[M,U]),ee=(0,v.useCallback)((function(e){var t;switch(e){case"Equipped":return(0,I.jsx)(o.G,{icon:l.caW});case"Inventory":return(0,I.jsx)(s.Z,{});case"":return P;default:return(0,I.jsx)(C.Z,{src:null===(t=Q[e])||void 0===t?void 0:t.thumbImgSide,sx:{pr:1}})}}),[P,Q]),te=(0,v.useMemo)((function(){return X&&function(e,t,n,r,i,a){if(!t)return[];var l=[];r&&l.push({value:"",label:n("")});i&&l.push({value:"Inventory",label:n("Inventory")});a&&l.push({value:"Equipped",label:n("Equipped")});var o=e.filter((0,j.C)({element:"",weaponType:"",favorite:"yes",name:""},t)).map((function(e){return{value:e,label:n(e)}})),s=e.filter((0,j.C)({element:"",weaponType:"",favorite:"no",name:""},t)).map((function(e){return{value:e,label:n(e)}}));return l.concat(o).concat(s)}(J,X,Y,O,N,q)}),[X,J,O,N,q,Y]);return Q&&te?(0,I.jsx)(d.Z,(0,r.Z)({autoHighlight:!0,options:te,getOptionLabel:function(e){return e.label},onChange:function(e,t){return n(t?t.value:"")},isOptionEqualToValue:function(e,t){return e.value===t.value},getOptionDisabled:function(e){return!!e.value&&L(e.value)},value:{value:t,label:Y(t)},renderInput:function(e){return(0,I.jsx)(w.Z,(0,r.Z)((0,r.Z)({},e),{},{label:G,placeholder:R,startAdornment:ee(t),hasValue:!!t}))},renderOption:function(e,n){var r,i="Equipped"!==n.value&&"Inventory"!==n.value&&""!==n.value&&(null===(r=H._getChar(n.value))||void 0===r?void 0:r.favorite);return(0,I.jsx)(k.Z,{value:n.value?n.value:"default",image:ee(n.value),text:(0,I.jsx)(v.Suspense,{fallback:(0,I.jsx)(f.Z,{variant:"text",width:100}),children:(0,I.jsx)(p.Z,{variant:"inherit",noWrap:!0,children:Y(n.value)})}),theme:$,isSelected:t===n.value,addlElement:(0,I.jsxs)(I.Fragment,{children:[i&&(0,I.jsx)(h.Z,{display:"flex",flexGrow:1}),i&&(0,I.jsx)(c.Z,{sx:{ml:1,mr:-.5}})]}),props:e},n.value?n.value:"default")}},B)):null}},40020:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(63204),i=n(20890),a=n(22020),l=n(947),o=n(42320),s=n(80184);function c(e){var t=e.location,n=(0,a.$)("ui").t,c=(0,o.Z)(l.Z.get(null!==t&&void 0!==t?t:""),[t]);return(0,s.jsx)(i.Z,{component:"span",children:null!==c&&void 0!==c&&c.name?c.nameWIthIcon:(0,s.jsxs)("span",{children:[(0,s.jsx)(r.Z,{sx:{verticalAlign:"text-bottom"}})," ",n("inventory")]})})}},2380:function(e,t,n){var r=(0,n(93457).Z)("img")((function(e){var t=e.theme;return{display:"inline-block",width:"auto",height:"2.3em",lineHeight:1,verticalAlign:"text-bottom",marginTop:t.spacing(-3),marginLeft:t.spacing(-1.25),marginRight:t.spacing(-1),marginBottom:t.spacing(-1)}}));t.Z=r},10600:function(e,t,n){n.d(t,{CC:function(){return v},ZP:function(){return x}});var r=n(29439),i=n(1413),a=n(45987),l=n(66934),o=n(4834),s=n(24518),c=n(72791),u=n(80184),d=["children","disableRipple","disableFocusRipple","disableTouchRipple"],f=["value","onChange","disabled","float"],p=(0,l.ZP)(o.ZP)((function(e){var t=e.theme;return{backgroundColor:t.palette.primary.main,transition:"all 0.5s ease","&:hover":{backgroundColor:t.palette.primary.dark},"&.Mui-focused":{backgroundColor:t.palette.primary.dark},"&.Mui-disabled":{backgroundColor:t.palette.primary.dark}}})),h=(0,l.ZP)(s.Z)((function(e){return{backgroundColor:e.theme.palette.primary.main,padding:0,overflow:"hidden",div:{width:"100%",height:"100%"}}}));function v(e){var t=e.children,n=(e.disableRipple,e.disableFocusRipple,e.disableTouchRipple,(0,a.Z)(e,d));return(0,u.jsx)(h,(0,i.Z)((0,i.Z)({disableRipple:!0,disableFocusRipple:!0,disableTouchRipple:!0},n),{},{children:t}))}function x(e){var t=e.value,n=void 0===t?0:t,l=e.onChange,o=e.disabled,s=void 0!==o&&o,d=e.float,h=void 0!==d&&d,v=(0,a.Z)(e,f),x=(0,c.useState)(n),Z=(0,r.Z)(x,2),m=Z[0],g=Z[1],y=(0,c.useState)(!1),b=(0,r.Z)(y,2),j=b[0],k=b[1],w=(0,c.useMemo)((function(){return h?parseFloat:parseInt}),[h]),C=(0,c.useCallback)((function(){l(m),k(!1)}),[l,m,k]),I=(0,c.useCallback)((function(){k(!0)}),[k]);(0,c.useEffect)((function(){return g(n)}),[n,g]);var S=(0,c.useCallback)((function(e){return g(w(e.target.value)||0)}),[g,w]),E=(0,c.useCallback)((function(e){return"Enter"===e.key&&C()}),[C]);return(0,u.jsx)(p,(0,i.Z)({value:j&&!m?"":m,"aria-label":"custom-input",type:"number",inputProps:{step:h?.1:1},onChange:S,onBlur:C,onFocus:I,disabled:s,onKeyDown:E},v))}},55221:function(e,t,n){var r=n(1413),i=n(45987),a=n(53174),l=n(54483),o=n(68870),s=n(96106),c=n(80184),u=["className"];t.Z=function(e){var t=e.className,n=(0,i.Z)(e,u);return(0,c.jsx)(s.Z,(0,r.Z)((0,r.Z)({placement:"top"},n),{},{className:t,children:(0,c.jsx)(o.Z,{component:"span",sx:{cursor:"help"},children:(0,c.jsx)(l.G,{icon:a.sqG})})}))}},610:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(1413),i=n(23786),a=n(57064),l=n(49900),o=n(80184);function s(e){var t=e.value,n=e.image,s=void 0===n?"":n,c=e.text,u=e.theme,d=e.isSelected,f=e.addlElement,p=e.props;return(0,o.jsxs)(i.Z,(0,r.Z)((0,r.Z)({value:t},p),{},{children:[(0,o.jsx)(a.Z,{children:s}),(0,o.jsx)(l.Z,{primaryTypographyProps:{style:{fontWeight:d?u.typography.fontWeightMedium:u.typography.fontWeightRegular}},children:c}),f&&f]}),t)}},68244:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(1413),i=n(45987),a=n(13967),l=n(58165),o=n(80184),s=["hasValue","startAdornment","flattenCorners","InputProps","sx"];function c(e){var t=e.hasValue,n=e.startAdornment,c=e.flattenCorners,u=void 0!==c&&c,d=e.InputProps,f=e.sx,p=(0,i.Z)(e,s),h=(0,a.Z)();return(0,o.jsx)(l.Z,(0,r.Z)((0,r.Z)({},p),{},{variant:"filled",color:t?"success":"primary",hiddenLabel:!p.label,type:"search",InputProps:(0,r.Z)((0,r.Z)({},d),{},{startAdornment:n}),InputLabelProps:{style:{color:h.palette.text.primary}},sx:(0,r.Z)((0,r.Z)({},f),{},{"& .MuiFilledInput-root":{backgroundColor:t?h.palette.success.main:h.palette.primary.main,borderRadius:u?0:1,paddingTop:p.label?void 0:0,paddingBottom:0},"& .MuiFilledInput-root:before":{border:"none"},"& .MuiFilledInput-root:after":{border:"none"},"& .MuiFilledInput-root.Mui-focused":{backgroundColor:t?h.palette.success.light:h.palette.primary.light},"& .MuiFilledInput-root:hover":{backgroundColor:t?h.palette.success.dark:h.palette.primary.dark},"& .MuiFilledInput-root:hover:not(.Mui-disabled):before":{border:"none"},"& input[type=search]::-ms-clear":{display:"none",width:0,height:0},"& input[type=search]::-ms-reveal":{display:"none",width:0,height:0},"& input[type=search]::-webkit-search-decoration":{display:"none"},"& input[type=search]::-webkit-search-cancel-button":{display:"none"},"& input[type=search]::-webkit-search-results-button":{display:"none"},"& input[type=search]::-webkit-search-results-decoration":{display:"none"}})}))}},14525:function(e,t,n){n.d(t,{Z:function(){return S},b:function(){return E}});var r,i,a=n(29439),l=n(30168),o=n(4942),s=n(1413),c=n(53174),u=n(54483),d=n(39504),f=n(20890),p=n(2199),h=n(23786),v=n(24518),x=n(52791),Z=n(72791),m=n(22020),g=n(2693),y=n(26138),b=n(79406),j=n(71310),k=n(10600),w=n(33890),C=n(55221),I=n(80184);function S(e){var t=e.statFilters,n=void 0===t?{}:t,c=e.setStatFilters,u=e.disabled,p=void 0!==u&&u,h=(0,m.$)("page_character").t,v=(0,Z.useContext)(g.R).data,b=["atk","hp","def","eleMas","critRate_","critDMG_","heal_","enerRech_"];"catalyst"!==v.get(y.ri.weaponType).value&&b.push("physical_dmg_");var k=v.get(y.ri.charEle).value;b.push("".concat(k,"_dmg_"));var w=b.filter((function(e){return!Object.keys(n).some((function(t){return t===e}))})),S=(0,Z.useCallback)((function(e,t){return c((0,s.Z)((0,s.Z)({},n),{},(0,o.Z)({},e,t)))}),[n,c]);return(0,I.jsxs)(x.Z,{children:[(0,I.jsx)(j.Z,{children:(0,I.jsxs)(d.Z,{sx:{display:"flex",gap:1,justifyContent:"space-between"},children:[(0,I.jsx)(f.Z,{children:h(r||(r=(0,l.Z)(["tabOptimize.constraintFilter.title"])))}),(0,I.jsx)(C.Z,{title:(0,I.jsx)(f.Z,{children:h(i||(i=(0,l.Z)(["tabOptimize.constraintFilter.tooltip"])))})})]})}),(0,I.jsxs)(x.Z,{display:"flex",flexDirection:"column",gap:.5,children:[Object.entries(n).map((function(e){var t=(0,a.Z)(e,2),r=t[0],i=t[1];return(0,I.jsx)(E,{statKey:r,statKeys:w,setFilter:S,disabled:p,value:i,close:function(){delete n[r],c((0,s.Z)({},n))}},r)})),(0,I.jsx)(E,{value:void 0,close:void 0,statKeys:w,setFilter:S,disabled:p})]})]})}function E(e){var t=e.statKey,n=e.statKeys,r=void 0===n?[]:n,i=e.value,a=void 0===i?0:i,l=e.close,o=e.setFilter,s=e.disabled,d=void 0!==s&&s,f="%"===b.ZP.unit(t),x=(0,Z.useCallback)((function(e){return t&&o(t,e)}),[o,t]);return(0,I.jsxs)(p.Z,{sx:{width:"100%"},children:[(0,I.jsx)(w.Z,{title:t?b.ZP.get(t):"New Stat",disabled:d,color:t?"success":"secondary",children:r.map((function(e){return(0,I.jsx)(h.Z,{onClick:function(){null===l||void 0===l||l(),o(e,a)},children:b.ZP.get(e)},e)}))}),(0,I.jsx)(k.CC,{sx:{flexBasis:30,flexGrow:1},children:(0,I.jsx)(k.ZP,{disabled:!t,float:f,value:a,placeholder:"Min Value",onChange:x,sx:{px:2}})}),!!l&&(0,I.jsx)(v.Z,{color:"error",onClick:l,disabled:d,children:(0,I.jsx)(u.G,{icon:c.I7k})})]})}},20323:function(e,t,n){function r(){return{tcMode:!1}}n.d(t,{c:function(){return r}})},72838:function(e,t,n){n.d(t,{N:function(){return X},Z:function(){return H}});var r,i,a,l,o=n(30168),s=n(29439),c=n(53174),u=n(54483),d=n(40117),f=n(62002),p=n(63204),h=n(66647),v=n(68870),x=n(20890),Z=n(47047),m=n(13400),g=n(81918),y=n(39504),b=n(2199),j=n(40165),k=n(24518),w=n(72791),C=n(22020),I=n(95614),S=n(71310),E=n(31038),M=n(40020),F=n(91702),P=n(20005),_=n(55221),R=n(25617),A=n(10157),G=n(75545),T=n(19272),O=n(31148),D=n(56928),N=n(79406),z=n(63372),q=n(42320),K=n(50765),V=n(60393),W=n(46797),L=n(44217),B=n(80184),U=(0,w.lazy)((function(){return Promise.all([n.e(788),n.e(213)]).then(n.bind(n,66585))})),$=new Set(K._);function H(e){var t,n,K,V,H=e.artifactId,X=e.artifactObj,J=e.onClick,Y=e.onDelete,ee=e.mainStatAssumptionLevel,te=void 0===ee?0:ee,ne=e.effFilter,re=void 0===ne?$:ne,ie=e.probabilityFilter,ae=e.disableEditSetSlot,le=void 0!==ae&&ae,oe=e.editor,se=void 0!==oe&&oe,ce=e.canExclude,ue=void 0!==ce&&ce,de=e.canEquip,fe=void 0!==de&&de,pe=e.extraButtons,he=(0,C.$)(["artifact","ui"]).t,ve=(0,w.useContext)(D.t).database,xe=(0,z.Z)(H),Ze=(0,q.Z)(O.y.get(null===(t=null!==X&&void 0!==X?X:xe)||void 0===t?void 0:t.setKey),[X,xe]),me=!X,ge=(0,w.useState)(!1),ye=(0,s.Z)(ge,2),be=ye[0],je=ye[1],ke=(0,w.useCallback)((function(){return je(!1)}),[je]),we=(0,w.useCallback)((function(){return me&&je(!0)}),[me,je]),Ce=(0,w.useCallback)((function(e){return(0,B.jsx)(h.Z,{onClick:function(){return H&&(null===J||void 0===J?void 0:J(H))},sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})}),[J,H]),Ie=(0,w.useCallback)((function(e){return(0,B.jsx)(v.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:e})}),[]),Se=null!==X&&void 0!==X?X:xe;if(!Se)return null;var Ee=Se.id,Me=Se.lock,Fe=Se.slotKey,Pe=Se.rarity,_e=Se.level,Re=Se.mainStatKey,Ae=Se.substats,Ge=Se.exclude,Te=Se.location,Oe=void 0===Te?"":Te,De=Math.max(Math.min(te,4*Pe),_e),Ne=N.ZP.unit(Re),ze="roll"+(Math.floor(Math.max(_e,0)/4)+1),qe=T.Z.getArtifactEfficiency(Se,re),Ke=qe.currentEfficiency,Ve=qe.maxEfficiency,We=0!==Ve,Le=(null===Ze||void 0===Ze?void 0:Ze.getSlotName(Fe))||"Unknown Piece Name",Be=null===Ze||void 0===Ze?void 0:Ze.getSlotDesc(Fe),Ue=Be&&(0,B.jsx)(_.Z,{title:(0,B.jsxs)(v.Z,{children:[(0,B.jsx)(x.Z,{variant:"h6",children:Le}),(0,B.jsx)(x.Z,{children:Be})]})}),$e=null===Ze||void 0===Ze?void 0:Ze.setEffects,He=Ze&&$e&&(0,B.jsx)(_.Z,{title:(0,B.jsx)("span",{children:Object.keys($e).map((function(e){return(0,B.jsxs)("span",{children:[(0,B.jsx)(x.Z,{variant:"h6",children:(0,B.jsx)(R.Z,{color:"success",children:he("artifact:setEffectNum",{setNum:e})})}),(0,B.jsx)(x.Z,{children:Ze.setEffectDesc(e)})]},e)}))})});return(0,B.jsxs)(w.Suspense,{fallback:(0,B.jsx)(Z.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:350}}),children:[se&&(0,B.jsx)(w.Suspense,{fallback:!1,children:(0,B.jsx)(U,{artifactIdToEdit:be?H:"",cancelEdit:ke,disableEditSetSlot:le})}),(0,B.jsxs)(S.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,B.jsxs)(P.Z,{condition:!!J,wrapper:Ce,falseWrapper:Ie,children:[(0,B.jsxs)(v.Z,{className:"grad-".concat(Pe,"star"),sx:{position:"relative",width:"100%"},children:[!J&&(0,B.jsx)(m.Z,{color:"primary",disabled:!me,onClick:function(){return ve.updateArt({lock:!Me},Ee)},sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:Me?(0,B.jsx)(d.Z,{}):(0,B.jsx)(f.Z,{})}),(0,B.jsxs)(v.Z,{sx:{pt:2,px:2,position:"relative",zIndex:1},children:[(0,B.jsxs)(v.Z,{component:"div",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,B.jsx)(g.Z,{size:"small",label:(0,B.jsx)("strong",{children:" +".concat(_e)}),color:ze}),(0,B.jsx)(x.Z,{component:"span",noWrap:!0,sx:{backgroundColor:"rgba(100,100,100,0.35)",borderRadius:"1em",px:1},children:(0,B.jsx)("strong",{children:Le})}),(0,B.jsx)(v.Z,{flexGrow:1,sx:{textAlign:"right"},children:Ue})]}),(0,B.jsx)(x.Z,{color:"text.secondary",variant:"body2",children:(0,B.jsx)(I.ZP,{slotKey:Fe})}),(0,B.jsx)(x.Z,{variant:"h6",color:"".concat(N.ZP.getVariant(Re),".main"),children:(0,B.jsxs)("span",{children:[G.Z[Re]," ",N.ZP.get(Re)]})}),(0,B.jsx)(x.Z,{variant:"h5",children:(0,B.jsx)("strong",{children:(0,B.jsxs)(F.Z,{color:De!==_e?"warning":void 0,children:[(0,N.qs)(null!==(n=T.Z.mainStatValue(Re,Pe,De))&&void 0!==n?n:0,N.ZP.unit(Re)),Ne]})})}),(0,B.jsx)(A.t,{stars:Pe,colored:!0})]}),(0,B.jsx)(v.Z,{sx:{height:"100%",position:"absolute",right:0,top:0},children:(0,B.jsx)(v.Z,{component:"img",src:null!==(K=null===Ze||void 0===Ze?void 0:Ze.slotIcons[Fe])&&void 0!==K?K:"",width:"auto",height:"100%",sx:{float:"right"}})})]}),(0,B.jsxs)(y.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column",pt:1,pb:0,width:"100%"},children:[Ae.map((function(e){return(0,B.jsx)(Q,{stat:e,effFilter:re,rarity:Pe},e.key)})),(0,B.jsxs)(v.Z,{sx:{display:"flex",my:1},children:[(0,B.jsx)(x.Z,{color:"text.secondary",component:"span",variant:"caption",sx:{flexGrow:1},children:he(r||(r=(0,o.Z)(["artifact:editor.curSubEff"])))}),(0,B.jsx)(W.Z,{value:Ke,max:900,valid:We})]}),Ke!==Ve&&(0,B.jsxs)(v.Z,{sx:{display:"flex",mb:1},children:[(0,B.jsx)(x.Z,{color:"text.secondary",component:"span",variant:"caption",sx:{flexGrow:1},children:he(i||(i=(0,o.Z)(["artifact:editor.maxSubEff"])))}),(0,B.jsx)(W.Z,{value:Ve,max:900,valid:We})]}),(0,B.jsx)(v.Z,{flexGrow:1}),ie&&(0,B.jsxs)("strong",{children:["Probability: ",(100*(0,L.B)(Se,ie)).toFixed(2),"%"]}),(0,B.jsxs)(x.Z,{color:"success.main",children:[null!==(V=null===Ze||void 0===Ze?void 0:Ze.name)&&void 0!==V?V:"Artifact Set"," ",He]})]})]}),(0,B.jsxs)(v.Z,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[me&&fe?(0,B.jsx)(E.Z,{sx:{flexGrow:1},size:"small",showDefault:!0,defaultIcon:(0,B.jsx)(p.Z,{}),defaultText:he("ui:inventory"),value:Oe,onChange:function(e){return ve.setArtLocation(H,e)}}):(0,B.jsx)(M.Z,{location:Oe}),me&&(0,B.jsxs)(b.Z,{sx:{height:"100%"},children:[se&&(0,B.jsx)(j.Z,{title:(0,B.jsx)(x.Z,{children:he(a||(a=(0,o.Z)(["artifact:edit"])))}),placement:"top",arrow:!0,children:(0,B.jsx)(k.Z,{color:"info",size:"small",onClick:we,children:(0,B.jsx)(u.G,{icon:c.Xcf,className:"fa-fw"})})}),ue&&(0,B.jsx)(j.Z,{title:(0,B.jsx)(x.Z,{children:he(l||(l=(0,o.Z)(["artifact:excludeArtifactTip"])))}),placement:"top",arrow:!0,children:(0,B.jsx)(k.Z,{onClick:function(){return ve.updateArt({exclude:!Ge},Ee)},color:Ge?"error":"success",size:"small",children:(0,B.jsx)(u.G,{icon:Ge?c.gPx:c.Stf,className:"fa-fw"})})}),!!Y&&(0,B.jsx)(k.Z,{color:"error",size:"small",onClick:function(){return Y(Ee)},disabled:Me,children:(0,B.jsx)(u.G,{icon:c.I7k,className:"fa-fw"})}),pe]})]})]})]})}function Q(e){var t,n,r,i=e.stat,a=e.effFilter,l=e.rarity;if(!i.value)return null;var o=null!==(t=null===(n=i.rolls)||void 0===n?void 0:n.length)&&void 0!==t?t:0,s=i.key?T.Z.maxSubstatValues(i.key):0,c=i.key?T.Z.getSubstatRollData(i.key,l):[],u=7-c.length,d="roll".concat((0,V.uZ)(o,1,6)),f=null!==(r=i.efficiency)&&void 0!==r?r:0,p=(0,V.V2)(.5+f/500*.5),h=N.ZP.getStr(i.key),Z=N.ZP.unit(i.key),m=i.key&&a.has(i.key);return(0,B.jsxs)(v.Z,{display:"flex",gap:1,alignContent:"center",children:[(0,B.jsxs)(x.Z,{sx:{flexGrow:1},color:o?"".concat(d,".main"):"error.main",component:"span",children:[G.Z[i.key]," ",h,"+".concat((0,N.qs)(i.value,N.ZP.unit(i.key))).concat(Z)]}),m&&(0,B.jsx)(v.Z,{display:"flex",gap:.25,height:"1.3em",children:i.rolls.sort().map((function(e,t){return(0,B.jsx)(X,{value:100*e/s,color:"roll".concat((0,V.uZ)(u+c.indexOf(e),1,6),".main")},"".concat(t).concat(e))}))}),(0,B.jsx)(x.Z,{sx:{opacity:p,minWidth:40,textAlign:"right"},children:m?"".concat(f.toFixed(),"%"):"-"})]})}function X(e){var t=e.color,n=void 0===t?"red":t,r=e.value,i=void 0===r?50:r;return(0,B.jsx)(v.Z,{sx:{width:7,height:"100%",bgcolor:n,overflow:"hidden",borderRadius:1,display:"inline-block"},children:(0,B.jsx)(v.Z,{sx:{width:10,height:"".concat(100-(0,V.uZ)(i,0,100),"%"),bgcolor:"gray"}})})}},46797:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(29439),i=n(25617),a=n(60393),l=n(80184);function o(e){var t=e.value,n=e.max,o=void 0===n?1:n,s=e.valid,c="number"===typeof t?["roll".concat((0,a.uZ)(Math.floor(t/o*10)-4,1,6)),t.toFixed()+"%"]:["secondary",t],u=(0,r.Z)(c,2),d=u[0],f=u[1];return s||(d="error"),(0,l.jsx)(i.Z,{color:d,children:f})}},44217:function(e,t,n){n.d(t,{B:function(){return b}});var r=n(29439),i=n(37762),a=n(4942),l=n(1413),o=n(93433),s=n(60393),c=n(19272),u=n(12354),d=[3,4,6],f={hp:6,atk:6,def:6,hp_:4,atk_:4,def_:4,eleMas:4,enerRech_:4,critRate_:3,critDMG_:3},p={};function h(e,t,n,r){if(5!==e.length)for(var i=0,c=d;i<c.length;i++){var u=c[i];t[u]>0&&h([].concat((0,o.Z)(e),[u]),(0,l.Z)((0,l.Z)({},t),{},(0,a.Z)({},u,t[u]-u)),n-u,r*t[u]/n)}else(0,s.SR)(p,e,r)}h([0],{3:6,4:20,6:18},44,1),h([3],{3:3,4:20,6:18},41,1),h([4],{3:6,4:16,6:18},40,1),h([6],{3:6,4:20,6:12},38,1);for(var v=Array(6).fill(0).map((function(e,t){for(var n=[1],r=0,i=1;++r<=t;)i*=t-r+1,i/=r,n.push(i);return n})),x=[[1]],Z=function(){var e=x[x.length-1],t=Array(e.length+3).fill(0);e.forEach((function(e,n){for(var r=0,i=[0,1,2,3];r<i.length;r++){t[n+i[r]]+=e}})),x.push(t.map((function(e){return e/4})))};x.length<6;)Z();for(var m=function(){var e=y[g],t=e.reduce((function(e,t){return e+t}));e.forEach((function(e,n,r){r[n]=t,t-=e}))},g=0,y=x;g<y.length;g++)m();function b(e,t){if(e.rarity<=2)return NaN;var n=e.rarity,o=e.level,h=e.substats,Z=(0,l.Z)({},t),m=new Set(Object.keys(Z)),g=0,y=e.mainStatKey;if(y in Z){var b=4*n;if(u[n][y][b]<Z[y])return 0;delete Z[y],m.delete(y)}var j,k=(0,i.Z)(h);try{for(k.s();!(j=k.n()).done;){var w=j.value,C=w.key,I=w.value;C?m.has(C)&&(m.delete(C),Z[C]>I?Z[C]-=I:delete Z[C]):g+=1}}catch(O){k.e(O)}finally{k.f()}if(g+=4-h.length,m.size>g||Object.keys(Z).length>4)return 0;for(var S=c.Z.rollsRemaining(o,n)-g,E=0,M=Object.entries(Z);E<M.length;E++){var F=(0,r.Z)(M[E],2),P=F[0],_=F[1];Z[P]=Math.max(Math.ceil(10*_/c.Z.maxSubstatValues(P,n)),1)}var R=0,A=Object.entries(Z).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1],a=m.has(n)?1:0,l=Math.ceil(i/10)-a;return R+=l,{target:i,filler:a,minUpgrade:l}})).reverse();if(R>S)return 0;var G=(0,a.Z)({},S,1),T=S-R;return A.forEach((function(e,t){for(var n,i,a,l=e.target,o=e.filler,s=e.minUpgrade,c={},u=s;u<=s+T;u++)for(var d=l-7*(u+o),f=d>0?x[u+o][d]:1,p=0,h=Object.entries(G);p<h.length;p++){var Z,m=(0,r.Z)(h[p],2),g=m[0],y=m[1],b=parseInt(g);if(!(b<u)){var j=(i=u,a=4-t,v[n=b][i]*Math.pow(a-1,n-i)/Math.pow(a,n)),k=b-u;c[k]=(null!==(Z=c[k])&&void 0!==Z?Z:0)+y*f*j}}G=c})),function(e,t,n){var r,a,l=null!==(r=f[e])&&void 0!==r?r:0,o=0,c={3:2,4:5,6:3},u=p[l],h=(0,i.Z)(t);try{for(h.s();!(a=h.n()).done;){var x=a.value.key;if(x){var Z=f[x];u=u[Z],c[Z]-=1}}}catch(O){h.e(O)}finally{h.f()}l&&(c[l]-=1);var m,g={3:0,4:0,6:0},y=(0,i.Z)(n);try{for(y.s();!(m=y.n()).done;){var b=m.value;g[f[b]]+=1}}catch(O){y.e(O)}finally{y.f()}var j=0;(0,s.Q1)(u,[],(function(e){return"number"===typeof e}),(function(e,t){j+=e;var n,r={3:0,4:0,6:0},a=(0,i.Z)(t);try{for(a.s();!(n=a.n()).done;){r[n.value]+=1}}catch(O){a.e(O)}finally{a.f()}var l,s=e,c=(0,i.Z)(d);try{for(c.s();!(l=c.n()).done;){var u=l.value,f=r[u],p=g[u];if(f<p)return;s*=v[f][p]}}catch(O){c.e(O)}finally{c.f()}o+=s}));var k,w=(0,i.Z)(d);try{for(w.s();!(k=w.n()).done;){var C=k.value;o/=v[c[C]][g[C]]}}catch(O){w.e(O)}finally{w.f()}return o/j}(e.mainStatKey,h,m)*Object.values(G).reduce((function(e,t){return e+t}))}},63372:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(29439),i=n(72791),a=n(56928);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,i.useContext)(a.t),n=t.database,l=(0,i.useState)(n._getArt(e)),o=(0,r.Z)(l,2),s=o[0],c=o[1];return(0,i.useEffect)((function(){return c(n._getArt(e))}),[n,e]),(0,i.useEffect)((function(){return e?n.followArt(e,c):void 0}),[e,c,n]),s}}}]);
//# sourceMappingURL=85.229ef6a4.chunk.js.map