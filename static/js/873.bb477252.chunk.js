"use strict";(self.webpackChunkgenshin_optimizer=self.webpackChunkgenshin_optimizer||[]).push([[873],{36030:function(e,t,n){n.d(t,{N5:function(){return P},Y4:function(){return _},mW:function(){return K},mY:function(){return E}});var r=n(1413),i=n(45987),a=n(13967),s=n(14868),l=n(58165),o=n(81918),c=n(72791),u=n(22020),d=n(31148),h=n(79406),x=n(42320),f=n(50765),p=n(24351),m=n(610),v=n(68244),Z=n(75545),j=n(80184),g=["allArtifactKeys","selectedArtifactKeys","setArtifactKeys","getName","getImage","label"],y=["artSetKeys","setArtSetKeys"],b=["mainStatKeys","setMainStatKeys"],k=["substatKeys","setSubstatKeys"],w=["allArtifactKeys","selectedArtifactKey","setArtifactKey","getName","getImage","label","disable","showDefault","defaultText","defaultIcon","flattenCorners"],C=["allArtSetKeys","artSetKey","setArtSetKey","label","flattenCorners"];function S(e){var t=e.allArtifactKeys,n=e.selectedArtifactKeys,u=e.setArtifactKeys,d=e.getName,h=e.getImage,x=e.label,f=(0,i.Z)(e,g),v=(0,a.Z)(),Z=(0,c.useMemo)((function(){return t.map((function(e){return{key:e,label:d(e)}}))}),[t,d]);return(0,j.jsx)(s.Z,(0,r.Z)({autoHighlight:!0,multiple:!0,options:Z,value:n.map((function(e){return{key:e,label:d(e)}})),onChange:function(e,t){u(t.map((function(e){return e.key})))},getOptionLabel:function(e){return e.label},isOptionEqualToValue:function(e,t){return e.key===t.key},renderInput:function(e){return(0,j.jsx)(l.Z,(0,r.Z)((0,r.Z)({},e),{},{label:x,variant:"filled",InputLabelProps:{style:{color:v.palette.text.primary}},color:n.length?"success":"primary",type:"search"}))},renderOption:function(e,t){return(0,j.jsx)(m.Z,{value:t.key,image:h(t.key),text:t.label,theme:v,isSelected:n.includes(t.key),props:e},t.key)},renderTags:function(e,t){return e.map((function(e,n){var i=p.Kj.find((function(t){return e.key==="".concat(t,"_dmg_")})),a=i||void 0;return(0,c.createElement)(o.Z,(0,r.Z)((0,r.Z)({},t({index:n})),{},{key:e.key,icon:h(e.key),label:e.label,color:a}))}))}},f))}function P(e){var t=e.artSetKeys,n=e.setArtSetKeys,a=(0,i.Z)(e,y),s=(0,x.Z)(d.y.getAll,[]),l=(0,u.$)("artifact").t;return s?(0,j.jsx)(S,(0,r.Z)({allArtifactKeys:p.q2,selectedArtifactKeys:t,setArtifactKeys:n,getName:function(e){return s[e].nameRaw},getImage:function(e){return s[e].defIcon},label:l("autocompleteLabels.set")},a)):null}function E(e){var t=e.mainStatKeys,n=e.setMainStatKeys,a=(0,i.Z)(e,b),s=(0,u.$)("artifact").t;return(0,j.jsx)(S,(0,r.Z)({allArtifactKeys:f.r,selectedArtifactKeys:t,setArtifactKeys:n,getName:function(e){return h.ZP.getArtStr(e)},getImage:function(e){return Z.Z[e]},label:s("autocompleteLabels.mainStat")},a))}function K(e){var t=e.substatKeys,n=e.setSubstatKeys,a=(0,i.Z)(e,k),s=(0,u.$)("artifact").t;return(0,j.jsx)(S,(0,r.Z)({allArtifactKeys:f._,selectedArtifactKeys:t,setArtifactKeys:n,getName:function(e){return h.ZP.getArtStr(e)},getImage:function(e){return Z.Z[e]},label:s("autocompleteLabels.substat")},a))}function A(e){var t=e.allArtifactKeys,n=e.selectedArtifactKey,l=e.setArtifactKey,o=e.getName,u=e.getImage,d=e.label,h=e.disable,x=void 0===h?function(){return!1}:h,f=e.showDefault,p=void 0!==f&&f,Z=e.defaultText,g=void 0===Z?"":Z,y=(e.defaultIcon,e.flattenCorners),b=void 0!==y&&y,k=(0,i.Z)(e,w),C=(0,a.Z)(),S=(0,c.useMemo)((function(){return(p?[{key:"",label:g}]:[]).concat(t.map((function(e){return{key:e,label:o(e)}})))}),[t,o,g,p]);return(0,j.jsx)(s.Z,(0,r.Z)({autoHighlight:!0,options:S,value:{key:n,label:o(n)},onChange:function(e,t){return l(t?t.key:"")},getOptionLabel:function(e){return e.label?e.label:g},isOptionEqualToValue:function(e,t){return e.key===t.key},getOptionDisabled:function(e){return!!e.key&&x(e.key)},renderInput:function(e){return(0,j.jsx)(v.Z,(0,r.Z)((0,r.Z)({},e),{},{label:d,startAdornment:u(n),hasValue:!!n,flattenCorners:b}))},renderOption:function(e,t){return(0,j.jsx)(m.Z,{value:t.key,image:u(t.key),text:t.label,theme:C,isSelected:n===t.key,props:e},t.key)}},k))}function _(e){var t=e.allArtSetKeys,n=void 0===t?p.q2:t,a=e.artSetKey,s=e.setArtSetKey,l=e.label,o=void 0===l?"":l,c=e.flattenCorners,h=(0,i.Z)(e,C),f=(0,x.Z)(d.y.getAll,[]),m=(0,u.$)("artifact").t;return o=o||m("autocompleteLabels.set"),f?(0,j.jsx)(A,(0,r.Z)({allArtifactKeys:n,selectedArtifactKey:a,setArtifactKey:s,getName:function(e){return e&&f[e].nameRaw},getImage:function(e){return e?f[e].defIcon:(0,j.jsx)(j.Fragment,{})},label:o,flattenCorners:c},h)):null}},21977:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(29439),i=n(57621),a=n(10889),s=n(72791),l=n(60393),o=n(10600),c=n(80184);function u(e){var t=e.levelLow,n=e.levelHigh,u=e.setLow,d=e.setHigh,h=e.setBoth,x=e.dark,f=void 0!==x&&x,p=e.disabled,m=void 0!==p&&p,v=e.showLevelText,Z=void 0!==v&&v,j=(0,s.useState)(t),g=(0,r.Z)(j,2),y=g[0],b=g[1],k=(0,s.useState)(n),w=(0,r.Z)(k,2),C=w[0],S=w[1],P=(0,s.useCallback)((function(e,t){if("number"==typeof t)throw new TypeError;var n=(0,r.Z)(t,2),i=n[0],a=n[1];b(i),S(a)}),[b,S]);return(0,s.useEffect)((function(){return b(t)}),[b,t]),(0,s.useEffect)((function(){return S(n)}),[S,n]),(0,c.jsxs)(i.Z,{sx:{width:"100%",display:"flex",alignItems:"center",bgcolor:f?"contentDark.main":"contentLight.main"},children:[(0,c.jsx)(o.ZP,{value:y,onChange:function(e){return u((0,l.uZ)(e,0,n))},sx:{px:1,pl:Z?2:void 0,width:Z?100:50},inputProps:{sx:{textAlign:"center"}},startAdornment:Z?"Level: ":void 0,disabled:m}),(0,c.jsx)(a.ZP,{sx:{width:100,flexGrow:1,mx:2},getAriaLabel:function(){return"Arifact Level Range"},value:[y,C],onChange:P,onChangeCommitted:function(e,t){return h(t[0],t[1])},valueLabelDisplay:"auto",min:0,max:20,step:1,marks:!0,disabled:m}),(0,c.jsx)(o.ZP,{value:C,onChange:function(e){return d((0,l.uZ)(e,t,20))},sx:{px:1,width:50},inputProps:{sx:{textAlign:"center"}},disabled:m})]})}},3082:function(e,t,n){n.d(t,{w:function(){return q}});var r=n(29439),i=n(14361),a=n(90690),s=n(39504),l=n(61889),o=n(58165),c=n(94721),u=n(47047),d=n(68870),h=n(13400),x=n(66647),f=n(20890),p=n(72791),m=n(22020),v=n(2191),Z=n(947),j=n(56928),g=n(26138),y=n(50920),b=n(68544),k=n(42320),w=n(47639),C=n(24351),S=n(50921),P=n(46956),E=n(3992),K=n(71310),A=n(68198),_=n(55942),O=n(9321),D=n(59215),M=n(25617),I=n(10157),L=n(75545),z=n(48510),R=n(73578),T=n(80184),B=["level","rarity","name"];function q(e){var t=e.show,n=e.onHide,i=e.onSelect,a=e.filter,u=void 0===a?function(){return!0}:a,d=e.newFirst,h=void 0!==d&&d,x=(0,p.useMemo)((function(){return h?["new"].concat(B):B}),[h]),f=(0,p.useContext)(j.t).database,v=(0,m.$)("page_character").t,g=(0,p.useState)(x[0]),y=(0,r.Z)(g,2),w=y[0],K=y[1],_=(0,p.useState)(!1),M=(0,r.Z)(_,2),I=M[0],L=M[1],q=(0,p.useState)(""),W=(0,r.Z)(q,2),V=W[0],G=W[1],F=(0,p.useState)(""),H=(0,r.Z)(F,2),U=H[0],$=H[1],J=(0,k.Z)(Z.Z.getAll,[]),X=(0,b.Z)(),Y=(0,r.Z)(X,2),Q=Y[0],ee=Y[1];(0,p.useEffect)((function(){return f.followAnyChar(ee)}),[f,ee]);var te=(0,p.useState)(""),ne=(0,r.Z)(te,2),re=ne[0],ie=ne[1],ae=(0,p.useDeferredValue)(re),se=(0,p.useMemo)((function(){return J&&(0,S._L)(f,J)}),[f,J]),le=(0,p.useMemo)((function(){return J&&Q&&(0,S.zU)(f,J)}),[Q,f,J]),oe=(0,p.useMemo)((function(){return J?C.IV.filter((function(e){return u(f._getChar(e),J[e])})):[]}),[f,J,u]),ce=(0,p.useMemo)((function(){return J&&se&&le?oe.filter((0,P.C)({element:V,weaponType:U,favorite:"yes",name:ae},le)).sort((0,P.e)(w,I,se)).concat(oe.filter((0,P.C)({element:V,weaponType:U,favorite:"no",name:ae},le)).sort((0,P.e)(w,I,se))):[]}),[J,V,U,w,I,se,le,oe,ae]);return J?(0,T.jsx)(O.Z,{open:t,onClose:n,sx:{"& .MuiContainer-root":{justifyContent:"normal"}},children:(0,T.jsxs)(E.Z,{children:[(0,T.jsx)(s.Z,{sx:{py:1},children:(0,T.jsxs)(l.ZP,{container:!0,spacing:1,children:[(0,T.jsx)(l.ZP,{item:!0,children:(0,T.jsx)(R.Z,{sx:{height:"100%"},onChange:$,value:U,size:"small"})}),(0,T.jsx)(l.ZP,{item:!0,children:(0,T.jsx)(z.Z,{sx:{height:"100%"},onChange:G,value:V,size:"small"})}),(0,T.jsx)(l.ZP,{item:!0,children:(0,T.jsx)(o.Z,{autoFocus:!0,value:re,onChange:function(e){return ie(e.target.value)},label:v("characterName")})}),(0,T.jsx)(l.ZP,{item:!0,flexGrow:1}),(0,T.jsx)(l.ZP,{item:!0,children:(0,T.jsx)(D.Z,{sx:{height:"100%"},sortKeys:x,value:w,onChange:K,ascending:I,onChangeAsc:L})}),(0,T.jsx)(l.ZP,{item:!0,children:(0,T.jsx)(A.Z,{onClick:n})})]})}),(0,T.jsx)(c.Z,{}),(0,T.jsx)(s.Z,{children:(0,T.jsx)(l.ZP,{container:!0,spacing:1,children:ce.map((function(e){return(0,T.jsx)(l.ZP,{item:!0,xs:6,md:4,lg:3,children:(0,T.jsx)(N,{characterKey:e,characterSheet:J[e],onClick:function(){n(),null===i||void 0===i||i(e)}},e)},e)}))})})]})}):null}function N(e){var t,n,r,s=e.onClick,l=e.characterKey,o=e.characterSheet,c=(0,w.Z)(l),m=(0,p.useContext)(j.t).database,b=(0,y.Z)(l),k=null===(t=m._getChar(l))||void 0===t?void 0:t.favorite,C=(null!==(n=null===c||void 0===c?void 0:c[l])&&void 0!==n?n:{}).target,S=o.rarity;return(0,T.jsx)(p.Suspense,{fallback:(0,T.jsx)(u.Z,{variant:"rectangular",height:130}),children:(0,T.jsxs)(d.Z,{children:[void 0!==k&&(0,T.jsx)(d.Z,{display:"flex",position:"absolute",alignSelf:"start",zIndex:1,children:(0,T.jsx)(h.Z,{sx:{p:.5},onClick:function(){return b({favorite:!k})},children:k?(0,T.jsx)(i.Z,{}):(0,T.jsx)(a.Z,{})})}),(0,T.jsx)(x.Z,{onClick:s,children:(0,T.jsxs)(K.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,T.jsx)(d.Z,{component:"img",src:o.thumbImg,sx:{width:130,height:"auto"},className:"grad-".concat(S,"star")}),(0,T.jsxs)(d.Z,{sx:{pl:1},children:[(0,T.jsx)(f.Z,{children:(0,T.jsx)("strong",{children:o.name})}),C?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(f.Z,{variant:"h6",children:[" ",o.elementKey&&L.Z[o.elementKey]," ",(0,T.jsx)(_.Z,{src:null===(r=v.Z.weaponTypes)||void 0===r?void 0:r[o.weaponTypeKey]})," ",Z.Z.getLevelString(C.get(g.ri.lvl).value,C.get(g.ri.asc).value)]}),(0,T.jsxs)(f.Z,{children:[(0,T.jsx)(M.Z,{color:"success",children:"C".concat(C.get(g.ri.constellation).value)})," ",(0,T.jsx)(M.Z,{color:C.get(g.ri.bonus.auto).value?"info":"secondary",children:(0,T.jsx)("strong",{children:C.get(g.ri.total.auto).value})})," ",(0,T.jsx)(M.Z,{color:C.get(g.ri.bonus.skill).value?"info":"secondary",children:(0,T.jsx)("strong",{children:C.get(g.ri.total.skill).value})})," ",(0,T.jsx)(M.Z,{color:C.get(g.ri.bonus.burst).value?"info":"secondary",children:(0,T.jsx)("strong",{children:C.get(g.ri.total.burst).value})})]})]}):(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(f.Z,{variant:"h6",children:(0,T.jsx)(M.Z,{color:"primary",children:"NEW"})})}),(0,T.jsx)("small",{children:(0,T.jsx)(I.t,{stars:S,colored:!0})})]})]})})]})})}},91732:function(e,t,n){var r=n(1413),i=n(45987),a=n(66934),s=n(13400),l=n(80184),o=["expand"],c=(0,a.ZP)((function(e){e.expand;var t=(0,i.Z)(e,o);return(0,l.jsx)(s.Z,(0,r.Z)({},t))}))((function(e){var t=e.theme;return{transform:e.expand?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})}}));t.Z=c},59215:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(1413),i=n(45987),a=n(53174),s=n(54483),l=n(2199),o=n(23786),c=n(24518),u=n(52791),d=n(22020),h=n(76899),x=n(33890),f=n(80184),p=["sortKeys","value","onChange","ascending","onChangeAsc"];function m(e){var t=e.sortKeys,n=e.value,m=e.onChange,v=e.ascending,Z=e.onChangeAsc,j=(0,i.Z)(e,p),g=(0,d.$)("ui").t;return(0,f.jsxs)(u.Z,{display:"flex",alignItems:"center",gap:1,children:[(0,f.jsx)(h.c,{t:g,i18nKey:g("sortBy"),children:"Sort by: "}),(0,f.jsxs)(l.Z,(0,r.Z)((0,r.Z)({},j),{},{children:[(0,f.jsx)(x.Z,{title:(0,f.jsx)(h.c,{t:g,i18nKey:g("sortMap.".concat(n)),children:{value:g("sortMap.".concat(n))}}),children:t.map((function(e){return(0,f.jsx)(o.Z,{selected:n===e,disabled:n===e,onClick:function(){return m(e)},children:g("sortMap.".concat(e))},e)}))}),(0,f.jsx)(c.Z,{onClick:function(){return Z(!v)},startIcon:(0,f.jsx)(s.G,{icon:v?a.Pa6:a.xrW,className:"fa-fw"}),children:v?(0,f.jsx)(h.c,{t:g,i18nKey:"ascending",children:"Ascending"}):(0,f.jsx)(h.c,{t:g,i18nKey:"descending",children:"Descending"})})]}))]})}},92443:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(1413),i=n(45987),a=n(66934),s=n(24518),l=n(80184),o=["children","disabled"],c=(0,a.ZP)(s.Z)((function(e){var t=e.theme;return{"&.Mui-disabled":{backgroundColor:t.palette.primary.dark,color:t.palette.text.secondary}}}));function u(e){var t=e.children,n=(e.disabled,(0,i.Z)(e,o));return(0,l.jsx)(c,(0,r.Z)((0,r.Z)({},n),{},{disabled:!0,children:t}))}},48510:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(1413),i=n(45987),a=n(72466),s=n(68870),l=n(72791),o=n(24351),c=n(66934),u=n(90388),d=(0,c.ZP)(u.Z,{shouldForwardProp:function(e){return"baseColor"!==e&&"selectedColor"!==e}})((function(e){var t=e.theme,n=e.baseColor,r=void 0===n?"secondary":n,i=e.selectedColor,a=void 0===i?"success":i;return{"&":{backgroundColor:t.palette[r].main,color:t.palette[r].contrastText},"&:hover":{backgroundColor:t.palette[r].dark},"&.Mui-selected":{backgroundColor:t.palette[a].main,color:t.palette[a].contrastText},"&.Mui-selected:hover":{backgroundColor:t.palette[a].dark},"&.Mui-disabled":{backgroundColor:t.palette[r].dark},"&.Mui-selected.Mui-disabled":{backgroundColor:t.palette[a].dark}}})),h=n(75545),x=n(80184),f=["value","onChange"];function p(e){var t=e.value,n=e.onChange,c=(0,i.Z)(e,f),u=(0,l.useCallback)((function(e,t){return n(t||"")}),[n]);return(0,x.jsx)(a.Z,(0,r.Z)((0,r.Z)({exclusive:!0,onChange:u,value:t||o.N},c),{},{children:o.N.map((function(e){return(0,x.jsx)(d,{value:e,selectedColor:e,children:(0,x.jsx)(s.Z,{sx:{fontSize:"2em",lineHeight:1},children:h.h[e]})},e)}))}))}},73578:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(1413),i=n(45987),a=n(90388),s=n(72791),l=n(2191),o=n(24351),c=n(55942),u=n(91839),d=n(80184),h=["value","onChange"];function x(e){var t=e.value,n=e.onChange,x=(0,i.Z)(e,h),f=(0,s.useCallback)((function(e,t){return n(t||"")}),[n]);return(0,d.jsx)(u.Z,(0,r.Z)((0,r.Z)({exclusive:!0,onChange:f,value:t||o.yd},x),{},{children:o.yd.map((function(e){var t;return(0,d.jsx)(a.Z,{value:e,children:(0,d.jsx)(c.Z,{src:null===(t=l.Z.weaponTypes)||void 0===t?void 0:t[e],size:2})},e)}))}))}},44824:function(e,t,n){n.d(t,{Af:function(){return u},EM:function(){return x},OQ:function(){return o},bq:function(){return c},sZ:function(){return d},x3:function(){return h}});var r=n(37762),i=n(93433),a=n(24351),s=n(19272),l=n(44217),o=["rarity","level","artsetkey","efficiency","mefficiency","probability"],c=["probability"];function u(){return{artSetKeys:[],rarity:(0,i.Z)(a.En),levelLow:0,levelHigh:20,slotKeys:(0,i.Z)(a.eV),mainStatKeys:[],substats:[],location:"",exclusion:["excluded","included"],locked:["locked","unlocked"]}}var d=function(){return{filterOption:u(),ascending:!1,sortType:o[0]}};function h(e,t){return{rarity:{getValue:function(e){var t;return null!==(t=e.rarity)&&void 0!==t?t:0},tieBreaker:"level"},level:{getValue:function(e){var t;return null!==(t=e.level)&&void 0!==t?t:0},tieBreaker:"artsetkey"},artsetkey:{getValue:function(e){var t;return null!==(t=e.setKey)&&void 0!==t?t:""},tieBreaker:"level"},efficiency:{getValue:function(t){return s.Z.getArtifactEfficiency(t,e).currentEfficiency}},mefficiency:{getValue:function(t){return s.Z.getArtifactEfficiency(t,e).maxEfficiency}},probability:{getValue:function(e){if(!Object.keys(t).length)return 0;var n=e.probability;return void 0===n?(0,l.B)(e,t):n}}}}function x(){return{exclusion:function(e,t){return!(!t.includes("included")&&!e.exclude)&&!(!t.includes("excluded")&&e.exclude)},locked:function(e,t){return!(!t.includes("locked")&&e.lock)&&!(!t.includes("unlocked")&&!e.lock)},location:function(e,t){return!t||("Inventory"===t&&!e.location||(!("Equipped"!==t||!e.location)||t===e.location))},artSetKeys:function(e,t){return!t.length||t.includes(e.setKey)},slotKeys:function(e,t){return t.includes(e.slotKey)},mainStatKeys:function(e,t){return!t.length||t.includes(e.mainStatKey)},levelLow:function(e,t){return t<=e.level},levelHigh:function(e,t){return t>=e.level},rarity:function(e,t){return t.includes(e.rarity)},substats:function(e,t){var n,i=(0,r.Z)(t);try{var a=function(){var t=n.value;if(t&&!e.substats.some((function(e){return e.key===t})))return{v:!1}};for(i.s();!(n=i.n()).done;){var s=a();if("object"===typeof s)return s.v}}catch(l){i.e(l)}finally{i.f()}return!0}}}},51873:function(e,t,n){n.r(t),n.d(t,{default:function(){return ti}});var r=n(29439),i=n(63833),a=n(45781),s=n(19701),l=n(35893),o=n(66630),c=n(37355),u=n(68870),d=n(47047),h=n(39504),x=n(61889),f=n(57621),p=n(20890),m=n(25228),v=n(43896),Z=n(24518),j=n(2199),g=n(23786),y=n(56125),b=n(9585),k=n(94721),w=n(89673),C=n(55818),S=n(3721),P=n(72791),E=n(22020),K=n(43504),A=n(16871),_=n(3992),O=n(71310),D=n(3082),M=n(2380),I=n(68198),L=n(91702),z=n(10600),R=n(33890),T=n(1413),B=n(53174),q=n(54483),N=n(81918),W=n(45987),V=n(49670),G=n(66934),F=n(92443),H=n(80184),U=["name","children","value","placeholder","defaultValue","onValueChange","percent","disabled","onReset"],$=(0,G.ZP)(j.Z)({display:"flex"});function J(e){var t=e.name,n=e.children,r=e.value,i=e.placeholder,a=e.defaultValue,s=void 0===a?0:a,l=e.onValueChange,o=e.percent,c=void 0!==o&&o,u=e.disabled,d=void 0!==u&&u,h=e.onReset,x=(0,W.Z)(e,U);return(0,H.jsxs)($,(0,T.Z)((0,T.Z)({},x),{},{children:[n,(0,H.jsx)(F.Z,{sx:{whiteSpace:"nowrap"},children:t}),(0,H.jsx)(z.CC,{sx:{flexBasis:30,flexGrow:1},children:(0,H.jsx)(z.ZP,{sx:{px:1},inputProps:{sx:{textAlign:"right"}},float:c,placeholder:i,value:r,onChange:l,disabled:d,endAdornment:c?"%":void 0})}),(0,H.jsx)(Z.Z,{onClick:function(){return h?h():l(s)},disabled:d||r===s,children:(0,H.jsx)(V.Z,{})})]}))}var X=n(2693),Y=n(26138),Q=n(79406),ee=n(24351),te=n(91732),ne=n(75545);function re(){var e=(0,P.useContext)(X.R).data,t=(0,P.useState)(!1),n=(0,r.Z)(t,2),i=n[0],a=n[1],s=(0,P.useCallback)((function(){return a(!i)}),[a,i]),l=e.get(Y.ri.enemy.level),o=e.get(Y.ri.enemy.defRed),u=e.get(Y.ri.enemy.defIgn);return(0,H.jsxs)(O.Z,{children:[(0,H.jsx)(h.Z,{children:(0,H.jsxs)(x.ZP,{container:!0,children:[(0,H.jsx)(x.ZP,{item:!0,flexGrow:1,alignItems:"center",children:(0,H.jsxs)(x.ZP,{container:!0,spacing:1,children:[(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsx)(N.Z,{size:"small",color:"success",label:(0,H.jsxs)("span",{children:[Q.ZP.get(l.info.key)," ",(0,H.jsx)("strong",{children:l.value})]})})}),ee.Kj.map((function(e){return(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsx)(p.Z,{children:(0,H.jsx)(ie,{element:e})},e)},e)})),(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsxs)(p.Z,{children:["DEF Reduction ",(0,Q.EC)(o.value,o.unit)]})}),(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsxs)(p.Z,{children:["DEF Ignore ",(0,Q.EC)(u.value,u.unit)]})})]})}),(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsx)(te.Z,{expand:i,onClick:s,"aria-expanded":i,"aria-label":"show more",size:"small",sx:{p:0},children:(0,H.jsx)(c.Z,{})})})]})}),(0,H.jsx)(y.Z,{in:i,timeout:"auto",unmountOnExit:!0,children:(0,H.jsx)(h.Z,{sx:{pt:0},children:(0,H.jsx)(ae,{})})})]})}function ie(e){var t=e.element,n=(0,P.useContext)(X.R).data.get(Y.ri.enemy["".concat(t,"_res_")]),r=!isFinite(n.value)?(0,H.jsxs)("span",{children:[ne.h[t]," IMMUNE"]}):(0,H.jsxs)("span",{children:[ne.h[t],"RES ",(0,H.jsx)("strong",{children:(0,Q.EC)(n.value,n.unit)})]});return(0,H.jsx)(L.Z,{color:t,children:r})}function ae(e){var t,n,r,i=e.bsProps,a=void 0===i?{xs:12,md:6}:i,s=(0,P.useContext)(X.R),l=s.data,o=s.character.enemyOverride,c=s.characterDispatch,u=null!==(t=o.enemyLevel)&&void 0!==t?t:l.get(Y.ri.lvl).value,d=null!==(n=o.enemyDefIgn_)&&void 0!==n?n:0,h=null!==(r=o.enemyDefRed_)&&void 0!==r?r:0;return(0,H.jsxs)(x.ZP,{container:!0,spacing:1,children:[(0,H.jsx)(x.ZP,(0,T.Z)((0,T.Z)({item:!0},a),{},{children:(0,H.jsx)(Z.Z,{fullWidth:!0,sx:{height:"100%"},size:"small",component:"a",color:"warning",href:"https://genshin-impact.fandom.com/wiki/Resistance#Base_Enemy_Resistances",target:"_blank",rel:"noreferrer",children:"To get the specific resistance values of enemies, please visit the wiki."})})),(0,H.jsx)(x.ZP,(0,T.Z)((0,T.Z)({item:!0},a),{},{children:(0,H.jsx)(J,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,H.jsx)("b",{children:Q.ZP.get("enemyLevel")}),value:u,placeholder:Q.ZP.getStr("enemyLevel"),defaultValue:l.get(Y.ri.lvl).value,onValueChange:function(e){return c({type:"enemyOverride",statKey:"enemyLevel",value:e})},onReset:function(){return c({type:"enemyOverride",statKey:"enemyLevel",value:void 0})}})})),ee.Kj.map((function(e){var t="".concat(e,"_enemyRes_"),n=o[t],r=n===Number.MAX_VALUE;return(0,H.jsx)(x.ZP,(0,T.Z)((0,T.Z)({item:!0},a),{},{children:(0,H.jsx)(J,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,H.jsx)(L.Z,{color:e,children:(0,H.jsx)("b",{children:Q.ZP.get(t)})}),value:n?r?1/0:n:10,placeholder:r?"Immune ":Q.ZP.getStr(t),defaultValue:10,onValueChange:function(e){return c({type:"enemyOverride",statKey:t,value:e})},disabled:r,percent:!0,children:(0,H.jsxs)(Z.Z,{color:e,onClick:function(){return c({type:"enemyOverride",statKey:t,value:r?10:Number.MAX_VALUE})},children:[(0,H.jsx)(q.G,{icon:r?B.a3n:B.pL1,className:"fa-fw"})," Immunity"]})})}),e)})),(0,H.jsx)(x.ZP,(0,T.Z)((0,T.Z)({item:!0},a),{},{children:(0,H.jsx)(J,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,H.jsx)("b",{children:Q.ZP.get("enemyDefIgn_")}),value:d,placeholder:Q.ZP.getStr("enemyDefIgn_"),defaultValue:0,onValueChange:function(e){return c({type:"enemyOverride",statKey:"enemyDefIgn_",value:e})},percent:!0})})),(0,H.jsx)(x.ZP,(0,T.Z)((0,T.Z)({item:!0},a),{},{children:(0,H.jsx)(J,{sx:{bgcolor:function(e){return e.palette.contentLight.main},width:"100%"},name:(0,H.jsx)("b",{children:Q.ZP.get("enemyDefRed_")}),value:h,placeholder:Q.ZP.getStr("enemyDefRed_"),defaultValue:0,onValueChange:function(e){return c({type:"enemyOverride",statKey:"enemyDefRed_",value:e})},percent:!0})})),(0,H.jsx)(x.ZP,{item:!0,xs:12,children:(0,H.jsx)("small",{children:"Note: Genshin Impact halves resistance shred values below 0%. For the sake of calculations enter the RAW value and GO will do the rest. (e.g. 10% - 20% = -10%)"})})]})}var se=n(32490),le=n(55942),oe=n(2139),ce=n(53343),ue=n(8430),de=n(50920),he=n(53561),xe=n(42320),fe=n(47639),pe=n(72056),me=n(60393),ve=n(30168),Ze=n(97719),je=n(95193),ge=n(40165),ye=n(30418),be=n(31284),ke=n(95614),we=n(16002),Ce=n(52791),Se=n(88034),Pe=n(78661);function Ee(){var e=(0,P.useContext)(X.R).data,t=(0,ue.U)(e);return(0,H.jsx)(Ce.Z,{sx:{mr:-1,mb:-1},children:(0,H.jsx)(we.ZP,{columns:{xs:1,sm:2,md:3,xl:4},spacing:1,children:t.map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,H.jsx)(Ke,{displayNs:i,sectionKey:n},n)}))})})}function Ke(e){var t=e.displayNs,n=e.sectionKey,i=(0,P.useContext)(X.R),a=i.data,s=i.oldData,l=(0,xe.Z)((0,ue.f)(a,n),[a,n]),o=(0,P.useMemo)((function(){return(0,me.xh)(t,(function(e,t){return(0,Pe.UF)(["display",n,t])}))}),[t,n]);if(!l)return(0,H.jsx)(_.Z,{});var c=l.title,u=l.icon,d=l.action;return(0,H.jsxs)(_.Z,{children:[(0,H.jsx)(b.Z,{avatar:u&&(0,H.jsx)(le.Z,{size:2,sx:{m:-1},src:u}),title:c,action:d,titleTypographyProps:{variant:"subtitle1"}}),(0,H.jsx)(k.Z,{}),(0,H.jsx)(h.Z,{children:Object.entries(t).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,H.jsx)(Se.JW,{node:i,oldValue:s?s.get(o[n]).value:void 0},n)}))})]})}var Ae=n(37503),_e=n(31148),Oe=n(56928),De=n(72838),Me=n(90543);function Ie(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,P.useState)(e),n=(0,r.Z)(t,2),i=n[0],a=n[1],s=(0,P.useCallback)((function(){return a(!0)}),[a]),l=(0,P.useCallback)((function(){return a(!1)}),[a]);return[i,s,l]}var Le=n(68544),ze=n(2191),Re=n(9321),Te=n(44824),Be=n(70645),qe=n(46956),Ne=n(96739),We=n(99405),Ve=n(98268),Ge=n(63204),Fe=n(66647),He=n(13967),Ue=n(12065),$e=n(19272),Je=n(947),Xe=n(63372),Ye=n(96106),Qe=n(20005),et=n(50428);function tt(e){var t,n,r=e.artifactId,i=e.slotKey,a=e.mainStatAssumptionLevel,s=void 0===a?0:a,l=e.showLocation,o=void 0!==l&&l,c=e.onClick,d=e.BGComponent,h=void 0===d?_.Z:d,x=(0,Xe.Z)(r),f=(0,xe.Z)(_e.y.get(null===x||void 0===x?void 0:x.setKey),[x]),m=(0,P.useCallback)((function(e){return(0,H.jsx)(Fe.Z,{onClick:c,sx:{height:"100%"},children:e})}),[c]),v=(0,He.Z)();if(!x)return(0,H.jsx)(h,{sx:{display:"flex",height:"100%",alignItems:"center",justifyContent:"center"},children:(0,H.jsx)(u.Z,{component:"img",src:ze.Z.slot[i],sx:{width:"25%",height:"auto",opacity:.7}})});var Z=x.slotKey,j=x.rarity,g=x.level,y=x.mainStatKey,b=x.substats,k=x.location,w=Math.max(Math.min(s,4*j),g),C=Q.ZP.unit(y),S="roll"+(Math.floor(Math.max(g,0)/4)+1),E=ee.Kj.find((function(e){return x.mainStatKey.includes(e)})),K=E?(0,Ue.Fq)(v.palette[E].main,.6):(0,Ue.Fq)(v.palette.secondary.main,.6);return(0,H.jsx)(h,{sx:{height:"100%"},children:(0,H.jsx)(Qe.Z,{condition:!!c,wrapper:m,children:(0,H.jsxs)(u.Z,{display:"flex",height:"100%",children:[(0,H.jsxs)(u.Z,{className:"grad-".concat(j,"star"),sx:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,H.jsx)(et.Z,{slotKey:Z,sheet:f,children:(0,H.jsx)(u.Z,{component:"img",src:null!==(t=null===f||void 0===f?void 0:f.slotIcons[Z])&&void 0!==t?t:"",sx:{m:-1,maxHeight:"110%",maxWidth:"110%"}})}),(0,H.jsxs)(u.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[(0,H.jsx)(N.Z,{size:"small",label:(0,H.jsx)("strong",{children:" +".concat(g)}),color:S}),o&&(0,H.jsx)(N.Z,{size:"small",label:(0,H.jsx)(rt,{location:k}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),(0,H.jsx)(N.Z,{size:"small",sx:{position:"absolute",bottom:0,mb:1,backgroundColor:K},label:(0,H.jsxs)(p.Z,{variant:"h6",sx:{display:"flex",gap:1,px:1,zIndex:1},children:[(0,H.jsx)(Ye.Z,{placement:"top",title:(0,H.jsx)(p.Z,{children:Q.ZP.getArtStr(y)}),disableInteractive:!0,children:(0,H.jsx)("span",{children:E?ne.h[E]:ne.Z[y]})}),(0,H.jsxs)(L.Z,{color:w!==g?"warning":void 0,children:[(0,Q.qs)(null!==(n=$e.Z.mainStatValue(y,j,w))&&void 0!==n?n:0,Q.ZP.unit(y)),C]})]})})]}),(0,H.jsx)(u.Z,{display:"flex",flexDirection:"column",justifyContent:"space-between",sx:{p:1},children:b.map((function(e,t){return(0,H.jsx)(nt,{stat:e},t+e.key)}))})]})})})}function nt(e){var t,n,r=e.stat;if(!r.value)return null;var i=null!==(t=null===(n=r.rolls)||void 0===n?void 0:n.length)&&void 0!==t?t:0,a="roll".concat((0,me.uZ)(i,1,6)),s=Q.ZP.unit(r.key);return(0,H.jsx)(u.Z,{display:"flex",gap:1,alignContent:"center",children:(0,H.jsxs)(p.Z,{sx:{flexGrow:1,display:"flex",gap:1},color:i?"".concat(a,".main"):"error.main",component:"span",children:[(0,H.jsx)(Ye.Z,{placement:"top",title:(0,H.jsx)(p.Z,{children:r.key&&Q.ZP.getArtStr(r.key)}),disableInteractive:!0,children:(0,H.jsx)("span",{children:ne.Z[r.key]})}),(0,H.jsx)("span",{children:"".concat((0,Q.qs)(r.value,Q.ZP.unit(r.key))).concat(s)})]})})}function rt(e){var t=e.location,n=(0,xe.Z)(Je.Z.get(null!==t&&void 0!==t?t:""),[t]);return n?(0,H.jsx)(Ye.Z,{placement:"right-end",title:(0,H.jsx)(p.Z,{children:n.name}),children:(0,H.jsx)(le.Z,{src:n.thumbImgSide,sx:{height:"3em",marginTop:"-1.5em",marginLeft:"-0.5em"}})}):(0,H.jsx)(Ge.Z,{})}var it,at,st=n(25617),lt=n(66218),ot=n(73036),ct=n(74480),ut=n(41717);function dt(e){var t=e.weaponId,n=e.showLocation,r=void 0!==n&&n,i=e.onClick,a=e.BGComponent,s=void 0===a?_.Z:a,l=(0,ct.Z)(t),o=(0,xe.Z)((null===l||void 0===l?void 0:l.key)&&lt.Z.get(l.key),[null===l||void 0===l?void 0:l.key]),c=(0,P.useCallback)((function(e){return(0,H.jsx)(Fe.Z,{sx:{height:"100%"},onClick:i,children:e})}),[i]),h=(0,P.useMemo)((function(){return o&&l&&(0,ot.mP)([o.data,(0,ot.v0)(l)])}),[o,l]);if(!l||!o||!h)return(0,H.jsx)(s,{sx:{height:"100%"},children:(0,H.jsx)(d.Z,{variant:"rectangular",sx:{width:"100%",height:"100%"}})});var x=l.refinement,f=l.location;return(0,H.jsx)(s,{sx:{height:"100%"},children:(0,H.jsx)(Qe.Z,{condition:!!i,wrapper:c,children:(0,H.jsxs)(u.Z,{display:"flex",height:"100%",alignItems:"stretch",children:[(0,H.jsxs)(u.Z,{className:"grad-".concat(o.rarity,"star"),sx:{height:"100%",position:"relative",flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end"},children:[(0,H.jsx)(ut.Z,{sheet:o,children:(0,H.jsx)(u.Z,{component:"img",src:o.img,sx:{mx:-1,maxHeight:"100%",maxWidth:"100%"}})}),(0,H.jsxs)(u.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"space-between",pointerEvents:"none"},children:[(0,H.jsx)(N.Z,{size:"small",label:(0,H.jsx)("strong",{children:lt.Z.getLevelString(l)}),color:"primary"}),r&&(0,H.jsx)(N.Z,{size:"small",label:(0,H.jsx)(xt,{location:f}),color:"secondary",sx:{overflow:"visible",".MuiChip-label":{overflow:"visible"}}})]}),(0,H.jsx)(u.Z,{sx:{position:"absolute",width:"100%",height:"100%",p:.5,opacity:.85,display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},children:o.hasRefinement&&(0,H.jsx)(N.Z,{size:"small",color:"info",label:(0,H.jsxs)("strong",{children:["R",x]})})})]}),(0,H.jsxs)(u.Z,{display:"flex",flexDirection:"column",sx:{p:1},children:[(0,H.jsx)(ht,{node:h.get(Y.qH.weapon.main)}),(0,H.jsx)(ht,{node:h.get(Y.qH.weapon.sub)})]})]})})})}function ht(e){var t=e.node;if(!t.info.key)return null;var n=(0,Q.EC)(t.value,t.unit,t.unit?void 0:0);return(0,H.jsx)(u.Z,{display:"flex",gap:1,alignContent:"center",children:(0,H.jsxs)(p.Z,{sx:{flexGrow:1,display:"flex",gap:1},component:"span",children:[(0,H.jsx)(Ye.Z,{placement:"top",title:(0,H.jsx)(p.Z,{children:t.info.key&&Q.ZP.getArtStr(t.info.key)}),disableInteractive:!0,children:(0,H.jsx)("span",{children:ne.Z[t.info.key]})}),(0,H.jsx)("span",{children:n})]})})}function xt(e){var t=e.location,n=(0,xe.Z)(Je.Z.get(null!==t&&void 0!==t?t:""),[t]);return n?(0,H.jsx)(Ye.Z,{placement:"right-end",title:(0,H.jsx)(p.Z,{children:n.name}),children:(0,H.jsx)(le.Z,{src:n.thumbImgSide,sx:{height:"3em",marginTop:"-1.5em",marginLeft:"-0.5em"}})}):(0,H.jsx)(Ge.Z,{})}function ft(e){var t=e.index,n=e.compareBuild,i=e.extraButtons,a=e.disabled,s=(0,P.useContext)(Oe.t).database,l=(0,P.useContext)(X.R),o=l.character,c=l.data,u=l.oldData,f=l.mainStatAssumptionLevel,m=(0,xe.Z)(_e.y.getAll,[]),v=(0,P.useState)(void 0),j=(0,r.Z)(v,2),g=j[0],y=j[1],b=(0,P.useCallback)((function(){return y(void 0)}),[y]),k=(0,P.useCallback)((function(){if(window.confirm("Do you want to equip this build to this character?")){var e=Object.fromEntries(ee.eV.map((function(e){return[e,c.get(Y.ri.art[e].id).value]})));s.equipArtifacts(o.key,e),s.setWeaponLocation(c.get(Y.ri.weapon.id).value,o.key)}}),[o,c,s]);if(!o||!m||!u)return null;var w=ee.eV.every((function(e){return c.get(Y.ri.art[e].id).value===u.get(Y.ri.art[e].id).value}))&&c.get(Y.ri.weapon.id).value===u.get(Y.ri.weapon.id).value,C=(0,T.Z)({},l);n||(C.oldData=void 0);var S={};return ee.eV.forEach((function(e){var t=c.get(Y.ri.art[e].set).value;t&&(S[t]?S[t].push(e):S[t]=[e])})),(0,H.jsx)(O.Z,{children:(0,H.jsxs)(P.Suspense,{fallback:(0,H.jsx)(d.Z,{variant:"rectangular",width:"100%",height:600}),children:[g&&(0,H.jsx)(pt,{newOld:g,mainStatAssumptionLevel:f,onClose:b}),(0,H.jsxs)(h.Z,{children:[(0,H.jsxs)(Ce.Z,{display:"flex",gap:1,sx:{pb:1},flexWrap:"wrap",children:[void 0!==t&&(0,H.jsx)(st.Z,{color:"info",children:(0,H.jsx)(p.Z,{children:(0,H.jsxs)("strong",{children:["#",t+1,w?" (Equipped)":""]})})}),Object.entries(S).sort((function(e,t){var n=(0,r.Z)(e,2),i=(n[0],n[1]),a=(0,r.Z)(t,2);a[0];return a[1].length-i.length})).map((function(e){var t,n=(0,r.Z)(e,2),i=n[0],a=n[1];return(0,H.jsx)(Ce.Z,{children:(0,H.jsx)(st.Z,{color:w?"success":"primary",children:(0,H.jsxs)(p.Z,{children:[a.map((function(e){return(0,ke.Ir)(e)}))," ",null!==(t=null===m||void 0===m?void 0:m[i].name)&&void 0!==t?t:""]})})},i)})),(0,H.jsx)(Ce.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"flex-end"}}),(0,H.jsx)(Z.Z,{size:"small",color:"success",onClick:k,disabled:a||w,children:"Equip Build"}),i]}),(0,H.jsxs)(x.ZP,{container:!0,spacing:1,sx:{pb:1},children:[(0,H.jsx)(x.ZP,{item:!0,xs:6,sm:4,md:3,lg:2,children:(0,H.jsx)(dt,{showLocation:!0,weaponId:c.get(Y.ri.weapon.id).value})}),ee.eV.map((function(e){return(0,H.jsx)(x.ZP,{item:!0,xs:6,sm:4,md:3,lg:2,children:(0,H.jsx)(tt,{showLocation:!0,slotKey:e,artifactId:c.get(Y.ri.art[e].id).value,mainStatAssumptionLevel:f,onClick:function(){var t=o.equippedArtifacts[e],n=c.get(Y.ri.art[e].id).value;y({oldId:t!==n?t:void 0,newId:n})}})},e)}))]}),(0,H.jsx)(X.R.Provider,{value:C,children:(0,H.jsx)(Ee,{})})]})]})})}function pt(e){var t=e.newOld,n=t.newId,r=t.oldId,i=e.mainStatAssumptionLevel,a=e.onClose;return(0,H.jsx)(Re.Z,{open:!!n,onClose:a,containerProps:{maxWidth:r?"md":"xs"},children:(0,H.jsx)(_.Z,{children:(0,H.jsxs)(h.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"stretch",gap:2,height:"100%"},children:[r&&(0,H.jsx)(Ce.Z,{children:(0,H.jsx)(De.Z,{artifactId:r,mainStatAssumptionLevel:i,disableEditSetSlot:!0,canExclude:!0,canEquip:!0})}),r&&(0,H.jsx)(Ce.Z,{display:"flex",flexGrow:1}),r&&(0,H.jsx)(Ce.Z,{display:"flex",alignItems:"center",justifyContent:"center",children:(0,H.jsx)(O.Z,{sx:{display:"flex"},children:(0,H.jsx)(Ve.Z,{sx:{fontSize:40}})})}),r&&(0,H.jsx)(Ce.Z,{display:"flex",flexGrow:1}),(0,H.jsx)(Ce.Z,{children:(0,H.jsx)(De.Z,{artifactId:n,mainStatAssumptionLevel:i,disableEditSetSlot:!0,canExclude:!0,canEquip:!0})})]})})})}function mt(e){var t=e.artId,n=e.weaponId,i=(0,E.$)("page_character").t,a=Ie(!1),s=(0,r.Z)(a,3),l=s[0],o=s[1],c=s[2],u=(0,P.useContext)(Oe.t).database,h=(0,P.useContext)(X.R),x=h.character,f=h.character,m=f.key,v=f.equippedArtifacts,j=h.characterSheet,g=h.data,y=h.mainStatAssumptionLevel,b=h.characterDispatch,k=(0,P.useMemo)((function(){var e=u._getArt(null!==t&&void 0!==t?t:""),n=(0,me.xh)(v,(function(t,n){return n===(null===e||void 0===e?void 0:e.slotKey)?e:u._getArt(t)}));return Object.values(n)}),[u,v,t]),w=(0,fe.Z)(m,y,k,n?u._getWeapon(n):void 0);return w?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(Re.Z,{open:l,onClose:c,containerProps:{maxWidth:"xl"},children:(0,H.jsx)(P.Suspense,{fallback:(0,H.jsx)(d.Z,{variant:"rectangular",width:"100%",height:600}),children:(0,H.jsx)(X.R.Provider,{value:{characterSheet:j,character:x,characterDispatch:b,mainStatAssumptionLevel:y,data:w[m].target,teamData:w,oldData:g},children:(0,H.jsx)(ft,{compareBuild:!0,extraButtons:(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(se.Hn,{size:"small"}),(0,H.jsx)(se.oX,{size:"small"}),(0,H.jsx)(Z.Z,{size:"small",color:"error",onClick:c,children:(0,H.jsx)(Ne.Z,{})})]})})})})}),(0,H.jsx)(ge.Z,{title:(0,H.jsx)(p.Z,{children:i(it||(it=(0,ve.Z)(["tabEquip.compare"])))}),placement:"top",arrow:!0,children:(0,H.jsx)(Z.Z,{color:"info",size:"small",onClick:o,children:(0,H.jsx)(We.Z,{})})})]}):null}var vt={xs:6,sm:6,md:9,lg:12,xl:12},Zt=(0,P.lazy)((function(){return n.e(23).then(n.bind(n,80367))}));function jt(e){var t=e.onChangeId,n=e.slotKey,i=e.show,a=e.onClose,s=(0,E.$)("page_character").t,l=(0,P.useContext)(Oe.t).database,o=(0,P.useCallback)((function(e){t(e),a()}),[t,a]),c=(0,P.useCallback)((function(e,t){return(0,T.Z)((0,T.Z)((0,T.Z)({},e),t),{},{slotKeys:[n]})}),[n]),f=(0,P.useReducer)(c,(0,T.Z)((0,T.Z)({},(0,Te.Af)()),{},{slotKeys:[n]})),m=(0,r.Z)(f,2),v=m[0],Z=m[1],j=(0,Le.Z)(),g=(0,r.Z)(j,2),y=g[0],b=g[1];(0,P.useEffect)((function(){return l.followAnyArt(b)}),[l,b]);var w=(0,Be.Z)(),C=(0,P.useMemo)((function(){return(0,Te.EM)()}),[]),S=(0,P.useMemo)((function(){var e=(0,qe.C)(v,C);return y&&l._getArts().filter(e).map((function(e){return e.id})).slice(0,vt[w])}),[y,l,C,v,w]);return(0,H.jsx)(Re.Z,{open:i,onClose:a,containerProps:{maxWidth:"xl"},children:(0,H.jsxs)(_.Z,{children:[(0,H.jsxs)(h.Z,{sx:{py:1,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,H.jsxs)(p.Z,{variant:"h6",children:[n?(0,H.jsx)(le.Z,{src:ze.Z.slot[n]}):null," ",s(at||(at=(0,ve.Z)(["tabEquip.swapArt"])))]}),(0,H.jsx)(I.Z,{onClick:a})]}),(0,H.jsx)(k.Z,{}),(0,H.jsxs)(h.Z,{children:[(0,H.jsx)(P.Suspense,{fallback:(0,H.jsx)(d.Z,{variant:"rectangular",width:"100%",height:200}),children:(0,H.jsx)(Zt,{filterOption:v,filterOptionDispatch:Z})}),(0,H.jsx)(u.Z,{mt:1,children:(0,H.jsx)(P.Suspense,{fallback:(0,H.jsx)(d.Z,{variant:"rectangular",width:"100%",height:300}),children:(0,H.jsx)(x.ZP,{container:!0,spacing:1,columns:{xs:2,md:3,lg:4},children:S.map((function(e){return(0,H.jsx)(x.ZP,{item:!0,xs:1,children:(0,H.jsx)(De.Z,{artifactId:e,extraButtons:(0,H.jsx)(mt,{artId:e}),onClick:o})},e)}))})})})]})]})})}var gt,yt,bt,kt,wt,Ct=n(90388),St=n(91839),Pt=n(10157),Et=n(66045);function Kt(e){var t=e.onChangeId,n=e.weaponTypeKey,i=e.show,a=e.onClose,s=(0,E.$)("page_character").t,l=(0,P.useContext)(Oe.t).database,o=(0,P.useCallback)((function(e){t(e),a()}),[t,a]),c=(0,Le.Z)(),d=(0,r.Z)(c,2),f=d[0],m=d[1];(0,P.useEffect)((function(){return l.followAnyWeapon(m)}),[m,l]);var v=(0,xe.Z)(lt.Z.getAll,[]),Z=(0,P.useMemo)((function(){return v&&(0,Et.Xg)(v)}),[v]),j=(0,P.useMemo)((function(){return v&&(0,Et.Sn)(v)}),[v]),g=(0,P.useState)([5,4,3]),y=(0,r.Z)(g,2),b=y[0],w=y[1],C=(0,P.useMemo)((function(){var e;return null!==(e=Z&&j&&f&&l._getWeapons().filter((0,qe.C)({weaponType:n,rarity:b},Z)).sort((0,qe.e)("level",!1,j)).map((function(e){return e.id})))&&void 0!==e?e:[]}),[f,l,Z,j,b,n]);return(0,H.jsx)(Re.Z,{open:i,onClose:a,children:(0,H.jsxs)(_.Z,{children:[(0,H.jsx)(h.Z,{sx:{py:1},children:(0,H.jsxs)(x.ZP,{container:!0,children:[(0,H.jsx)(x.ZP,{item:!0,flexGrow:1,children:(0,H.jsxs)(p.Z,{variant:"h6",children:[n?(0,H.jsx)(le.Z,{src:ze.Z.weaponTypes[n]}):null," ",s(gt||(gt=(0,ve.Z)(["tabEquip.swapWeapon"])))]})}),(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsx)(I.Z,{onClick:a})})]})}),(0,H.jsx)(k.Z,{}),(0,H.jsxs)(h.Z,{children:[(0,H.jsx)(u.Z,{mb:1,children:(0,H.jsx)(St.Z,{sx:{height:"100%"},onChange:function(e,t){return w(t)},value:b,size:"small",children:ee.wC.map((function(e){return(0,H.jsx)(Ct.Z,{value:e,children:(0,H.jsxs)(u.Z,{display:"flex",gap:1,children:[(0,H.jsx)("strong",{children:e}),(0,H.jsx)(Pt.t,{stars:1})]})},e)}))})}),(0,H.jsx)(x.ZP,{container:!0,spacing:1,children:C.map((function(e){return(0,H.jsx)(x.ZP,{item:!0,xs:6,sm:6,md:4,lg:3,children:(0,H.jsx)(Me.Z,{weaponId:e,onClick:o,extraButtons:(0,H.jsx)(mt,{weaponId:e})})},e)}))})]})]})})}var At=(0,P.lazy)((function(){return n.e(923).then(n.bind(n,74476))}));var _t=function(){var e=(0,E.$)("page_character").t,t=(0,P.useContext)(X.R),n=t.teamData,i=t.data,a=t.character,s=t.character,l=s.equippedWeapon,o=s.key,c=s.equippedArtifacts,d=t.characterSheet,f=t.mainStatAssumptionLevel,p=n[o].weaponSheet,m=(0,P.useState)(""),v=(0,r.Z)(m,2),j=v[0],g=v[1],y=(0,P.useCallback)((function(){return g(l)}),[l]),b=(0,P.useCallback)((function(){return g("")}),[]);(0,P.useEffect)((function(){j&&j!==l&&g(l)}),[j,l]);var k=(0,P.useContext)(Oe.t).database,w=(0,xe.Z)(_e.y.getAll,[]),C=(0,Le.Z)(),S=(0,r.Z)(C,2)[1];(0,P.useEffect)((function(){return k.followAnyArt(S)}));var K=(0,P.useMemo)((function(){return!!Object.values(c).filter((function(e){return e})).length}),[c]),A=(0,P.useCallback)((function(){a&&window.confirm("Do you want to move all currently equipped artifacts to inventory?")&&k.equipArtifacts(a.key,(0,me.O)(ee.eV,(function(e){return""})))}),[a,k]),_=(0,P.useMemo)((function(){return w&&_e.y.setEffects(w,i)}),[w,i]),D=(0,ye.Z)(),M=(0,je.Z)(D.breakpoints.up("xl")),I=(0,P.useMemo)((function(){return w&&_&&Object.entries(_).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,H.jsx)(O.Z,{sx:{flexGrow:1},children:(0,H.jsx)(h.Z,{children:(0,H.jsx)(x.ZP,{container:!0,spacing:1,flexDirection:"column",height:"100%",children:(0,H.jsx)(x.ZP,{item:!0,display:"flex",flexDirection:"column",gap:2,children:i.map((function(e){return(0,H.jsx)(be.Z,{setKey:n,setNumKey:e},n+e)}))})})})},n)}))}),[w,_]),L=(0,P.useMemo)((function(){return p.document.length>0&&(0,H.jsx)(O.Z,{children:(0,H.jsx)(h.Z,{children:(0,H.jsx)(Ae.Z,{sections:p.document})})})}),[p]);return(0,H.jsxs)(u.Z,{display:"flex",flexDirection:"column",gap:1,children:[(0,H.jsx)(P.Suspense,{fallback:!1,children:(0,H.jsx)(At,{weaponId:j,footer:!0,onClose:b,extraButtons:(0,H.jsx)(Mt,{weaponTypeKey:d.weaponTypeKey})})}),(0,H.jsx)(O.Z,{children:(0,H.jsx)(h.Z,{children:(0,H.jsx)(Ee,{})})}),(0,H.jsxs)(x.ZP,{container:!0,spacing:1,children:[M&&(0,H.jsxs)(x.ZP,{item:!0,xs:12,md:12,xl:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[L,K&&(0,H.jsx)(Z.Z,{color:"error",onClick:A,fullWidth:!0,children:e(yt||(yt=(0,ve.Z)(["tabEquip.unequipArts"])))}),I]}),(0,H.jsxs)(x.ZP,{item:!0,xs:12,md:12,xl:9,container:!0,spacing:1,children:[(0,H.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:4,display:"flex",flexDirection:"column",gap:1,children:(0,H.jsx)(Me.Z,{weaponId:l,onEdit:y,canEquip:!0,extraButtons:(0,H.jsx)(Dt,{weaponTypeKey:d.weaponTypeKey})})}),ee.eV.map((function(e){return(0,H.jsx)(x.ZP,{item:!0,xs:12,sm:6,md:4,children:i.get(Y.ri.art[e].id).value?(0,H.jsx)(De.Z,{artifactId:i.get(Y.ri.art[e].id).value,mainStatAssumptionLevel:f,extraButtons:(0,H.jsx)(It,{slotKey:e}),editor:!0,canExclude:!0,canEquip:!0}):(0,H.jsx)(Ot,{slotKey:e})},e)}))]}),!M&&(0,H.jsxs)(x.ZP,{item:!0,xs:12,md:12,xl:3,container:!0,spacing:1,children:[(0,H.jsx)(x.ZP,{item:!0,xs:12,md:6,lg:4,children:L}),(0,H.jsx)(x.ZP,{item:!0,xs:12,md:6,lg:4,children:I})]})]})]})};function Ot(e){var t=e.slotKey,n=(0,P.useContext)(X.R).character.key,i=(0,P.useContext)(Oe.t).database,a=Ie(),s=(0,r.Z)(a,3),l=s[0],o=s[1],c=s[2];return(0,H.jsxs)(O.Z,{sx:{height:"100%",width:"100%",minHeight:300,display:"flex",flexDirection:"column"},children:[(0,H.jsx)(h.Z,{children:(0,H.jsx)(p.Z,{children:(0,H.jsx)(ke.ZP,{slotKey:t})})}),(0,H.jsx)(k.Z,{}),(0,H.jsxs)(u.Z,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,H.jsx)(jt,{slotKey:t,show:l,onClose:c,onChangeId:function(e){return i.setArtLocation(e,n)}}),(0,H.jsx)(Z.Z,{onClick:o,color:"info",sx:{borderRadius:"1em"},children:(0,H.jsx)(Ze.Z,{sx:{height:100,width:100}})})]})]})}function Dt(e){var t=e.weaponTypeKey,n=(0,E.$)("page_character").t,i=(0,P.useContext)(X.R).character.key,a=(0,P.useContext)(Oe.t).database,s=Ie(),l=(0,r.Z)(s,3),o=l[0],c=l[1],u=l[2];return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(ge.Z,{title:(0,H.jsx)(p.Z,{children:n(bt||(bt=(0,ve.Z)(["tabEquip.swapWeapon"])))}),placement:"top",arrow:!0,children:(0,H.jsx)(Z.Z,{color:"info",size:"small",onClick:c,children:(0,H.jsx)(Ze.Z,{})})}),(0,H.jsx)(Kt,{weaponTypeKey:t,onChangeId:function(e){return a.setWeaponLocation(e,i)},show:o,onClose:u})]})}function Mt(e){var t=e.weaponTypeKey,n=(0,E.$)("page_character").t,i=(0,P.useContext)(X.R).character.key,a=(0,P.useContext)(Oe.t).database,s=Ie(),l=(0,r.Z)(s,3),o=l[0],c=l[1],u=l[2];return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(Z.Z,{color:"info",onClick:c,startIcon:(0,H.jsx)(Ze.Z,{}),children:n(kt||(kt=(0,ve.Z)(["tabEquip.swapWeapon"])))}),(0,H.jsx)(Kt,{weaponTypeKey:t,onChangeId:function(e){return a.setWeaponLocation(e,i)},show:o,onClose:u})]})}function It(e){var t=e.slotKey,n=(0,E.$)("page_character").t,i=(0,P.useContext)(X.R).character.key,a=(0,P.useContext)(Oe.t).database,s=Ie(),l=(0,r.Z)(s,3),o=l[0],c=l[1],u=l[2];return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(ge.Z,{title:(0,H.jsx)(p.Z,{children:n(wt||(wt=(0,ve.Z)(["tabEquip.swapArt"])))}),placement:"top",arrow:!0,children:(0,H.jsx)(Z.Z,{color:"info",size:"small",onClick:c,children:(0,H.jsx)(Ze.Z,{})})}),(0,H.jsx)(jt,{slotKey:t,show:o,onClose:u,onChangeId:function(e){return a.setArtLocation(e,i)}})]})}var Lt=n(74165),zt=n(15861),Rt=n(93433),Tt=n(94070),Bt=n(23060);function qt(){return new Worker(n.p+"static/js/BackgroundWorker.af0b638a.worker.js")}var Nt=n(21977),Wt=n(30865),Vt=n(14525),Gt=n(69292),Ft=n(20323),Ht=n(17278),Ut=n(9138),$t=n(9274),Jt=n(88504),Xt=n(66382),Yt=n(36030);function Qt(e){var t,n,r,i=e.index,a=e.setFilters,s=e.onChange,l=e.disabled,o=void 0!==l&&l,c=a[i],u=c.key,d=c.num,x=(0,E.$)("page_character").t,f=(0,xe.Z)(_e.y.getAll,[]),p=(0,P.useMemo)((function(){if(f)return ee.q2.filter((function(e){var t=e?Object.keys(f[e].setEffects):[],n=a.reduce((function(e,t,n){return t.key&&n!==i?e+t.num:e}),0);return!t.every((function(e){return parseInt(e)+n>5}))}))}),[f,a,i]);if(!p)return null;var m=a.reduce((function(e,t){return t.key?e+t.num:e}),0);return(0,H.jsxs)(O.Z,{children:[(0,H.jsxs)(j.Z,{sx:{width:"100%"},children:[f&&(0,H.jsx)(Yt.Y4,{flattenCorners:!0,showDefault:!0,size:"small",artSetKey:u,setArtSetKey:function(e){var t,n,r;return s(i,e,null!==(t=parseInt(Object.keys(null!==(n=null===(r=f[e])||void 0===r?void 0:r.setEffects)&&void 0!==n?n:{})[0]))&&void 0!==t?t:0)},allArtSetKeys:p,label:x("forceSet"),disabled:o,sx:{flexGrow:1},disable:function(e){return a.some((function(t){return t.key===e}))},defaultText:x("none")}),(0,H.jsx)(R.Z,{title:"".concat(d,"-set"),disabled:o||!u||m>=5,sx:{borderRadius:0},children:Object.keys(null!==(t=null===f||void 0===f||null===(n=f[u])||void 0===n?void 0:n.setEffects)&&void 0!==t?t:{}).map((function(e){var t=a.reduce((function(e,t){return t.key&&t.key!==u?e+t.num:e}),0);return parseInt(e)+t<=5&&(0,H.jsx)(g.Z,{onClick:function(){var t;return s(i,a[i].key,null!==(t=parseInt(e))&&void 0!==t?t:0)},children:"".concat(e,"-set")},e)}))})]}),!!u&&(0,H.jsx)(k.Z,{}),!!u&&(0,H.jsx)(h.Z,{sx:{display:"flex",flexDirection:"column",gap:2},children:Object.keys(null!==(r=null===f||void 0===f?void 0:f[u].setEffects)&&void 0!==r?r:{}).map((function(e){return parseInt(e)})).filter((function(e){return e<=d})).map((function(e){return(0,H.jsx)(be.Z,{setKey:u,setNumKey:e},u+e)}))})]})}var en=[0,4,8,12,16,20];function tn(e){var t=e.mainStatAssumptionLevel,n=void 0===t?0:t,r=e.setmainStatAssumptionLevel,i=e.disabled,a=(0,E.$)("page_character").t;return(0,H.jsx)(R.Z,{fullWidth:!0,color:n?"success":"primary",disabled:i,title:n?a("tabOptimize.assumptionLvl.lvl",{lvl:n}):a("tabOptimize.assumptionLvl.no"),children:en.map((function(e){return(0,H.jsx)(g.Z,{onClick:function(){return r(e)},children:e?a("tabOptimize.assumptionLvl.lvl",{lvl:e}):a("tabOptimize.assumptionLvl.no")},e)}))})}function nn(){var e=(0,P.useContext)(X.R),t=e.data,n=e.character,r=Object.keys(null===n||void 0===n?void 0:n.bonusStats);if(!r.length)return null;var i=r.map((function(e){return t.get(Y.ri.customBonus[e])}));return(0,H.jsxs)(O.Z,{children:[(0,H.jsx)(h.Z,{sx:{py:1},children:(0,H.jsx)(p.Z,{children:"Bonus Stats"})}),(0,H.jsx)(k.Z,{}),(0,H.jsx)(h.Z,{children:i.map((function(e){return(0,H.jsx)(Se.JW,{node:e},e.info.key)}))})]})}var rn=n(57482),an=n(52771),sn=1e7,ln=(0,G.ZP)("strong")({fontFamily:"monospace"}),on=(0,G.ZP)(rn.Z)((function(e){e.theme;return{height:10,borderRadius:5}}));function cn(e){var t,n,r,i,a=e.totBuildNumber,s=e.generatingBuilds,l=e.generationSkipped,o=e.generationProgress,c=e.generationDuration,u=e.characterName,d=e.maxBuildsToShow,h=null!==(t=null===a||void 0===a?void 0:a.toLocaleString())&&void 0!==t?t:a,f=a-l,m=null!==(n=null===o||void 0===o?void 0:o.toLocaleString())&&void 0!==n?n:o,v=null!==(r=null===l||void 0===l?void 0:l.toLocaleString())&&void 0!==r?r:l,Z=null!==(i=null===f||void 0===f?void 0:f.toLocaleString())&&void 0!==i?i:f,j=!!l&&(0,H.jsxs)("span",{children:["(",(0,H.jsx)("b",{children:v})," skipped)"]}),g="success",y="",b="",k=void 0;return s?(k=100*o/f,y=(0,H.jsxs)(p.Z,{children:["Generating and testing ",(0,H.jsxs)(ln,{children:[m,"/",Z]})," build configurations against the criteria for ",(0,H.jsx)("b",{children:u}),". ",j]}),b=(0,H.jsxs)(p.Z,{children:["Time elapsed: ",(0,H.jsx)(ln,{children:(0,an.e6)(Math.round(c))})]})):!s&&o?(k=100,y=(0,H.jsxs)(p.Z,{children:["Generated and tested ",(0,H.jsx)(ln,{children:Z})," Build configurations against the criteria for ",(0,H.jsx)("b",{children:u}),". ",j]}),b=(0,H.jsxs)(p.Z,{children:["Total duration: ",(0,H.jsx)(ln,{children:(0,an.e6)(Math.round(c))})]})):0===a?(y=(0,H.jsxs)(p.Z,{children:["Current configuration will not generate any builds for ",(0,H.jsx)("b",{children:u}),". Please change your Artifact configurations, or add/include more Artifacts."]}),g="error"):a>sn?(y=(0,H.jsxs)(p.Z,{children:["Current configuration will generate ",(0,H.jsx)(ln,{children:h})," potential builds for ",(0,H.jsx)("b",{children:u}),". This might take quite a while to generate..."]}),g="warning"):y=(0,H.jsxs)(p.Z,{children:["Current configuration ",a<=d?"generated":"will generate"," ",(0,H.jsx)(ln,{children:h})," builds for ",(0,H.jsx)("b",{children:u}),"."]}),(0,H.jsxs)(Tt.Z,{severity:g,variant:"filled",sx:{"& .MuiAlert-message":{flexGrow:1}},children:[y&&y,b&&b,void 0!==k&&(0,H.jsxs)(x.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsx)(p.Z,{children:"".concat(k.toFixed(1),"%")})}),(0,H.jsx)(x.ZP,{item:!0,flexGrow:1,children:(0,H.jsx)(on,{variant:"determinate",value:k,color:"primary"})})]})]})}var un=n(37762),dn=n(94294),hn=n(72247),xn=n(9912),fn=n(72456),pn=n(19913),mn=n(39783),vn=n(82839),Zn=n(90466),jn=n(12891),gn=n(42633),yn=n(27281),bn=n(64694),kn=n(62066);function wn(e){var t=e.chartData,n=e.plotBase,i=e.setPlotBase,a=e.disabled,s=void 0!==a&&a,l=(0,P.useState)(!1),o=(0,r.Z)(l,2),c=o[0],u=o[1],d=(0,P.useState)(!0),f=(0,r.Z)(d,2),m=f[0],v=f[1],j=(0,P.useContext)(X.R).data,b=["atk","hp","def","eleMas","critRate_","critDMG_","heal_","enerRech_"];"catalyst"!==j.get(Y.ri.weaponType).value&&b.push("physical_dmg_"),b.push("".concat(j.get(Y.ri.charEle).value,"_dmg_"));var w=(0,P.useMemo)((function(){var e,n;if(!t)return{displayData:null,downloadData:null};var r,i=t.data.map((function(e){var t=e.value;return{x:e.plot,y:t}})).sort((function(e,t){return e.x-t.x})),a=[],s=(0,un.Z)(i);try{for(s.s();!(r=s.n()).done;){for(var l=r.value,o=void 0;o=a.pop();)if(o.y>l.y){a.push(o);break}a.push(l)}}catch(u){s.e(u)}finally{s.f()}(null===(e=a[0])||void 0===e?void 0:e.x)!==(null===(n=i[0])||void 0===n?void 0:n.x)&&(i[0].min=a[0].y),a.forEach((function(e){e.min=e.y}));var c={minimum:a.map((function(e){return[e.x,e.y]})),allData:i.map((function(e){return[e.x,e.y]}))};return{displayData:i,downloadData:c}}),[t]),C=w.displayData,S=w.downloadData;return(0,H.jsxs)(O.Z,{children:[(0,H.jsx)(h.Z,{children:(0,H.jsxs)(x.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsx)(p.Z,{variant:"h6",children:"Optimization Target vs"})}),(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsxs)(R.Z,{title:n?Q.ZP.get(n):"Not Selected",color:n?"success":"primary",disabled:s,children:[(0,H.jsx)(g.Z,{onClick:function(){i("")},children:"Unselect"}),(0,H.jsx)(k.Z,{}),b.map((function(e){return(0,H.jsx)(g.Z,{onClick:function(){i(e)},children:Q.ZP.get(e)},e)}))]})}),(0,H.jsx)(x.ZP,{item:!0,flexGrow:1,children:(0,H.jsx)(ge.Z,{placement:"top",title:"Using data from the builder, this will generate a graph to visualize Optimization Target vs. a selected stat. The graph will show the maximum Optimization Target value per 0.01 of the selected stat.",children:(0,H.jsx)(dn.Z,{})})}),!!S&&(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsx)(Z.Z,{startIcon:m?(0,H.jsx)(hn.Z,{}):(0,H.jsx)(xn.Z,{}),color:m?"success":"secondary",onClick:function(){return v(!m)},children:"Show Min Stat Threshold"})}),!!S&&(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsx)(Z.Z,{color:"info",startIcon:(0,H.jsx)(fn.Z,{}),onClick:function(){return u(!c)},children:"Download Data"})})]})}),!!C&&(0,H.jsx)(k.Z,{}),t&&!!C&&(0,H.jsxs)(h.Z,{children:[(0,H.jsx)(y.Z,{in:!!S&&c,children:(0,H.jsx)(_.Z,{sx:{mb:2},children:(0,H.jsxs)(h.Z,{children:[(0,H.jsx)(p.Z,{children:"Min Data"}),(0,H.jsx)(Sn,{data:null===S||void 0===S?void 0:S.minimum}),(0,H.jsx)(p.Z,{children:"All Data"}),(0,H.jsx)(Sn,{data:null===S||void 0===S?void 0:S.allData})]})})}),(0,H.jsx)(Pn,{displayData:C,plotNode:t.plotNode,valueNode:t.valueNode,showMin:m})]})]})}var Cn=(0,G.ZP)("textarea")({width:"100%",fontFamily:"monospace",resize:"vertical",minHeight:"5em"});function Sn(e){var t=e.data;return(0,H.jsx)(Cn,{readOnly:!0,value:JSON.stringify(t),onClick:function(e){var t=e.target;t.selectionStart=0,t.selectionEnd=t.value.length}})}function Pn(e){var t,n,r=e.displayData,i=e.plotNode,a=e.valueNode,s=e.showMin,l=Q.ZP.unit(null===(t=i.info)||void 0===t?void 0:t.key),o=Q.ZP.unit(null===(n=a.info)||void 0===n?void 0:n.key);return(0,H.jsx)(pn.h,{width:"100%",height:600,children:(0,H.jsxs)(mn.c,{data:r,children:[(0,H.jsx)(vn.q,{strokeDasharray:"3 3"}),(0,H.jsx)(Zn.K,{dataKey:"x",scale:"linear",unit:l,domain:["auto","auto"],tick:{fill:"white"},type:"number",tickFormatter:function(e){return e>1e4?e.toFixed():e.toFixed(1)}}),(0,H.jsx)(jn.B,{name:"DMG",domain:["auto","auto"],unit:o,allowDecimals:!1,tick:{fill:"white"},type:"number"}),(0,H.jsx)(gn.d,{dataKey:"y",range:[3,25]}),(0,H.jsx)(yn.D,{}),(0,H.jsx)(bn.b,{name:"Optimization Target",dataKey:"y",fill:"#8884d8",line:!0,lineType:"fitting",isAnimationActive:!1}),s&&(0,H.jsx)(kn.x,{name:"Minimum Stat Requirement Threshold",dataKey:"min",stroke:"#ff7300",type:"stepBefore",connectNulls:!0,strokeWidth:2,isAnimationActive:!1})]})})}var En=["sands","goblet","circlet"];function Kn(e){var t=e.mainStatKeys,n=e.onChangeMainStatKey,r=e.disabled,i=void 0!==r&&r,a=(0,E.$)("artifact").t;return(0,H.jsx)(Ce.Z,{display:"flex",flexDirection:"column",gap:1,children:En.map((function(e){var r=t[e].length;return(0,H.jsxs)(Ce.Z,{children:[(0,H.jsx)(k.Z,{}),(0,H.jsxs)(h.Z,{sx:{pt:1},children:[(0,H.jsxs)(Ce.Z,{sx:{display:"flex",gap:1,alignItems:"center",pb:1},children:[(0,H.jsx)(Ye.Z,{placement:"top",title:(0,H.jsx)(p.Z,{children:a("slotName.".concat(e))}),children:(0,H.jsx)("span",{children:(0,ke.Ir)(e)})}),(0,H.jsx)(Ce.Z,{flexGrow:1,children:(0,H.jsx)(st.Z,{color:"info",children:r?"".concat(r," Selected"):"Any"})}),(0,H.jsx)(Z.Z,{color:"error",size:"small",disabled:!t[e].length||i,sx:{mt:-1,mb:-1},onClick:function(){return n(e)},children:(0,H.jsx)(V.Z,{})})]}),(0,H.jsx)(x.ZP,{container:!0,spacing:1,children:$e.Z.slotMainStats(e).map((function(r,a){var s=ee.Kj.find((function(e){return r.includes(e)})),l=t[e].includes(r)?null!==s&&void 0!==s?s:"success":"secondary";return(0,H.jsx)(x.ZP,{item:!0,flexGrow:1,xs:a<3?4:void 0,children:(0,H.jsx)(Ye.Z,{placement:"top",title:(0,H.jsx)(p.Z,{children:(0,H.jsx)("strong",{children:Q.ZP.getArtStr(r)})}),disableInteractive:!0,children:(0,H.jsx)(Z.Z,{fullWidth:!0,size:"small",color:l,sx:{fontSize:"1.2em",height:"100%",pointerEvents:i?"none":void 0,cursor:i?"none":void 0},onClick:function(){return n(e,r)},children:s?ne.h[s]:ne.Z[r]})})},r)}))})]})]},e)}))})}var An=n(72814),_n=n(16614),On=n(89841),Dn=n(70558),Mn=n(1235),In=n(68125),Ln=n(68087),zn=n(76899),Rn=n(52991),Tn=n(84684),Bn=n(77208),qn=n(13434),Nn=navigator.hardwareConcurrency||4;function Wn(){return{equipmentPriority:[],threads:Nn}}function Vn(){return(0,Ht.Z)("TabOptimize",Wn)}function Gn(e){var t=e.useEquippedArts,n=e.buildSettingsDispatch,i=e.disabled,a=(0,E.$)("page_character").t,s=(0,P.useContext)(X.R).character.key,l=(0,P.useContext)(Oe.t).database,o=Ie(!1),c=(0,r.Z)(o,3),d=c[0],f=c[1],m=c[2],v=Vn(),g=(0,r.Z)(v,2),y=g[0].equipmentPriority,b=g[1],w=(0,P.useMemo)((function(){return(0,Rt.Z)(new Set(y)).filter((function(e){return l._getChar(e)}))}),[l,y]),C=(0,P.useCallback)((function(e){return b({equipmentPriority:e})}),[b]),S=(0,P.useCallback)((function(e,t){var n=(0,Rt.Z)(w),r=n[e];n.splice(e,1),n.splice(t,0,r),C(n)}),[w,C]),K=(0,P.useCallback)((function(e){var t=(0,Rt.Z)(w);t.splice(e,1),C(t)}),[w,C]),A=(0,P.useCallback)((function(e){return C([].concat((0,Rt.Z)(w),[e]))}),[w,C]),D=(0,P.useCallback)((function(){return C([])}),[C]),M=(0,P.useMemo)((function(){var e=w.length,t=w.indexOf(s);return t>=0&&(e=t),e}),[s,w]),L=(0,P.useMemo)((function(){return l._getCharKeys().length-1-M}),[M,l]),z=(0,P.useMemo)((function(){return l._getCharKeys().length-w.length}),[w,l]);return(0,H.jsxs)(u.Z,{display:"flex",gap:1,children:[(0,H.jsx)(Re.Z,{open:d,onClose:m,containerProps:{maxWidth:"sm"},children:(0,H.jsxs)(_.Z,{children:[(0,H.jsx)(h.Z,{children:(0,H.jsxs)(x.ZP,{container:!0,spacing:1,children:[(0,H.jsx)(x.ZP,{item:!0,flexGrow:1,children:(0,H.jsx)(p.Z,{variant:"h6",children:(0,H.jsx)(zn.c,{t:a,i18nKey:"tabOptimize.useEquipped.modal.title",children:"Character Priority for Equipped Artifacts"})})}),(0,H.jsx)(x.ZP,{item:!0,sx:{mb:-1},children:(0,H.jsx)(I.Z,{onClick:m})})]})}),(0,H.jsx)(k.Z,{}),(0,H.jsxs)(h.Z,{children:[(0,H.jsx)(O.Z,{sx:{mb:1},children:(0,H.jsxs)(h.Z,{children:[(0,H.jsx)(p.Z,{gutterBottom:!0,children:(0,H.jsx)(zn.c,{t:a,i18nKey:"tabOptimize.useEquipped.modal.desc1",children:"When generating a build, the Optimizer will only consider equipped artifacts from characters below the current character or those not on the list."})}),(0,H.jsx)(p.Z,{gutterBottom:!0,children:(0,H.jsx)(zn.c,{t:a,i18nKey:"tabOptimize.useEquipped.modal.desc2",children:"If the current character is not on the list, the Optimizer will only consider equipped artifacts from others characters that are not on the list."})})]})}),(0,H.jsxs)(u.Z,{display:"flex",flexDirection:"column",gap:2,children:[w.map((function(e,t){return(0,H.jsx)(Fn,{characterKey:e,rank:t+1,maxRank:w.length,setRank:function(e){return e&&S(t,e-1)},onRemove:function(){return K(t)},numAbove:M},e)})),(0,H.jsxs)(u.Z,{sx:{display:"flex",gap:1},children:[(0,H.jsx)(Hn,{onAdd:A,list:w}),(0,H.jsx)(Z.Z,{color:"error",onClick:D,startIcon:(0,H.jsx)(V.Z,{}),children:(0,H.jsx)(zn.c,{t:a,i18nKey:"tabOptimize.useEquipped.modal.clearList",children:"Clear List"})})]}),!!L&&(0,H.jsx)(st.Z,{color:"success",children:(0,H.jsx)(p.Z,{children:(0,H.jsxs)(zn.c,{t:a,i18nKey:"tabOptimize.useEquipped.modal.usingNum",count:z,children:["Using artifacts from ",(0,H.jsx)("strong",{children:{count:z}})," unlisted characters"]})})})]})]})]})}),(0,H.jsxs)(j.Z,{sx:{display:"flex",width:"100%"},children:[(0,H.jsx)(Z.Z,{sx:{flexGrow:1},onClick:function(){return n({useEquippedArts:!t})},disabled:i,startIcon:t?(0,H.jsx)(hn.Z,{}):(0,H.jsx)(xn.Z,{}),color:t?"success":"secondary",children:(0,H.jsxs)(u.Z,{children:[(0,H.jsx)("span",{children:(0,H.jsx)(zn.c,{t:a,i18nKey:"tabOptimize.useEquipped.title",children:"Use Equipped Artifacts"})}),t&&(0,H.jsx)(st.Z,{children:(0,H.jsxs)(zn.c,{t:a,i18nKey:"tabOptimize.useEquipped.usingNum",count:L,children:["Using from ",(0,H.jsx)("strong",{children:{count:L}})," characters"]})})]})}),t&&(0,H.jsx)(Z.Z,{sx:{flexShrink:1},color:"info",onClick:f,children:(0,H.jsx)(_n.Z,{})})]})]})}function Fn(e){var t=e.characterKey,n=e.rank,i=e.maxRank,a=e.setRank,s=e.onRemove,l=e.numAbove,o=(0,E.$)("page_character").t,c=(0,P.useContext)(Oe.t).database,d=(0,qn.Z)(t);if(!d)return null;var h=d.equippedWeapon,f=d.equippedArtifacts;return(0,H.jsxs)(O.Z,{sx:{p:1},children:[(0,H.jsxs)(u.Z,{sx:{pb:1,display:"flex",justifyContent:"space-between",gap:1},children:[(0,H.jsx)(st.Z,{color:"info",children:(0,H.jsxs)(p.Z,{children:["#",n]})}),(0,H.jsx)(st.Z,{sx:{flexGrow:1},color:l===n-1?"warning":n-1<l?"error":"success",children:(0,H.jsx)(p.Z,{children:l===n-1?(0,H.jsx)(zn.c,{t:o,i18nKey:"tabOptimize.useEquipped.modal.status.curr",children:"Current character"}):n-1<l?(0,H.jsx)(zn.c,{t:o,i18nKey:"tabOptimize.useEquipped.modal.status.dont",children:"Don't Use artifacts"}):(0,H.jsx)(zn.c,{t:o,i18nKey:"tabOptimize.useEquipped.modal.status.use",children:"Use artifacts"})})}),(0,H.jsx)(u.Z,{children:(0,H.jsxs)(j.Z,{sx:{flexGrow:1},size:"small",children:[(0,H.jsx)(z.CC,{children:(0,H.jsx)(z.ZP,{onChange:a,value:n,inputProps:{min:1,max:i,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2}})}),(0,H.jsx)(Z.Z,{disabled:1===n,onClick:function(){return a(1)},children:(0,H.jsx)(On.Z,{})}),(0,H.jsx)(Z.Z,{disabled:1===n,onClick:function(){return a(n-1)},children:(0,H.jsx)(Dn.Z,{})}),(0,H.jsx)(Z.Z,{disabled:n===i,onClick:function(){return a(n+1)},children:(0,H.jsx)(Mn.Z,{})}),(0,H.jsx)(Z.Z,{disabled:n===i,onClick:function(){return a(i)},children:(0,H.jsx)(In.Z,{})}),(0,H.jsx)(Z.Z,{color:"error",onClick:s,children:(0,H.jsx)(Ne.Z,{})})]})})]}),(0,H.jsxs)(x.ZP,{container:!0,columns:7,spacing:1,children:[(0,H.jsx)(x.ZP,{item:!0,xs:1,children:(0,H.jsx)(Tn.Z,{characterKey:t})}),(0,H.jsx)(x.ZP,{item:!0,xs:1,children:(0,H.jsx)(Bn.Z,{weaponId:h})}),Object.entries(f).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,H.jsx)(x.ZP,{item:!0,xs:1,children:(0,H.jsx)(Rn.Z,{slotKey:n,artifactObj:c._getArt(i)})},n)}))]})]})}function Hn(e){var t=e.onAdd,n=e.list,i=(0,E.$)("page_character").t,a=Ie(!1),s=(0,r.Z)(a,3),l=s[0],o=s[1],c=s[2],u=(0,P.useCallback)((function(e){return!!e&&!n.includes(e.key)}),[n]);return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(D.w,{show:l,onHide:c,onSelect:t,filter:u}),(0,H.jsx)(Z.Z,{fullWidth:!0,sx:{height:60},color:"info",onClick:o,startIcon:(0,H.jsx)(Ln.Z,{}),children:(0,H.jsx)(zn.c,{t:i,i18nKey:"tabOptimize.useEquipped.modal.add",children:"Add character to list"})})]})}function Un(e){var t=e.buildSettingsDispatch,n=e.useExcludedArts,r=e.disabled,i=e.artsDirty,a=(0,E.$)("page_character").t,s=(0,P.useContext)(Oe.t).database,l=(0,P.useMemo)((function(){return i&&s._getArts().reduce((function(e,t){return e+(t.exclude?1:0)}),0)}),[s,i]);return(0,H.jsx)(Z.Z,{fullWidth:!0,onClick:function(){return t({useExcludedArts:!n})},disabled:!l||r,startIcon:n?(0,H.jsx)(hn.Z,{}):(0,H.jsx)(xn.Z,{}),color:n?"success":"secondary",children:(0,H.jsxs)(u.Z,{children:[(0,H.jsx)("span",{children:(0,H.jsx)(zn.c,{t:a,i18nKey:"tabOptimize.useExcluded.title",count:l,children:"Use Excluded Artifacts"})}),n&&(0,H.jsx)(st.Z,{children:(0,H.jsxs)(zn.c,{t:a,i18nKey:"tabOptimize.useExcluded.usingNum",count:l,children:["Using ",(0,H.jsx)("strong",{children:{count:l}})," excluded artifacts"]})})]})})}var $n=n(58003),Jn=n(4942);function Xn(e){if(1===e.length)return e[0];var t=(e=e.flatMap((function(e){return"add"===e.operation?e.operands:e}))).reduce((function(e,t){return"const"===t.operation?e+t.value:e}),0);return 0===(e=e.filter((function(e){return"const"!==e.operation}))).length?(0,Pe.a9)(t):0===t?Pe.Sm.apply(void 0,(0,Rt.Z)(e)):Pe.Sm.apply(void 0,(0,Rt.Z)(e).concat([(0,Pe.a9)(t)]))}function Yn(e){if(1===e.length)return e[0];var t=(e=e.flatMap((function(e){return"mul"===e.operation?e.operands:e}))).reduce((function(e,t){return"const"===t.operation?e*t.value:e}),1);return 0===(e=e.filter((function(e){return"const"!==e.operation}))).length?(0,Pe.a9)(t):0===t?Pe.Sm.apply(void 0,(0,Rt.Z)(e)):Pe.WV.apply(void 0,(0,Rt.Z)(e).concat([(0,Pe.a9)(t)]))}function Qn(e,t){switch(e.operation){case"mul":var n=e.operands.map((function(e){return Qn(e,t)})).map((function(e){return"add"===e.operation?e.operands:[e]})).map((function(e,n){var r=e.map((function(e){return t(e)||"mul"===e.operation&&e.operands.some(t)})),i=e.filter((function(e,t){return r[t]})),a=e.filter((function(e,t){return!r[t]}));return 0===a.length?i:[].concat((0,Rt.Z)(i),[Xn(a)])}));return Xn(me.Og.apply(void 0,(0,Rt.Z)(n)).map((function(e){return Yn(e)})));case"add":return Xn(e.operands.map((function(e){return Qn(e,t)})).flatMap((function(e){return"add"===e.operation?e.operands:e})));default:return e}}function er(e){return tr(e)<=5}function tr(e){if("add"===e.operation)return Math.min.apply(Math,(0,Rt.Z)(e.operands.map((function(e){return tr(e)}))));if("mul"===e.operation)return e.operands.map((function(e){return tr(e)})).reduce((function(e,t){return e+t}));if("threshold"===e.operation){var t=e.operands[0];if("read"===t.operation&&ee.q2.includes(t.path[1]))return e.operands[1].value}return 0}function nr(e,t){var n=t.i,r=t.j,i=e[n][r];return e.map((function(t,a){return t.map((function(t,s){return a===n&&s===r?1/i:a===n?e[n][s]/i:s===r?-e[a][r]/i:t-e[n][s]*e[a][r]/i}))}))}function rr(e){for(var t=e.length,n=e[0].length,r={i:-1,j:-1,cmp:1/0},i=0;i<n-1;i++)if(!(e[t-1][i]>=0)){for(var a=0;a<t-1;a++)if(e[a][i]>0){var s=e[a][n-1]/e[a][i];s<r.cmp&&(r={i:a,j:i,cmp:s})}if(r.i<0)throw Error("UNBOUNDED FEASIBLE")}if(r.i<0)throw Error("NO PIVOTS (done)");return{i:r.i,j:r.j}}function ir(e){for(var t=e.length,n=e[0].length,r={i:-1,j:-1,cmp:1/0},i=0;i<t-1;i++)if(!(e[i][n-1]>=0)){for(var a=0;a<n-1;a++)if(e[i][a]<0){var s=e[i][n-1]/e[i][a];s<r.cmp&&(r={i:i,j:a,cmp:s})}if(r.i<0)throw Error("INFEASIBLE");return{i:r.i,j:r.j}}throw Error("NO PIVOTS (done)")}function ar(e,t,n){if("const"===e.operation)return{w:{},c:e.value,err:0};if("read"===e.operation)return{w:(0,Jn.Z)({},e.path[1],1),c:0,err:0};if("mul"!==e.operation)throw Error("toLUB should only operate on product forms");var i=(0,T.Z)({},t),a=(0,T.Z)({},n);var s=Qn(function e(s){switch(s.operation){case"const":case"read":return s;case"add":return Xn(s.operands.map((function(t){return e(t)})));case"mul":return Yn(s.operands.map((function(t){return e(t)})));case"threshold":var l=(0,r.Z)(s.operands,4),o=l[0],c=l[1],u=l[2],d=l[3];if("read"===o.operation&&"const"===c.operation&&"const"===d.operation&&"const"===u.operation){var h=o.path[1];if(t[h]>=c.value)return(0,Pe.a9)(u.value);if(n[h]<c.value)return(0,Pe.a9)(d.value);if(u.value<d.value)throw console.log(s),Error("Not Implemented (threshold must be increasing)");var x=(u.value-d.value)/c.value;return a[h]=c.value,(0,Pe.Sm)(d.value,(0,Pe.WV)(x,o))}throw console.log(s),Error("Not Implemented (threshold)");case"res":var f=s.operands[0];if("read"===f.operation){if(i[f.path[1]]===a[f.path[1]])return(0,Pe.a9)(Gt.aj.res([i[f.path[1]]]));throw Error("res non constant!?")}throw Error("Not Implemented (res)");case"min":var p=(0,r.Z)(s.operands,2),m=p[0],v=p[1];if("const"!==v.operation){var Z=[v,m];m=Z[0],v=Z[1]}return"read"===m.operation&&"const"===v.operation?(v.value<a[m.path[1]]&&(a[m.path[1]]=v.value),e(m)):m;case"max":var j=(0,r.Z)(s.operands,2),g=j[0],y=j[1];if("const"!==y.operation){var b=[y,g];g=b[0],y=b[1]}if("const"===v.operation){var k=v.value,w=(0,Gt.I3)([g],(function(e){return e.path[1]})),C=[w(t)[0],w(n)[0]],S=C[0],P=C[1];if(S>k)return g;if(k>P)return(0,Pe.a9)(k);var E=(P-k)/(P-S),K=k-S;return(0,Pe.Sm)((0,Pe.WV)(E,e(g)),K)}throw console.log(s),Error("Not Implemented (max)");case"sum_frac":var A=(0,r.Z)(s.operands,2),_=A[0],O=A[1];if("const"!==O.operation)throw Error("Not Implemented (non-constant sum_frac denominator)");var D=(0,Gt.I3)([_],(function(e){return e.path[1]})),M=[D(t)[0],D(n)[0]],I=M[0],L=M[1],z=O.value,R=Math.sqrt((I+z)*(L+z))-z,T=(z+R)*(z+R),B=z/T,q=R*R/T;return e((0,Pe.Sm)(q,(0,Pe.WV)(B,_)));default:throw console.log(s),Error("Not Implemented")}}(e),(function(e){return"const"!==e.operation}));if("const"===s.operation)return{w:{},c:s.value,err:0};function l(e){if("read"===e.operation)return{w:(0,Jn.Z)({},e.path[1],1),c:0,err:0};if("const"===e.operation)return{w:{},c:e.value,err:0};if("mul"!==e.operation)throw console.log(e),Error("toLUB takes only mul nodes.");var r=1,i=e.operands.reduce((function(e,t){return"read"===t.operation&&e.push(t.path[1]),"const"===t.operation&&(r*=t.value),e}),[]),a=function(e){if(0===e.length)return{w:[],c:0,err:0};var t=e.length,n=e.map((function(e){return e.upper})),r=n.reduce((function(e,t){return e*t}),1);e=e.map((function(e){return{lower:e.lower/e.upper,upper:1}}));var i,a=me.Og.apply(void 0,(0,Rt.Z)(e.map((function(e){return[e.lower,e.upper]})))).flatMap((function(e){var t=e.reduce((function(e,t){return e*t}),1);return[[].concat((0,Rt.Z)(e.map((function(e){return-e}))),[1,0,-t]),[].concat((0,Rt.Z)(e),[-1,-1,t])]})),s=[].concat((0,Rt.Z)(e.map((function(e){return 0}))),[0,1]);try{i=function(e,t){var n=t.length+1,r=t[0].length,i=Array(n).fill(0).map((function(e){return Array(r).fill(0)}));t.forEach((function(e,t){return e.forEach((function(e,n){return i[t][n]=e}))})),e.forEach((function(e,t){return i[n-1][t]=e}));for(var a=[];i.some((function(e,t){return t<n-1&&e[r-1]<0}));){var s=ir(i);a.push(s),i=nr(i,s)}for(;i[n-1].some((function(e,t){return t<r-1&&e<0}));){var l=rr(i);a.push(l),i=nr(i,l)}return e.map((function(e,t){return function(e,t,n){var r=1;t.forEach((function(e){var t=e.i,i=e.j;1===r&&i===n?(n=t,r=0):0===r&&t===n&&(n=i,r=1)}));var i=e[0].length;return 0===r?e[n][i-1]:0}(i,a,t)}))}(s,a)}catch(l){throw console.log("ERROR on bounds",e),console.log("Possibly numerical instability issue."),l}return{w:i.slice(0,t).map((function(e,t){return e*r/n[t]})),c:-r*i[t],err:r*i[t+1]}}(i.map((function(e){return{lower:t[e],upper:n[e]}}))),s=a.w,l=a.c,o=a.err;return{w:Object.fromEntries(s.map((function(e,t){return[i[t],e*r]}))),c:l*r,err:o*r+0}}return"add"===s.operation?s.operands.map((function(e){return l(e)})):l(s)}var sr=n(64737),lr=n(15671),or=n(43144),cr=function(e){return(e+1>>>1)-1},ur=function(e){return 1+(e<<1)},dr=function(e){return e+1<<1},hr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e,t){return e>t};(0,lr.Z)(this,e),this._heap=void 0,this._comparator=void 0,this._heap=[],this._comparator=t}return(0,or.Z)(e,[{key:"size",value:function(){return this._heap.length}},{key:"isEmpty",value:function(){return 0==this.size()}},{key:"peek",value:function(){return this._heap[0]}},{key:"push",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e._heap.push(t),e._siftUp()})),this.size()}},{key:"pop",value:function(){var e=this.peek(),t=this.size()-1;return t>0&&this._swap(0,t),this._heap.pop(),this._siftDown(),e}},{key:"replace",value:function(e){var t=this.peek();return this._heap[0]=e,this._siftDown(),t}},{key:"_greater",value:function(e,t){return this._comparator(this._heap[e],this._heap[t])}},{key:"_swap",value:function(e,t){var n=[this._heap[t],this._heap[e]];this._heap[e]=n[0],this._heap[t]=n[1]}},{key:"_siftUp",value:function(){for(var e=this.size()-1;e>0&&this._greater(e,cr(e));)this._swap(e,cr(e)),e=cr(e)}},{key:"_siftDown",value:function(){for(var e=0;ur(e)<this.size()&&this._greater(ur(e),e)||dr(e)<this.size()&&this._greater(dr(e),e);){var t=dr(e)<this.size()&&this._greater(dr(e),ur(e))?dr(e):ur(e);this._swap(e,t),e=t}}}]),e}();function xr(e,t,n){var i=Object.values(t.values).reduce((function(e,t){if(0===t.length)return e;var i=t.reduce((function(e,t){var i=Object.entries(n.w).reduce((function(n,i){var a=(0,r.Z)(i,2),s=a[0];return n+a[1]*(e.values[s]-t.values[s])}),0);return i>0?e:t}));return Object.fromEntries(Object.entries(e).map((function(e){var t=(0,r.Z)(e,2),n=t[0];return[n,t[1]+i.values[n]]})))}),t.base);return(0,Gt.I3)([e],(function(e){return e.path[1]}))(i)[0]}function fr(e){return{statsMin:Object.entries(e.values).reduce((function(e,t){var n=(0,r.Z)(t,2),i=(n[0],n[1].reduce((function(e,t){return Object.fromEntries(Object.entries(t.values).map((function(t){var n,i=(0,r.Z)(t,2),a=i[0],s=i[1];return[a,Math.min(s,null!==(n=e[a])&&void 0!==n?n:1/0)]})))}),{}));return Object.fromEntries(Object.entries(e).map((function(e){var t,n=(0,r.Z)(e,2),a=n[0];return[a,n[1]+(null!==(t=i[a])&&void 0!==t?t:0)]})))}),(0,T.Z)({},e.base)),statsMax:Object.entries(e.values).reduce((function(e,t){var n=(0,r.Z)(t,2),i=(n[0],n[1].reduce((function(e,t){return Object.fromEntries(Object.entries(t.values).map((function(t){var n,i=(0,r.Z)(t,2),a=i[0],s=i[1];return[a,Math.max(s,null!==(n=e[a])&&void 0!==n?n:0)]})))}),{}));return Object.fromEntries(Object.entries(e).map((function(e){var t,n=(0,r.Z)(e,2),a=n[0];return[a,n[1]+(null!==(t=i[a])&&void 0!==t?t:0)]})))}),(0,T.Z)({},e.base))}}function pr(e,t){var n=Object.entries(t.w).reduce((function(t,n){var i=(0,r.Z)(n,2),a=i[0];return t+i[1]*e.base[a]}),t.c);return Object.entries(e.values).reduce((function(e,n){var i=(0,r.Z)(n,2);i[0];return e+i[1].reduce((function(e,n){var i=Object.entries(t.w).reduce((function(e,t){var i=(0,r.Z)(t,2),a=i[0];return e+i[1]*n.values[a]}),0);return Math.max(e,i)}),0)}),n)}function mr(e,t){var n=fr(t),i=n.statsMin,a=n.statsMax;if("const"===e.operation)return{maxEst:e.value,lin:ar(e,i,a)};if("read"===e.operation)return{maxEst:a[e.path[1]],lin:ar(e,i,a)};var s=Qn(e,(function(e){switch(e.operation){case"read":case"max":case"min":case"sum_frac":case"threshold":return!0;default:return!1}})).operands,l=(s=s.filter(er)).flatMap((function(e){return ar(e,i,a)})).reduce((function(e,t){return Object.entries(t.w).forEach((function(t){var n,i=(0,r.Z)(t,2),a=i[0],s=i[1];return e.w[a]=s+(null!==(n=e.w[a])&&void 0!==n?n:0)})),{w:e.w,c:e.c+t.c,err:e.err+t.err}}),{w:{},c:0,err:0});return{maxEst:pr(t,l),lin:l}}function vr(e,t,n){var i=Object.fromEntries(Object.entries(t).filter((function(e){var t=(0,r.Z)(e,2),i=t[0];return t[1]===n[i]}))),a=(0,sr.uW)([e],(function(e){return e}),(function(e){if("read"===e.operation&&e.path[1]in i)return(0,Pe.a9)(i[e.path[1]]);if("threshold"===e.operation){var a=(0,r.Z)(e.operands,4),s=a[0],l=a[1],o=a[2],c=a[3];if("read"===s.operation&&"const"===l.operation){if(t[s.path[1]]>=l.value)return e.operands[2];if(n[s.path[1]]<l.value)return e.operands[3]}if("const"!==o.operation){if("const"===c.operation&&0===c.value)return(0,Pe.WV)((0,Pe.ER)(s,l,1,0),o);throw Error("Threshold between non-const `pass` and non-zero `fail` not supported.")}}return e})),s=(0,r.Z)(a,1)[0],l=(0,Gt.tL)([s],{});return(0,r.Z)(l,1)[0]}function Zr(e,t){var n=fr(t={base:t.base,values:{flower:t.values.flower.filter((function(e){return""!==e.id})),plume:t.values.plume.filter((function(e){return""!==e.id})),sands:t.values.sands.filter((function(e){return""!==e.id})),goblet:t.values.goblet.filter((function(e){return""!==e.id})),circlet:t.values.circlet.filter((function(e){return""!==e.id}))}});e=vr(e,n.statsMin,n.statsMax);var i=new hr((function(e,t){return e.maxEst>t.maxEst})),a=mr(e,t),s=a.maxEst,l=a.lin,o=xr(e,t,l);i.push({maxEst:s,f:e,a:t,lin:l});for(var c=0,u=Object.values(t.values).reduce((function(e,t){return e*t.length}),1),d=0,h=0,x=function(){var e=i.pop(),t=e.maxEst,n=e.f,a=e.a,s=e.lin,l=Object.values(a.values).reduce((function(e,t){return e*t.length}),1);if((c+=1)>250)return"break";var u=fr(a),x=u.statsMin,f=u.statsMax,p=mr(n=vr(n,x,f),a);if(p.maxEst<xr(n,a,p.lin))return console.log("~~~~~~~~~~~~ BIG PROBLEM UH OH ~~~~~~~~~~~~"),function(e,t){console.log(e),console.log(t);var n=fr(e),i=n.statsMin,a=n.statsMax;function s(e){switch(e.operation){case"read":case"max":case"min":case"sum_frac":case"threshold":return!0;default:return!1}}console.log("minstat",i),console.log("maxstat",a);var l=Qn(t=vr(t,i,a),s);console.log("expanded",l);var o=l.operands,c=(o=o.filter(er)).flatMap((function(e){return ar(e,i,a)})).reduce((function(e,t){return Object.entries(t.w).forEach((function(t){var n,i=(0,r.Z)(t,2),a=i[0],s=i[1];return e.w[a]=s+(null!==(n=e.w[a])&&void 0!==n?n:0)})),{w:e.w,c:e.c+t.c,err:e.err+t.err}}),{w:{},c:0,err:0});console.log(o),console.log(o.map((function(e){return ar(e,i,a)})));var u=Object.entries(e.values).reduce((function(e,t){var n=(0,r.Z)(t,2),i=(n[0],n[1].reduce((function(e,t){return Object.entries(c.w).reduce((function(e,n){var i,a=(0,r.Z)(n,2),s=a[0];return e+a[1]*(null!==(i=t.values[s])&&void 0!==i?i:0)}),0)>Object.entries(c.w).reduce((function(t,n){var i,a=(0,r.Z)(n,2),s=a[0];return t+a[1]*(null!==(i=e.values[s])&&void 0!==i?i:0)}),0)?t:e})));return Object.fromEntries(Object.entries(e).map((function(e){var t=(0,r.Z)(e,2),n=t[0];return[n,t[1]+i.values[n]]})))}),e.base);console.log("stats",u);var d=u;console.log("======= numeric cmp =========");var h=(0,Gt.I3)(o,(function(e){return e.path[1]}))(d).slice(0,o.length);console.log(h);var x=o.map((function(e){var t=ar(e,i,a);return Array.isArray(t)?t.map((function(e){return Object.entries(e.w).reduce((function(e,t){var n=(0,r.Z)(t,2),i=n[0];return e+n[1]*d[i]}),0)+e.c})).reduce((function(e,t){return e+t})):Object.entries(t.w).reduce((function(e,t){var n=(0,r.Z)(t,2),i=n[0];return e+n[1]*d[i]}),0)+t.c}));console.log(x),console.log(h.reduce((function(e,t){return e+t})),x.reduce((function(e,t){return e+t}),0)),console.log(pr(e,c)),console.log(mr(t,e)),console.log("=========== shitty debug time ==============="),console.log(o[0]),console.log(ar(o[0],i,a))}(a,n),{v:void 0};if(isNaN(p.maxEst))return console.log("uh oh 2"),{v:void 0};if(p.maxEst<t&&(t=p.maxEst,s=p.lin),t<(o=Math.max(xr(n,a,s),o)))return console.log({niter:c,numBuilds:l,pqsize:i.size()},{lower:o,upper:t},"PRUNED"),d+=l,"continue";if(console.log({niter:c,numBuilds:l,pqsize:i.size()},{lower:o,upper:t}),l<1e3)return h+=l,console.log("--------------- ENUMERATE (implement me please) ---------------"),"continue";if(c<4){var m=Object.fromEntries(Object.entries(a.values).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1].map((function(e){return Object.entries(s.w).reduce((function(t,n){var i=(0,r.Z)(n,2),a=i[0];return t+i[1]*e.values[a]}),0)}));return[n,i]}))),v=Object.fromEntries(Object.entries(m).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return[n,(Math.min.apply(Math,(0,Rt.Z)(i))+Math.max.apply(Math,(0,Rt.Z)(i)))/2]})));return(0,me.Og)([0,1],[0,1],[0,1],[0,1],[0,1]).forEach((function(e){var t=(0,r.Z)(e,5),l=t[0],c=t[1],u=t[2],h=t[3],x=t[4],f={base:(0,T.Z)({},a.base),values:{flower:a.values.flower.filter((function(e,t){return m.flower[t]<v.flower?0===l:1===l})),plume:a.values.plume.filter((function(e,t){return m.plume[t]<v.plume?0===c:1===c})),sands:a.values.sands.filter((function(e,t){return m.sands[t]<v.sands?0===u:1===u})),goblet:a.values.goblet.filter((function(e,t){return m.goblet[t]<v.goblet?0===h:1===h})),circlet:a.values.circlet.filter((function(e,t){return m.circlet[t]<v.circlet?0===x:1===x}))}},p=Object.values(f.values).reduce((function(e,t){return e*t.length}),1);if(0!==p){var Z=fr(f),j=Z.statsMin,g=Z.statsMax,y=vr(n,j,g),b=pr(f,s);if(b<o)d+=p;else{var k=b,w=s;k<(o=Math.max(xr(y,f,w),o))?d+=p:(console.log(l,c,u,h,x,{numBuilds:p,upper:k}),i.push({maxEst:k,lin:w,f:y,a:f}))}}})),"continue"}var Z={k:"",heur:-1};Object.keys(s.w).forEach((function(e){var t=Object.entries(a.values).reduce((function(t,n){var i=(0,r.Z)(n,2),a=(i[0],i[1].map((function(t){return t.values[e]}))),s=Math.min.apply(Math,(0,Rt.Z)(a)),l=Math.max.apply(Math,(0,Rt.Z)(a)),o=(s+l)/2,c=Math.max.apply(Math,(0,Rt.Z)(a.filter((function(e){return e<o})))),u=Math.min.apply(Math,(0,Rt.Z)(a.filter((function(e){return e>=o}))));return Math.max(c-s,l-u)+t}),0),n=s.w[e]*(f[e]-x[e]-t);n>Z.heur&&(Z={k:e,heur:n})})),console.log("shatterOn",Z);var j=Object.fromEntries(Object.entries(a.values).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1].map((function(e){return e.values[Z.k]}));return[n,(Math.min.apply(Math,(0,Rt.Z)(i))+Math.max.apply(Math,(0,Rt.Z)(i)))/2]})));return(0,me.Og)([0,1],[0,1],[0,1],[0,1],[0,1]).forEach((function(e){var t=(0,r.Z)(e,5),l=t[0],c=t[1],u=t[2],h=t[3],x=t[4],f={base:(0,T.Z)({},a.base),values:{flower:a.values.flower.filter((function(e){return e.values[Z.k]>j.flower?0===l:1===l})),plume:a.values.plume.filter((function(e){return e.values[Z.k]>j.plume?0===c:1===c})),sands:a.values.sands.filter((function(e){return e.values[Z.k]>j.sands?0===u:1===u})),goblet:a.values.goblet.filter((function(e){return e.values[Z.k]>j.goblet?0===h:1===h})),circlet:a.values.circlet.filter((function(e){return e.values[Z.k]>j.circlet?0===x:1===x}))}},p=Object.values(f.values).reduce((function(e,t){return e*t.length}),1);if(0!==p){var m=fr(f),v=m.statsMin,g=m.statsMax,y=vr(n,v,g),b=pr(f,s);if(b<o)d+=p;else{var k=mr(y,f);if(k.maxEst+1<xr(y,f,k.lin))return console.log("!!!!!!!!!!!!! BIG PROBLEM UH OH !!!!!!!!!!!!!"),void i.push({maxEst:1/0,lin:k.lin,f:y,a:f});var w=pr(f,k.lin),C=b<w?[b,s]:[w,k.lin],S=(0,r.Z)(C,2),P=S[0],E=S[1];P<(o=Math.max(xr(y,f,E),o))?d+=p:(console.log(l,c,u,h,x,{numBuilds:p,upper:P}),i.push({maxEst:P,lin:E,f:y,a:f}))}}})),"continue"};!i.isEmpty();){var f=x();if("break"===f)break;if("continue"!==f&&"object"===typeof f)return f.v}console.log(i);for(var p=0;!i.isEmpty();){var m=i.pop().a;p+=Object.values(m.values).reduce((function(e,t){return e*t.length}),1)}console.log("builds left:",p),console.log("Total enumerated vs pruned:",h,d," out of total ",u),console.log("Final damage:",o)}function jr(){var e,t,n,i,a=(0,P.useContext)(X.R),s=a.character,l=a.character.key,o=(0,Ht.Z)("GlobalSettings",Ft.c),c=(0,r.Z)(o,1)[0].tcMode,d=(0,P.useContext)(Oe.t).database,f=(0,P.useState)(!1),m=(0,r.Z)(f,2),v=m[0],y=m[1],b=(0,P.useState)(0),w=(0,r.Z)(b,2),C=w[0],S=w[1],E=(0,P.useState)(0),A=(0,r.Z)(E,2),_=A[0],D=A[1],M=(0,P.useState)(0),I=(0,r.Z)(M,2),L=I[0],z=I[1],T=(0,P.useState)(void 0),N=(0,r.Z)(T,2),W=N[0],V=N[1],G=(0,Le.Z)(),F=(0,r.Z)(G,2),U=F[0],$=F[1],J=Vn(),ee=(0,r.Z)(J,2),te=ee[0],ne=te.equipmentPriority,re=te.threads,ie=void 0===re?Nn:re,ae=ee[1],le=ie>Nn?Nn:ie,oe=(0,P.useCallback)((function(e){return ae({threads:e})}),[ae]),ce=(0,de.Z)(l),ue=null!==(e=null===s||void 0===s?void 0:s.buildSettings)&&void 0!==e?e:(0,$t.$)(),he=ue.plotBase,xe=ue.setFilters,pe=ue.statFilters,ve=ue.mainStatKeys,Ze=ue.optimizationTarget,je=ue.mainStatAssumptionLevel,ge=ue.useExcludedArts,ye=ue.useEquippedArts,be=ue.builds,ke=ue.buildDate,we=ue.maxBuildsToShow,Ce=ue.levelLow,Se=ue.levelHigh,Pe=(0,P.useMemo)((function(){return be.map((function(e){return e.map((function(e){return d._getArt(e)}))}))}),[be,d]),Ee=(0,fe.Z)(l,je),Ke=null!==(t=null===Ee||void 0===Ee?void 0:Ee[l])&&void 0!==t?t:{},Ae=Ke.characterSheet,_e=Ke.target,De=null!==(n=null===s||void 0===s?void 0:s.compareData)&&void 0!==n&&n,Me=(0,P.useMemo)((function(){return!d._getArts().length}),[d]),Ie=(0,P.useCallback)((function(e){return ce&&ce({buildSettings:(0,$t.C)(ue,e)})}),[ce,ue]),ze=(0,P.useCallback)((function(e,t){Ie(void 0===t?{type:"mainStatKeyReset",slotKey:e}:{type:"mainStatKey",slotKey:e,mainStatKey:t})}),[Ie]);(0,P.useEffect)((function(){return d.followAnyArt($)}),[$,d]);var Re=(0,P.useMemo)((function(){if(!l)return{totBuildNumber:0};var e=[];if(ye){var t=ne.indexOf(l);e=t<0?(0,Rt.Z)(ne):ne.slice(0,t)}var n=d._getArts().filter((function(t){if(t.level<Ce)return!1;if(t.level>Se)return!1;var n=ve[t.slotKey];return!(null!==n&&void 0!==n&&n.length&&!n.includes(t.mainStatKey))&&(t.location===l||!(t.exclude&&!ge)&&(!(t.location&&!ye)&&!(t.location&&ye&&e.includes(t.location))))})),r=(0,$n.wg)(n,je),i=(0,Rt.Z)((0,$n.vJ)([xe.map((function(e){return{key:e.key,min:e.num}}))])),a=(0,Rt.Z)(i).map((function(e){return(0,Jt.kJ)((0,Jt.t4)(r,e))})).reduce((function(e,t){return e+t}),0);return U&&{split:r,setPerms:i,totBuildNumber:a}}),[l,ge,ye,ne,ve,xe,Ce,Se,U,d,je]),Te=Re.split,Be=Re.setPerms,qe=Re.totBuildNumber;(0,P.useEffect)((function(){S(0)}),[qe]);var We=(0,P.useRef)((function(){}));(0,P.useEffect)((function(){return function(){return We.current()}}),[]);var Ve=(0,P.useCallback)((0,zt.Z)((0,Lt.Z)().mark((function e(){var t,n,i,a,s,o,c,u,h,x,f,p,m,v,Z,j,g,b,k,w,C,P,E,K,A,_,O,M,I,L,R;return(0,Lt.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b=function(){var e=g.next(),t=e.done,n=e.value;return t?void 0:{command:"request",threshold:j.buildValues[we-1],filter:n}},l&&Ze&&Te&&Be){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,(0,fe.V)(d,l,je,[]);case 5:if(i=e.sent){e.next=8;break}return e.abrupt("return");case 8:if(a=null===(t=(0,ot.Qo)(i.teamData,l)[l])||void 0===t?void 0:t.target.data[0]){e.next=11;break}return e.abrupt("return");case 11:if(Object.assign(a,(0,ot.b3)([a,$n.mQ])),s=(0,me.Hm)(null!==(n=a.display)&&void 0!==n?n:{},Ze)){e.next=15;break}return e.abrupt("return");case 15:for(o=s,c=Object.entries(pe).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return n.endsWith("_")&&(i/=100),{value:Y.ri.total[n],minimum:i}})).filter((function(e){return e.value&&e.minimum>-1/0})),u=performance.now(),y(!0),V(void 0),D(0),S(0),z(0),h=new Promise((function(e){return We.current=e})),x=[].concat((0,Rt.Z)(c.map((function(e){return e.value}))),[s]),f=Te,p=qe,m=[].concat((0,Rt.Z)(c.map((function(e){return e.minimum}))),[-1/0]),he&&(x.push(Y.ri.total[he]),m.push(-1/0)),x=(0,Gt.tL)(x,a,(function(e){return"dyn"!==(0,r.Z)(e.path,1)[0]})),v=(0,Jt._B)(x,m,f,we,new Set(xe.map((function(e){return e.key}))),{reaffine:!0,pruneArtRange:!0,pruneNodeRange:!0,pruneOrder:!0}),x=v.nodes,f=v.arts,x=(0,Gt.tL)(x,a,(function(e){return"dyn"!==(0,r.Z)(e.path,1)[0]})),Z=he?x.pop():void 0,Zr(s=x.pop(),f),j={buildCount:0,failedCount:0,skippedCount:p,buildValues:Array(we).fill(0).map((function(e){return-1/0}))},Be.forEach((function(e){return j.skippedCount-=(0,Jt.kJ)((0,Jt.t4)(f,e))})),g=(0,$n.D1)(f,Be,1===le?1/0:Math.min(p/le/4,1e6))[Symbol.iterator](),k=x.map((function(e,t){return{value:e,min:m[t]}})).filter((function(e){return e.min>-1/0})),w=[],C=function(e){var t=new qt,n={command:"setup",id:"".concat(e),arts:f,optimizationTarget:s,plotBase:Z,maxBuilds:we,filters:k};t.postMessage(n,void 0);var r=void 0,i=new Promise((function(e){return r=e}));t.onmessage=function(){var e=(0,zt.Z)((0,Lt.Z)().mark((function e(n){var i,a,s,l;return(0,Lt.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.data,e.t0=i.command,e.next="interim"===e.t0?4:"request"===e.t0?9:"finalize"===e.t0?12:15;break;case 4:return j.buildCount+=i.buildCount,j.failedCount+=i.failedCount,j.skippedCount+=i.skippedCount,i.buildValues&&((a=j.buildValues).push.apply(a,(0,Rt.Z)(i.buildValues)),j.buildValues.sort((function(e,t){return t-e})).splice(we)),e.abrupt("break",16);case 9:return(s=b())?t.postMessage(s):(l={command:"finalize"},t.postMessage(l)),e.abrupt("break",16);case 12:return t.terminate(),r(i),e.abrupt("break",16);case 15:console.log("DEBUG",i);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h.then((function(){return t.terminate()})),w.push(i)},P=0;P<le;P++)C(P);return E=setInterval((function(){S(j.buildCount),z(j.skippedCount),D(performance.now()-u)}),100),e.next=45,Promise.any([Promise.all(w),h]);case 45:K=e.sent,clearInterval(E),We.current=function(){},K?(he&&(O=(0,Jt.s7)(K.map((function(e){return e.plotData}))),M=Y.ri.total[he],I=Object.values(O),"%"===Q.ZP.unit(null===(A=o.info)||void 0===A?void 0:A.key)&&(I=I.map((function(e){return{value:100*e.value,plot:e.plot}}))),"%"===Q.ZP.unit(null===(_=M.info)||void 0===_?void 0:_.key)&&(I=I.map((function(e){var t=e.value,n=e.plot;return{value:t,plot:100*(null!==n&&void 0!==n?n:0)}}))),V({valueNode:o,plotNode:M,data:I})),L=(0,Jt.he)(K.map((function(e){return e.builds})),we),Ie({builds:L.map((function(e){return e.artifactIds})),buildDate:Date.now()}),R=performance.now()-u,S(j.buildCount),z(j.skippedCount),D(R)):(D(0),S(0),z(0)),y(!1);case 50:case"end":return e.stop()}}),e)}))),[l,d,qe,je,we,Ze,he,Be,Te,Ie,xe,pe,le]),Ge=null!==(i=null===Ae||void 0===Ae?void 0:Ae.name)&&void 0!==i?i:"Character Name",Fe=(0,P.useCallback)((function(e){Ie({plotBase:e}),V(void 0)}),[Ie]),He=(0,P.useMemo)((function(){return _e&&Ae&&s&&Ee&&{data:_e,characterSheet:Ae,character:s,mainStatAssumptionLevel:je,teamData:Ee,characterDispatch:ce}}),[_e,Ae,s,Ee,ce,je]);return(0,H.jsxs)(u.Z,{display:"flex",flexDirection:"column",gap:1,children:[Me&&(0,H.jsxs)(Tt.Z,{severity:"warning",variant:"filled",children:[" Opps! It looks like you haven't added any artifacts to GO yet! You should go to the ",(0,H.jsx)(Bt.Z,{component:K.rU,to:"/artifact",children:"Artifacts"})," page and add some!"]}),He&&(0,H.jsxs)(X.R.Provider,{value:He,children:[(0,H.jsxs)(x.ZP,{container:!0,spacing:1,children:[(0,H.jsx)(x.ZP,{item:!0,xs:12,sm:6,lg:3,display:"flex",flexDirection:"column",gap:1,children:(0,H.jsx)(u.Z,{children:(0,H.jsx)(Wt.Z,{characterKey:l})})}),(0,H.jsx)(x.ZP,{item:!0,xs:12,sm:6,lg:3,children:(0,H.jsxs)(O.Z,{children:[(0,H.jsxs)(h.Z,{children:[(0,H.jsx)(p.Z,{gutterBottom:!0,children:"Main Stat"}),(0,H.jsx)(Ye.Z,{placement:"top",title:(0,H.jsxs)(p.Z,{children:[(0,H.jsx)("strong",{children:"Level Assumption"})," changes mainstat value to be at least a specific level. Does not change substats."]}),children:(0,H.jsx)(u.Z,{children:(0,H.jsx)(tn,{mainStatAssumptionLevel:je,setmainStatAssumptionLevel:function(e){return Ie({mainStatAssumptionLevel:e})},disabled:v})})})]}),(0,H.jsx)(Kn,{mainStatKeys:ve,onChangeMainStatKey:ze,disabled:v})]})}),(0,H.jsxs)(x.ZP,{item:!0,xs:12,sm:6,lg:3,display:"flex",flexDirection:"column",gap:1,children:[(0,H.jsx)(Vt.Z,{statFilters:pe,setStatFilters:function(e){return Ie({statFilters:e})},disabled:v}),(0,H.jsx)(nn,{}),(0,H.jsx)(Un,{disabled:v,useExcludedArts:ge,buildSettingsDispatch:Ie,artsDirty:U}),(0,H.jsx)(Gn,{disabled:v,useEquippedArts:ye,buildSettingsDispatch:Ie}),(0,H.jsxs)(O.Z,{children:[(0,H.jsx)(h.Z,{sx:{py:1},children:"Artifact Level Filter"}),(0,H.jsx)(Nt.Z,{levelLow:Ce,levelHigh:Se,setLow:function(e){return Ie({levelLow:e})},setHigh:function(e){return Ie({levelHigh:e})},setBoth:function(e,t){return Ie({levelLow:e,levelHigh:t})},disabled:v})]})]}),(0,H.jsxs)(x.ZP,{item:!0,xs:12,sm:6,lg:3,display:"flex",flexDirection:"column",gap:1,children:[(0,H.jsx)(Xt.Z,{disabled:v}),xe.map((function(e,t){return t<=xe.filter((function(e){return e.key})).length&&(0,H.jsx)(Qt,{index:t,setFilters:xe,disabled:v,onChange:function(e,t,n){return Ie({type:"setFilter",index:e,key:t,num:n})}},t)}))]})]}),(0,H.jsxs)(x.ZP,{container:!0,spacing:1,children:[(0,H.jsx)(x.ZP,{item:!0,flexGrow:1,children:(0,H.jsxs)(j.Z,{children:[(0,H.jsx)(Z.Z,{disabled:!l||v||!Ze||!qe||!(0,me.Hm)(null===_e||void 0===_e?void 0:_e.getDisplay(),Ze),color:l&&qe<=sn?"success":"warning",onClick:Ve,startIcon:(0,H.jsx)(q.G,{icon:B.lTt}),children:"Generate Builds"}),(0,H.jsxs)(R.Z,{disabled:v||!l,title:(0,H.jsxs)("span",{children:[(0,H.jsx)("b",{children:we})," ",1===we?"Build":"Builds"]}),children:[(0,H.jsx)(g.Z,{children:(0,H.jsx)(p.Z,{variant:"caption",color:"info.main",children:"Decreasing the number of generated build will decrease build calculation time for large number of builds."})}),(0,H.jsx)(k.Z,{}),Ut.s.map((function(e){return(0,H.jsxs)(g.Z,{onClick:function(){return Ie({maxBuildsToShow:e})},children:[e," ",1===e?"Build":"Builds"]},e)}))]}),(0,H.jsxs)(R.Z,{disabled:v||!l,title:(0,H.jsxs)("span",{children:[(0,H.jsx)("b",{children:le})," ",1===le?"Thread":"Threads"]}),children:[(0,H.jsx)(g.Z,{children:(0,H.jsx)(p.Z,{variant:"caption",color:"info.main",children:"Increasing the number of threads will speed up build time, but will use more CPU power."})}),(0,H.jsx)(k.Z,{}),(0,me.w6)(1,Nn).reverse().map((function(e){return(0,H.jsxs)(g.Z,{onClick:function(){return oe(e)},children:[e," ",1===e?"Thread":"Threads"]},e)}))]}),(0,H.jsx)(Z.Z,{disabled:!v,color:"error",onClick:function(){return We.current()},startIcon:(0,H.jsx)(Ne.Z,{}),children:"Cancel"})]})}),(0,H.jsxs)(x.ZP,{item:!0,children:[(0,H.jsx)("span",{children:"Optimization Target: "}),(0,H.jsx)(An.Z,{optimizationTarget:Ze,setTarget:function(e){return Ie({optimizationTarget:e})},disabled:!!v})]})]}),!!l&&(0,H.jsx)(u.Z,{children:(0,H.jsx)(cn,{totBuildNumber:qe,generatingBuilds:v,generationSkipped:L,generationProgress:C,generationDuration:_,characterName:Ge,maxBuildsToShow:we})}),c&&(0,H.jsx)(u.Z,{children:(0,H.jsx)(wn,{disabled:v,chartData:W,plotBase:he,setPlotBase:Fe})}),(0,H.jsx)(O.Z,{children:(0,H.jsxs)(h.Z,{children:[(0,H.jsxs)(u.Z,{display:"flex",alignItems:"center",gap:1,mb:1,children:[(0,H.jsx)(p.Z,{sx:{flexGrow:1},children:be?(0,H.jsxs)("span",{children:["Showing ",(0,H.jsx)("strong",{children:be.length})," Builds generated for ",Ge,". ",!!ke&&(0,H.jsxs)("span",{children:["Build generated on: ",(0,H.jsx)("strong",{children:new Date(ke).toLocaleString()})]})]}):(0,H.jsx)("span",{children:"Select a character to generate builds."})}),(0,H.jsx)(Z.Z,{disabled:!be.length,color:"error",onClick:function(){return Ie({builds:[],buildDate:0})},children:"Clear Builds"})]}),(0,H.jsxs)(x.ZP,{container:!0,display:"flex",spacing:1,children:[(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsx)(se.Hn,{size:"small"})}),(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsx)(se.oX,{size:"small"})}),(0,H.jsx)(x.ZP,{item:!0,flexGrow:1}),(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsxs)(St.Z,{exclusive:!0,value:De,onChange:function(e,t){return ce({compareData:t})},size:"small",children:[(0,H.jsx)(Ct.Z,{value:!1,disabled:!De,children:(0,H.jsx)("small",{children:"Show New artifact Stats"})}),(0,H.jsx)(Ct.Z,{value:!0,disabled:De,children:(0,H.jsx)("small",{children:"Compare against equipped artifacts"})})]})})]})]})}),(0,H.jsx)(gr,{buildsArts:Pe,character:s,characterKey:l,characterSheet:Ae,data:_e,compareData:De,mainStatAssumptionLevel:je,characterDispatch:ce,disabled:!!v})]})]})}function gr(e){var t=e.buildsArts,n=e.character,r=e.characterKey,i=e.characterSheet,a=e.data,s=e.compareData,l=e.mainStatAssumptionLevel,o=e.characterDispatch,c=e.disabled;return(0,P.useMemo)((function(){return(0,H.jsx)(P.Suspense,{fallback:(0,H.jsx)(d.Z,{variant:"rectangular",width:"100%",height:600}),children:null===t||void 0===t?void 0:t.map((function(e,t){return n&&r&&i&&a&&(0,H.jsx)(yr,{characterKey:r,character:n,build:e,characterSheet:i,oldData:a,mainStatAssumptionLevel:l,characterDispatch:o,children:(0,H.jsx)(ft,{index:t,compareBuild:s,disabled:c})},t+e.join())}))})}),[t,n,r,i,a,s,l,o,c])}function yr(e){var t=e.children,n=e.characterKey,r=e.character,i=e.build,a=e.characterDispatch,s=e.mainStatAssumptionLevel,l=void 0===s?0:s,o=e.characterSheet,c=e.oldData,u=(0,fe.Z)(n,l,i);return u?(0,H.jsx)(X.R.Provider,{value:{characterSheet:o,character:r,characterDispatch:a,mainStatAssumptionLevel:l,data:u[n].target,teamData:u,oldData:c},children:t}):null}var br=n(14361),kr=n(90690),wr=n(13400),Cr=n(96874),Sr=n(74954);function Pr(){var e,t=(0,P.useContext)(X.R),n=t.data,r=t.characterSheet,i=t.character,a=t.character.key,s=(0,de.Z)(a),l=(0,A.s0)(),o=(0,E.$)("page_character").t,c=n.get(Y.ri.charEle).value,d=r.weaponTypeKey,f=n.get(Y.ri.lvl).value,m=n.get(Y.ri.asc).value,v=n.get(Y.ri.constellation).value,Z={auto:n.get(Y.ri.total.auto).value,skill:n.get(Y.ri.total.skill).value,burst:n.get(Y.ri.total.burst).value},j={auto:n.get(Y.ri.bonus.auto).value,skill:n.get(Y.ri.bonus.skill).value,burst:n.get(Y.ri.bonus.burst).value};return(0,H.jsxs)(x.ZP,{container:!0,spacing:1,sx:{justifyContent:"center"},children:[(0,H.jsx)(x.ZP,{item:!0,xs:8,sm:5,md:4,lg:2.5,children:(0,H.jsxs)(O.Z,{children:[(0,H.jsx)(u.Z,{src:r.cardImg,component:"img",width:"100%",height:"auto"}),(0,H.jsxs)(h.Z,{children:[(0,H.jsxs)(p.Z,{variant:"h5",children:[r.name,"\xa0",(0,H.jsx)(le.Z,{sx:{pr:.5},src:null===(e=ze.Z.weaponTypes)||void 0===e?void 0:e[d]}),ne.Z[c],(0,H.jsx)(wr.Z,{sx:{p:.5,mt:-.5},onClick:function(){return s({favorite:!i.favorite})},children:i.favorite?(0,H.jsx)(br.Z,{}):(0,H.jsx)(kr.Z,{})})]}),(0,H.jsx)(p.Z,{variant:"h6",children:(0,H.jsx)(Pt.t,{stars:r.rarity,colored:!0})}),(0,H.jsxs)(p.Z,{variant:"h5",children:["Lvl. ",Je.Z.getLevelString(f,m)]}),(0,H.jsx)(Fe.Z,{sx:{p:1},onClick:function(){return l("talent")},children:(0,H.jsx)(x.ZP,{container:!0,spacing:1,mt:-1,children:["auto","skill","burst"].map((function(e){var t;return(0,H.jsx)(x.ZP,{item:!0,xs:4,children:(0,H.jsx)(Cr.Z,{badgeContent:Z[e],color:j[e]?"info":"secondary",overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{width:"100%",height:"100%","& > .MuiBadge-badge":{fontSize:"1.25em",padding:".25em .4em",borderRadius:".5em",lineHeight:1,height:"1.25em"}},children:(0,H.jsx)(u.Z,{component:"img",src:null===(t=r.getTalentOfKey(e,c))||void 0===t?void 0:t.img,width:"100%",height:"auto"})})},e)}))})}),(0,H.jsx)(p.Z,{sx:{textAlign:"center",mt:1},variant:"h6",children:r.constellationName}),(0,H.jsx)(x.ZP,{container:!0,spacing:1,children:(0,me.w6)(1,6).map((function(e){var t;return(0,H.jsx)(x.ZP,{item:!0,xs:4,children:(0,H.jsx)(Fe.Z,{onClick:function(){return s({constellation:e===v?e-1:e})},children:(0,H.jsx)(u.Z,{component:"img",src:null===(t=r.getTalentOfKey("constellation".concat(e),c))||void 0===t?void 0:t.img,sx:(0,T.Z)({},v>=e?{}:{filter:"brightness(50%)"}),width:"100%",height:"auto"})})},e)}))}),(0,H.jsx)(p.Z,{sx:{textAlign:"center",mt:1},variant:"h6",children:o("teammates")}),(0,H.jsx)(Fe.Z,{sx:{p:1},onClick:function(){return l("teambuffs")},children:(0,H.jsx)(x.ZP,{container:!0,columns:3,spacing:1,children:(0,me.w6)(0,2).map((function(e){return(0,H.jsx)(x.ZP,{item:!0,xs:1,height:"100%",children:(0,H.jsx)(Tn.Z,{characterKey:i.team[e],index:e})},e)}))})})]})]})}),(0,H.jsxs)(x.ZP,{item:!0,xs:12,sm:7,md:8,lg:9.5,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,H.jsxs)(x.ZP,{container:!0,spacing:1,columns:{xs:2,sm:2,md:3,lg:4,xl:6},children:[(0,H.jsx)(x.ZP,{item:!0,xs:1,children:(0,H.jsx)(dt,{weaponId:i.equippedWeapon,BGComponent:O.Z,onClick:function(){return l("equip")}})}),ee.eV.map((function(e){return(0,H.jsx)(x.ZP,{item:!0,xs:1,children:(0,H.jsx)(tt,{artifactId:n.get(Y.ri.art[e].id).value,slotKey:e,BGComponent:O.Z,onClick:function(){return l("equip")}})},e)}))]}),(0,H.jsx)(zr,{})]})]})}var Er=["eleMas","critRate_","critDMG_","enerRech_","heal_"],Kr=[].concat(["atk","hp","def"],Er).map((function(e){return Y.ri.total[e]})),Ar=["atk_","atk","hp_","hp","def_","def"].concat(Er),_r=[].concat((0,Rt.Z)(ee.Kj.map((function(e){return Y.ri.total["".concat(e,"_dmg_")]}))),(0,Rt.Z)(ee.Kj.map((function(e){return Y.ri.total["".concat(e,"_res_")]}))),(0,Rt.Z)(["stamina","incHeal_","shield_","cdRed_"].map((function(e){return Y.ri.total[e]})))),Or=_r.map((function(e){return e.info.key})),Dr=[Y.ri.total.all_dmg_].concat((0,Rt.Z)(ee.Kj.map((function(e){return Y.ri.total["".concat(e,"_enemyRes_")]}))),[Y.ri.total.normal_dmg_,Y.ri.total.normal_critRate_,Y.ri.total.charged_dmg_,Y.ri.total.charged_critRate_,Y.ri.total.plunging_dmg_,Y.ri.total.plunging_critRate_,Y.ri.total.skill_dmg_,Y.ri.total.skill_critRate_,Y.ri.total.burst_dmg_,Y.ri.total.burst_critRate_],(0,Rt.Z)(Object.keys(Sr.Ne).map((function(e){return Y.ri.total["".concat(e,"_dmg_")]}))),(0,Rt.Z)(Object.keys(Sr.UT).map((function(e){return Y.ri.total["".concat(e,"_dmg_")]}))),(0,Rt.Z)(["moveSPD_","atkSPD_","weakspotDMG_"].map((function(e){return Y.ri.total[e]}))),[Y.ri.total.dmgRed_]),Mr=Dr.map((function(e){return e.info.key})),Ir={xs:12,sm:12,md:6,lg:4};function Lr(e){var t=e.nodes,n=e.statBreakpoint,r=e.extra,i=(0,P.useContext)(X.R),a=i.data,s=i.oldData;return(0,H.jsxs)(x.ZP,{container:!0,columnSpacing:{xs:2,lg:3},rowSpacing:1,children:[t.map((function(e){var t,r;return(0,H.jsx)(x.ZP,(0,T.Z)((0,T.Z)({item:!0},n),{},{children:(0,H.jsx)(Se.JW,{node:a.get(e),oldValue:null===s||void 0===s||null===(r=s.get(e))||void 0===r?void 0:r.value})}),null===(t=e.info)||void 0===t?void 0:t.key)})),r]})}function zr(){var e=(0,P.useContext)(X.R),t=e.data,n=e.character,r=e.character.key,i=(0,de.Z)(r),a=t.get(Y.ri.special);return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(Rr,{title:"Main Stats",content:(0,H.jsx)(Lr,{statBreakpoint:Ir,nodes:Kr,extra:a&&(0,H.jsxs)(x.ZP,(0,T.Z)((0,T.Z)({item:!0},Ir),{},{display:"flex",flexDirection:"row",justifyContent:"space-between",children:[(0,H.jsxs)("span",{children:[(0,H.jsx)("b",{children:"Special:"})," ",(0,H.jsxs)(L.Z,{color:a.info.variant,children:[a.info.key&&ne.Z[a.info.key]," ",a.info.key&&Q.ZP.get(a.info.key)]})]}),(0,H.jsx)("span",{children:(0,Q.EC)(a.value,a.unit)})]}))}),editContent:(0,H.jsx)(x.ZP,{container:!0,columnSpacing:2,rowSpacing:1,children:Ar.map((function(e){var t,r=Q.ZP.get(e);return(0,H.jsx)(x.ZP,{item:!0,xs:12,lg:6,children:(0,H.jsx)(J,{name:(0,H.jsxs)("span",{children:[ne.Z[e]," ",r]}),placeholder:Q.ZP.getStr(e),value:null!==(t=n.bonusStats[e])&&void 0!==t?t:0,percent:"%"===Q.ZP.unit(e),onValueChange:function(t){return i({type:"editStats",statKey:e,value:t})}})},e)}))})}),(0,H.jsx)(Rr,{title:"Other Stats",content:(0,H.jsx)(Lr,{statBreakpoint:Ir,nodes:_r}),editContent:(0,H.jsx)(x.ZP,{container:!0,columnSpacing:2,rowSpacing:1,children:Or.map((function(e){var t,r=Q.ZP.get(e);return(0,H.jsx)(x.ZP,{item:!0,xs:12,lg:6,children:(0,H.jsx)(J,{name:(0,H.jsxs)("span",{children:[ne.Z[e]," ",r]}),placeholder:Q.ZP.getStr(e),value:null!==(t=n.bonusStats[e])&&void 0!==t?t:0,percent:"%"===Q.ZP.unit(e),defaultValue:void 0,onValueChange:function(t){return i({type:"editStats",statKey:e,value:t})}})},e)}))})}),(0,H.jsx)(Rr,{title:"Misc Stats",content:(0,H.jsx)(Lr,{statBreakpoint:{xs:12,sm:12,md:6},nodes:Dr}),editContent:(0,H.jsx)(x.ZP,{container:!0,columnSpacing:2,rowSpacing:1,children:Mr.map((function(e){var t,r=Q.ZP.get(e);return(0,H.jsx)(x.ZP,{item:!0,xs:12,lg:6,children:(0,H.jsx)(J,{name:(0,H.jsxs)("span",{children:[ne.Z[e]," ",r]}),placeholder:Q.ZP.getStr(e),value:null!==(t=n.bonusStats[e])&&void 0!==t?t:0,percent:"%"===Q.ZP.unit(e),onValueChange:function(t){return i({type:"editStats",statKey:e,value:t})}})},e)}))})})]})}function Rr(e){var t=e.title,n=e.content,i=e.editContent,a=(0,P.useState)(!1),s=(0,r.Z)(a,2),l=s[0],o=s[1];return(0,H.jsxs)(O.Z,{children:[(0,H.jsx)(h.Z,{sx:{py:1},children:(0,H.jsxs)(u.Z,{display:"flex",justifyContent:"space-between",children:[(0,H.jsx)(p.Z,{variant:"subtitle1",children:t}),(0,H.jsx)(Z.Z,{size:"small",color:l?"error":"info",onClick:function(){return o(!l)},children:(0,H.jsxs)("span",{children:[(0,H.jsx)(q.G,{icon:l?B.r6l:B.Xcf})," ",l?"EXIT":"Edit Stats"]})})]})}),(0,H.jsx)(k.Z,{}),(0,H.jsx)(h.Z,{children:l?i:n})]})}var Tr={xs:12,sm:6,md:4};function Br(){var e=(0,P.useContext)(X.R),t=e.data,n=e.character,i=e.characterSheet,a=(0,de.Z)(n.key),s=t.get(Y.ri.charEle).value,l=t.get(Y.ri.asc).value,o=t.get(Y.ri.constellation).value,c=(0,ye.Z)(),d=(0,je.Z)(c.breakpoints.up("lg")),f=(0,P.useMemo)((function(){return(0,me.w6)(1,6).map((function(e){return(0,H.jsx)(Wr,{talentKey:"constellation".concat(e),subtitle:"Constellation Lv. ".concat(e),onClickTitle:function(){return a({constellation:e===o?e-1:e})}})}))}),[o,a]);return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(qr,{}),(0,H.jsxs)(x.ZP,{container:!0,spacing:1,children:[d&&(0,H.jsxs)(x.ZP,{item:!0,xs:12,md:12,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,H.jsx)(O.Z,{children:(0,H.jsx)(h.Z,{children:(0,H.jsxs)(p.Z,{variant:"h6",sx:{textAlign:"center"},children:["Constellation Lv. ",o]})})}),f.map((function(e,t){return(0,H.jsx)(u.Z,{sx:{opacity:o>=t+1?1:.5},children:e},t)}))]}),(0,H.jsxs)(x.ZP,{item:!0,xs:12,md:12,lg:9,container:!0,spacing:1,children:[[["auto","Normal/Charged Attack"],["skill","Elemental Skill"],["burst","Elemental Burst"]].map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,H.jsx)(x.ZP,(0,T.Z)((0,T.Z)({item:!0},Tr),{},{children:(0,H.jsx)(Wr,{talentKey:n,subtitle:i})}),n)})),!!i.getTalentOfKey("sprint",s)&&(0,H.jsx)(x.ZP,(0,T.Z)((0,T.Z)({item:!0},Tr),{},{children:(0,H.jsx)(Wr,{talentKey:"sprint",subtitle:"Alternative Sprint"})})),!!i.getTalentOfKey("passive",s)&&(0,H.jsx)(x.ZP,(0,T.Z)((0,T.Z)({item:!0},Tr),{},{children:(0,H.jsx)(Wr,{talentKey:"passive",subtitle:"Passive"})})),[["passive1","Unlocked at Ascension 1",1],["passive2","Unlocked at Ascension 4",4],["passive3","Unlocked by Default",0]].map((function(e){var t=(0,r.Z)(e,3),n=t[0],a=t[1],o=t[2],c=l>=o;return i.getTalentOfKey(n,s)?(0,H.jsx)(x.ZP,(0,T.Z)((0,T.Z)({item:!0,style:{opacity:c?1:.5}},Tr),{},{children:(0,H.jsx)(Wr,{talentKey:n,subtitle:a})}),n):null}))]}),!d&&(0,H.jsxs)(x.ZP,{item:!0,xs:12,md:12,lg:3,container:!0,spacing:1,children:[(0,H.jsx)(x.ZP,{item:!0,xs:12,children:(0,H.jsx)(O.Z,{children:(0,H.jsx)(h.Z,{children:(0,H.jsxs)(p.Z,{variant:"h6",sx:{textAlign:"center"},children:["Constellation Lv. ",o]})})})}),f.map((function(e,t){return(0,H.jsx)(x.ZP,(0,T.Z)((0,T.Z)({item:!0,sx:{opacity:o>=t+1?1:.5}},Tr),{},{children:e}),t)}))]})]})]})}function qr(){var e=(0,P.useContext)(X.R).data.getDisplay().reaction;return(0,H.jsx)(O.Z,{sx:{mb:1},children:(0,H.jsx)(h.Z,{children:(0,H.jsx)(x.ZP,{container:!0,spacing:1,children:Object.entries(e).map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsx)(_.Z,{children:(0,H.jsx)(h.Z,{sx:{p:1,"&:last-child":{pb:1}},children:(0,H.jsx)(Se.JW,{node:i})})})},n)}))})})})}var Nr=[1,1,2,4,6,8,10];function Wr(e){var t=e.talentKey,n=e.subtitle,r=e.onClickTitle,i=(0,P.useContext)(X.R),a=i.data,s=i.character.talent,l=i.characterSheet,o=i.characterDispatch,c=(0,P.useCallback)((function(e){return(0,H.jsx)(Fe.Z,{onClick:r,children:e})}),[r]),d=null;if(t in s){var f=a.get(Y.ri.bonus[t]).value,m=a.get(Y.ri.total[t]).value,v=a.get(Y.ri.asc).value;d=(0,H.jsx)(R.Z,{fullWidth:!0,title:"Talent Lv. ".concat(m),color:f?"info":"primary",sx:{borderRadius:0},children:(0,me.w6)(1,Nr[v]).map((function(e){return(0,H.jsxs)(g.Z,{selected:s[t]===e,disabled:s[t]===e,onClick:function(){return n=e,s[t]=n,void o({talent:s});var n},children:["Talent Lv. ",e+f]},e)}))})}var Z=l.getTalentOfKey(t,a.get(Y.ri.charEle).value);return(0,H.jsxs)(O.Z,{sx:{height:"100%"},children:[d,(0,H.jsxs)(h.Z,{children:[(0,H.jsx)(Qe.Z,{condition:!!r,wrapper:c,children:(0,H.jsxs)(x.ZP,{container:!0,sx:{flexWrap:"nowrap"},children:[(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsx)(u.Z,{component:"img",src:null===Z||void 0===Z?void 0:Z.img,sx:{width:60,height:"auto"}})}),(0,H.jsxs)(x.ZP,{item:!0,flexGrow:1,sx:{pl:1},children:[(0,H.jsx)(p.Z,{variant:"h6",children:null===Z||void 0===Z?void 0:Z.name}),(0,H.jsx)(p.Z,{variant:"subtitle1",children:n})]})]})}),null!==Z&&void 0!==Z&&Z.sections?(0,H.jsx)(Ae.Z,{sections:Z.sections,hideDesc:!0,hideHeader:function(e){var n,r=null===(n=e.header)||void 0===n?void 0:n.action;return!(!r||"string"===typeof r)&&r.props.children.props.key18.includes(t)}}):null]})]})}var Vr=n(43992),Gr=n(31038),Fr=n(55221),Hr=n(11741);function Ur(){return(0,H.jsx)(Ce.Z,{display:"flex",flexDirection:"column",gap:1,alignItems:"stretch",children:(0,H.jsxs)(x.ZP,{container:!0,spacing:1,children:[(0,H.jsxs)(x.ZP,{item:!0,xs:12,md:6,lg:3,sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,H.jsx)($r,{}),(0,H.jsx)(Jr,{})]}),(0,me.w6)(0,2).map((function(e){return(0,H.jsx)(x.ZP,{item:!0,xs:12,md:6,lg:3,children:(0,H.jsx)(Xr,{index:e})},e)}))]})})}function $r(){var e,t,n,i=(0,P.useContext)(X.R),a=i.data,s=i.oldData,l=a.getTeamBuff(),o=[];return Object.entries(null!==(e=l.total)&&void 0!==e?e:{}).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return!i.isEmpty&&0!==i.value&&o.push([["total",n],i])})),Object.entries(null!==(t=l.premod)&&void 0!==t?t:{}).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return!i.isEmpty&&0!==i.value&&o.push([["premod",n],i])})),Object.entries(null!==(n=l.enemy)&&void 0!==n?n:{}).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return!i.isEmpty&&0!==i.value&&o.push([["enemy",n],i])})),o.length?(0,H.jsxs)(O.Z,{children:[(0,H.jsx)(h.Z,{children:"Team Buffs"}),(0,H.jsx)(k.Z,{}),(0,H.jsx)(h.Z,{children:(0,H.jsx)(x.ZP,{container:!0,children:o.map((function(e,t){var n,i=(0,r.Z)(e,2),a=i[0],l=i[1];return l&&(0,H.jsx)(x.ZP,{item:!0,xs:12,children:(0,H.jsx)(Se.JW,{node:l,oldValue:null===(n=(0,me.Hm)(null===s||void 0===s?void 0:s.getTeamBuff(),a))||void 0===n?void 0:n.value})},l.info.key)}))})})]}):null}function Jr(){var e=(0,P.useContext)(X.R).data;return(0,H.jsx)(H.Fragment,{children:Hr.J.map((function(t,n){var r=(0,H.jsx)(Fr.Z,{title:(0,H.jsx)(p.Z,{children:t.desc})}),i=(0,H.jsxs)("span",{children:[t.name," ",r]});return(0,H.jsxs)(O.Z,{sx:{opacity:t.canShow(e)?1:.5},children:[(0,H.jsx)(b.Z,{title:i,action:t.icon,titleTypographyProps:{variant:"subtitle2"}}),t.canShow(e)&&(0,H.jsx)(k.Z,{}),t.canShow(e)&&(0,H.jsx)(h.Z,{children:(0,H.jsx)(Ae.Z,{sections:t.sections,teamBuffOnly:!0,hideDesc:!0})})]},n)}))})}function Xr(e){var t=e.index,n=(0,P.useContext)(X.R),r=(0,E.$)("page_character").t,i=n.character,a=n.teamData,s=n.characterDispatch,l=i.key,o=i.team[t],c=(0,de.Z)(o),u=(0,he.Z)(),d=a[o],x=d&&{character:d.character,characterSheet:d.characterSheet,data:d.target,teamData:a,mainStatAssumptionLevel:0,characterDispatch:c};return(0,H.jsxs)(O.Z,{children:[(0,H.jsx)(h.Z,{children:(0,H.jsx)(Gr.Z,{fullWidth:!0,value:o,onChange:function(e){return s({type:"team",index:t,charKey:e})},disable:function(e){return e===l||i.team.includes(e)},labelText:r("teammate",{count:t+1}),defaultText:r("none"),defaultIcon:(0,H.jsx)(Vr.Z,{}),showDefault:!0})}),x&&(0,H.jsx)(X.R.Provider,{value:x,children:(0,H.jsx)(Wt.Z,{characterKey:o,onClickHeader:u,artifactChildren:(0,H.jsx)(Yr,{}),weaponChildren:(0,H.jsx)(Qr,{}),characterChildren:(0,H.jsx)(ei,{}),isTeammateCard:!0})})]})}function Yr(){var e=(0,P.useContext)(X.R).data,t=(0,xe.Z)(_e.y.getAll,[]),n=(0,P.useMemo)((function(){return t&&Object.entries(_e.y.setEffects(t,e)).flatMap((function(e){var n=(0,r.Z)(e,2),i=n[0];return n[1].flatMap((function(e){return t[i].setEffectDocument(e)}))}))}),[t,e]);return n?(0,H.jsx)(Ae.Z,{sections:n,teamBuffOnly:!0}):null}function Qr(){var e=(0,P.useContext)(X.R),t=e.teamData[e.character.key].weaponSheet;return t.document?(0,H.jsx)(Ae.Z,{sections:t.document,teamBuffOnly:!0}):null}function ei(){var e=(0,P.useContext)(X.R),t=e.data,n=e.teamData[e.character.key].characterSheet.getTalent(t.get(Y.ri.charEle).value),r=Object.values(n.sheets).flatMap((function(e){return e.sections}));return r?(0,H.jsx)(Ae.Z,{sections:r,teamBuffOnly:!0}):null}function ti(){var e,t=(0,A.s0)(),n=(0,A.UO)().characterKey;return!ee.IV.includes(null!==(e=n)&&void 0!==e?e:"")?(0,H.jsx)(A.Fg,{to:"/characters"}):(0,H.jsx)(u.Z,{my:1,display:"flex",flexDirection:"column",gap:1,children:n&&(0,H.jsx)(P.Suspense,{fallback:(0,H.jsx)(d.Z,{variant:"rectangular",width:"100%",height:1e3}),children:(0,H.jsx)(ni,{characterKey:n,onClose:function(){return t("/characters")}})})})}function ni(e){var t,n,r,i=e.characterKey,a=e.newteamData,s=e.mainStatAssumptionLevel,l=void 0===s?0:s,o=e.onClose,c=(0,fe.Z)(i,l),u=null!==(t=null===c||void 0===c?void 0:c[i])&&void 0!==t?t:{},m=u.character,v=u.characterSheet,Z=u.target,j=(null!==(n=(0,A.bS)({path:"/characters/:charKey/:tab",end:!1}))&&void 0!==n?n:{params:{tab:"overview"}}).params.tab,g=void 0===j?"overview":j,y=(0,E.$)().t;(0,pe.Z)("".concat(y("char_".concat(i,"_gen:name"))," - ").concat(y("page_character:tabs.".concat(g))));var b=(0,de.Z)(null!==(r=null===m||void 0===m?void 0:m.key)&&void 0!==r?r:""),k=(null!==m&&void 0!==m?m:{}).compareData,w=(0,P.useMemo)((function(){if(c&&m&&v&&Z)return{character:m,characterSheet:v,mainStatAssumptionLevel:l,data:a?a[i].target:Z,teamData:a||c,oldData:k&&a?Z:void 0,characterDispatch:b}}),[m,v,l,a,Z,c,b,i,k]);return c&&m&&v&&Z&&w?(0,H.jsx)(_.Z,{children:(0,H.jsx)(X.R.Provider,{value:w,children:(0,H.jsxs)(h.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,H.jsxs)(x.ZP,{container:!0,spacing:1,children:[(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsx)(ii,{})}),(0,H.jsx)(x.ZP,{item:!0,flexGrow:1}),!!l&&(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsx)(f.Z,{sx:{p:1,bgcolor:function(e){return e.palette.warning.dark}},children:(0,H.jsx)(p.Z,{children:(0,H.jsxs)("strong",{children:["Assume Main Stats are Level ",l]})})})}),!!o&&(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsx)(I.Z,{onClick:o})})]}),(0,H.jsx)(O.Z,{children:(0,H.jsx)(ri,{tab:g})}),(0,H.jsx)(ai,{}),(0,H.jsx)(re,{}),(0,H.jsx)(P.Suspense,{fallback:(0,H.jsx)(d.Z,{variant:"rectangular",width:"100%",height:500}),children:(0,H.jsxs)(A.Z5,{children:[(0,H.jsx)(A.AW,{index:!0,element:(0,H.jsx)(Pr,{})}),(0,H.jsx)(A.AW,{path:"/talent",element:(0,H.jsx)(Br,{})}),(0,H.jsx)(A.AW,{path:"/equip",element:(0,H.jsx)(_t,{})}),(0,H.jsx)(A.AW,{path:"/teambuffs",element:(0,H.jsx)(Ur,{})}),(0,H.jsx)(A.AW,{path:"/optimize",element:(0,H.jsx)(jr,{})})]})}),(0,H.jsx)(O.Z,{children:(0,H.jsx)(ri,{tab:g})})]})})}):(0,H.jsx)(H.Fragment,{})}function ri(e){var t=e.tab,n=(0,E.$)("page_character").t;return(0,H.jsxs)(m.Z,{value:t,variant:"scrollable",allowScrollButtonsMobile:!0,sx:{"& .MuiTab-root:hover":{transition:"background-color 0.25s ease",backgroundColor:"rgba(255,255,255,0.1)"}},children:[(0,H.jsx)(v.Z,{sx:{minWidth:"20%"},value:"overview",label:n("tabs.overview"),icon:(0,H.jsx)(i.Z,{}),component:K.rU,to:""}),(0,H.jsx)(v.Z,{sx:{minWidth:"20%"},value:"talent",label:n("tabs.talent"),icon:(0,H.jsx)(a.Z,{}),component:K.rU,to:"talent"}),(0,H.jsx)(v.Z,{sx:{minWidth:"20%"},value:"equip",label:n("tabs.equip"),icon:(0,H.jsx)(s.Z,{}),component:K.rU,to:"equip"}),(0,H.jsx)(v.Z,{sx:{minWidth:"20%"},value:"teambuffs",label:n("tabs.teambuffs"),icon:(0,H.jsx)(l.Z,{}),component:K.rU,to:"teambuffs"}),(0,H.jsx)(v.Z,{sx:{minWidth:"20%"},value:"optimize",label:n("tabs.optimize"),icon:(0,H.jsx)(o.Z,{}),component:K.rU,to:"optimize"})]})}function ii(){var e,t=(0,E.$)("page_character").t,n=(0,P.useContext)(X.R),i=n.character,a=n.characterSheet,s=n.characterDispatch,l=(0,P.useState)(!1),o=(0,r.Z)(l,2),c=o[0],u=o[1],d=(0,he.Z)(),h=(0,P.useCallback)((function(e){e=(0,me.uZ)(e,1,90);var t=oe.SJ.findIndex((function(t){return e<=t}));s({level:e,ascension:t})}),[s]),f=(0,P.useCallback)((function(){if(i){var e=i.level,t=void 0===e?1:e,n=i.ascension,r=void 0===n?0:n,a=oe.SJ.findIndex((function(e){return 90!==t&&t===e}));s(r===a?{ascension:r+1}:{ascension:a})}}),[s,i]),p=i.elementKey,m=void 0===p?"anemo":p,v=i.level,y=void 0===v?1:v,b=i.ascension,k=void 0===b?0:b;return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)(D.w,{show:c,onHide:function(){return u(!1)},onSelect:d}),(0,H.jsxs)(x.ZP,{container:!0,spacing:1,children:[(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsx)(Z.Z,{color:"info",onClick:function(){return u(!0)},startIcon:(0,H.jsx)(M.Z,{src:null===a||void 0===a?void 0:a.thumbImgSide}),children:null!==(e=null===a||void 0===a?void 0:a.name)&&void 0!==e?e:t("selectCharacter")})}),(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsxs)(j.Z,{sx:{bgcolor:function(e){return e.palette.contentDark.main}},children:[(null===a||void 0===a?void 0:a.sheet)&&"talents"in(null===a||void 0===a?void 0:a.sheet)&&(0,H.jsx)(R.Z,{title:(0,H.jsx)("strong",{children:(0,H.jsx)(L.Z,{color:m,children:(0,ce.Oy)("element.".concat(m))})}),children:Object.keys(a.sheet.talents).map((function(e){return(0,H.jsx)(g.Z,{selected:m===e,disabled:m===e,onClick:function(){return s({elementKey:e})},children:(0,H.jsx)("strong",{children:(0,H.jsx)(L.Z,{color:e,children:(0,ce.Oy)("element.".concat(e))})})},e)}))}),(0,H.jsx)(z.CC,{children:(0,H.jsx)(z.ZP,{onChange:h,value:y,startAdornment:"Lv. ",inputProps:{min:1,max:90,sx:{textAlign:"center"}},sx:{width:"100%",height:"100%",pl:2},disabled:!a})}),(0,H.jsx)(Z.Z,{sx:{pl:1},disabled:!(0,oe.ek)(y)||!a,onClick:f,children:(0,H.jsxs)("strong",{children:["/ ",oe.SJ[k]]})}),(0,H.jsx)(R.Z,{title:t("selectLevel"),disabled:!a,children:oe.D4.map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1],a=n===oe.SJ[i]?"Lv. ".concat(n):"Lv. ".concat(n,"/").concat(oe.SJ[i]),l=n===y&&i===k;return(0,H.jsx)(g.Z,{selected:l,disabled:l,onClick:function(){return s({level:n,ascension:i})},children:a},"".concat(n,"/").concat(i))}))})]})})]})]})}function ai(){var e=(0,E.$)("page_character").t,t=(0,P.useState)(!1),n=(0,r.Z)(t,2),i=n[0],a=n[1],s=(0,P.useCallback)((function(){return a(!i)}),[a,i]);return(0,H.jsxs)(O.Z,{children:[(0,H.jsxs)(h.Z,{sx:{display:"flex",gap:1},children:[(0,H.jsxs)(x.ZP,{container:!0,spacing:1,children:[(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsx)(se.Hn,{size:"small"})}),(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsx)(se.pg,{})}),(0,H.jsx)(x.ZP,{item:!0,children:(0,H.jsx)(se.oX,{size:"small"})})]}),(0,H.jsxs)(u.Z,{display:"flex",gap:1,children:[(0,H.jsxs)(u.Z,{children:[(0,H.jsxs)(p.Z,{variant:"subtitle2",children:[e("formulas")," ","&"]}),(0,H.jsx)(p.Z,{variant:"subtitle2",children:e("calculations")})]}),(0,H.jsx)(te.Z,{expand:i,onClick:s,"aria-expanded":i,"aria-label":"show more",size:"small",sx:{p:0},children:(0,H.jsx)(c.Z,{})})]})]}),(0,H.jsx)(y.Z,{in:i,timeout:"auto",unmountOnExit:!0,children:(0,H.jsx)(h.Z,{sx:{pt:0},children:(0,H.jsx)(si,{})})})]})}function si(){var e=(0,P.useContext)(X.R).data,t=(0,ue.U)(e);return(0,H.jsx)(P.Suspense,{fallback:(0,H.jsx)(d.Z,{variant:"rectangular",width:"100%",height:1e3}),children:(0,H.jsx)(u.Z,{sx:{mr:-1,mb:-1},children:t.map((function(e){var t=(0,r.Z)(e,2),n=t[0],i=t[1];return(0,H.jsx)(li,{displayNs:i,sectionKey:n},n)}))})})}function li(e){var t=e.sectionKey,n=e.displayNs,i=(0,P.useContext)(X.R).data,a=(0,xe.Z)((0,ue.f)(i,t),[i,t]);if(!a)return null;if(Object.entries(n).every((function(e){var t=(0,r.Z)(e,2);t[0];return t[1].isEmpty})))return null;var s=a.title,l=a.icon,o=a.action;return(0,H.jsxs)(_.Z,{sx:{mb:1},children:[(0,H.jsx)(b.Z,{avatar:l&&(0,H.jsx)(le.Z,{size:2,sx:{m:-1},src:l}),title:s,action:o,titleTypographyProps:{variant:"subtitle1"}}),(0,H.jsx)(k.Z,{}),(0,H.jsx)(h.Z,{children:Object.entries(n).map((function(e){var t,n=(0,r.Z)(e,2),i=n[0],a=n[1];return!a.isEmpty&&(0,H.jsxs)(w.Z,{sx:{bgcolor:"contentLight.main"},children:[(0,H.jsx)(C.Z,{expandIcon:(0,H.jsx)(c.Z,{}),children:(0,H.jsxs)(p.Z,{children:[(0,H.jsx)(L.Z,{color:a.info.variant,children:Q.ZP.get(null!==(t=a.info.key)&&void 0!==t?t:"")})," ",(0,H.jsx)("strong",{children:(0,Q.EC)(a.value,a.unit)})]})}),(0,H.jsx)(S.Z,{children:a.formulas.map((function(e,t){return(0,H.jsx)(p.Z,{children:e},t)}))})]},i)}))})]})}},90543:function(e,t,n){n.d(t,{Z:function(){return R}});var r,i=n(30168),a=n(53174),s=n(54483),l=n(40117),o=n(62002),c=n(63204),u=n(66647),d=n(68870),h=n(47047),x=n(13400),f=n(20890),p=n(39504),m=n(2199),v=n(40165),Z=n(24518),j=n(72791),g=n(22020),y=n(2191),b=n(71310),k=n(31038),w=n(40020),C=n(20005),S=n(55942),P=n(10157),E=n(75545),K=n(2139),A=n(66218),_=n(56928),O=n(26138),D=n(73036),M=n(79406),I=n(42320),L=n(74480),z=n(80184);function R(e){var t,n=e.weaponId,R=e.onClick,T=e.onEdit,B=e.onDelete,q=e.canEquip,N=void 0!==q&&q,W=e.extraButtons,V=(0,g.$)(["page_weapon","ui"]).t,G=(0,j.useContext)(_.t).database,F=(0,L.Z)(n),H=(0,I.Z)(null!==F&&void 0!==F&&F.key?A.Z.get(F.key):void 0,[null===F||void 0===F?void 0:F.key]),U=(0,j.useCallback)((function(e){return e.weaponTypeKey===(null===H||void 0===H?void 0:H.weaponType)}),[H]),$=(0,j.useCallback)((function(e){return(0,z.jsx)(u.Z,{onClick:function(){return null===R||void 0===R?void 0:R(n)},children:e})}),[R,n]),J=(0,j.useCallback)((function(e){return(0,z.jsx)(d.Z,{children:e})}),[]),X=(0,j.useCallback)((function(e){return G.setWeaponLocation(n,e)}),[G,n]),Y=(0,j.useMemo)((function(){return H&&F&&(0,D.mP)([H.data,(0,D.v0)(F)])}),[H,F]);if(!F||!H||!Y)return null;var Q=F.level,ee=F.ascension,te=F.refinement,ne=F.id,re=F.location,ie=void 0===re?"":re,ae=F.lock,se=Y.get(O.ri.weapon.type).value,le=[O.ri.weapon.main,O.ri.weapon.sub,O.ri.weapon.sub2].map((function(e){return Y.get(e)})),oe=ee<2?null===H||void 0===H?void 0:H.img:null===H||void 0===H?void 0:H.imgAwaken;return(0,z.jsx)(j.Suspense,{fallback:(0,z.jsx)(h.Z,{variant:"rectangular",sx:{width:"100%",height:"100%",minHeight:300}}),children:(0,z.jsxs)(b.Z,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,z.jsxs)(C.Z,{condition:!!R,wrapper:$,falseWrapper:J,children:[(0,z.jsxs)(d.Z,{className:"grad-".concat(H.rarity,"star"),sx:{position:"relative",pt:2,px:2},children:[!R&&(0,z.jsx)(x.Z,{color:"primary",onClick:function(){return G.updateWeapon({lock:!ae},ne)},sx:{position:"absolute",right:0,bottom:0,zIndex:2},children:ae?(0,z.jsx)(l.Z,{}):(0,z.jsx)(o.Z,{})}),(0,z.jsxs)(d.Z,{sx:{position:"relative",zIndex:1},children:[(0,z.jsxs)(d.Z,{component:"div",sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[(0,z.jsx)(S.Z,{sx:{fontSize:"1.5em"},src:null===(t=y.Z.weaponTypes)||void 0===t?void 0:t[se]}),(0,z.jsx)(f.Z,{noWrap:!0,sx:{textAlign:"center",backgroundColor:"rgba(100,100,100,0.35)",borderRadius:"1em",px:1},children:(0,z.jsx)("strong",{children:H.name})})]}),(0,z.jsxs)(f.Z,{component:"span",variant:"h5",children:["Lv. ",Q]}),(0,z.jsxs)(f.Z,{component:"span",variant:"h5",color:"text.secondary",children:["/",K.SJ[ee]]}),(0,z.jsxs)(f.Z,{variant:"h6",children:["Refinement ",(0,z.jsx)("strong",{children:te})]}),(0,z.jsx)(f.Z,{children:(0,z.jsx)(P.t,{stars:H.rarity,colored:!0})})]}),(0,z.jsx)(d.Z,{sx:{height:"100%",position:"absolute",right:0,top:0},children:(0,z.jsx)(d.Z,{component:"img",src:null!==oe&&void 0!==oe?oe:"",width:"auto",height:"100%",sx:{float:"right"}})})]}),(0,z.jsx)(p.Z,{children:le.map((function(e){if(!e.info.key)return null;var t=(0,M.EC)(e.value,e.unit,e.unit?void 0:0);return(0,z.jsxs)(d.Z,{sx:{display:"flex"},children:[(0,z.jsxs)(f.Z,{flexGrow:1,children:[E.Z[e.info.key]," ",M.ZP.get(e.info.key)]}),(0,z.jsx)(f.Z,{children:t})]},e.info.key)}))})]}),(0,z.jsxs)(d.Z,{sx:{p:1,display:"flex",gap:1,justifyContent:"space-between",alignItems:"center"},children:[N?(0,z.jsx)(k.Z,{size:"small",sx:{flexGrow:1},showDefault:!0,defaultIcon:(0,z.jsx)(c.Z,{}),defaultText:V("inventory"),value:ie,onChange:X,filter:U}):(0,z.jsx)(w.Z,{location:ie}),(0,z.jsxs)(m.Z,{children:[!!T&&(0,z.jsx)(v.Z,{title:(0,z.jsx)(f.Z,{children:V(r||(r=(0,i.Z)(["page_weapon:edit"])))}),placement:"top",arrow:!0,children:(0,z.jsx)(Z.Z,{color:"info",onClick:function(){return T(ne)},children:(0,z.jsx)(s.G,{icon:a.Xcf,className:"fa-fw"})})}),!!B&&(0,z.jsx)(Z.Z,{color:"error",onClick:function(){return B(ne)},disabled:!!ie||ae,children:(0,z.jsx)(s.G,{icon:a.I7k,className:"fa-fw"})}),W]})]})]})})}},70645:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(13967),i=n(95193);function a(){var e=(0,r.Z)(),t=(0,i.Z)(e.breakpoints.up("sm")),n=(0,i.Z)(e.breakpoints.up("md")),a=(0,i.Z)(e.breakpoints.up("lg"));return(0,i.Z)(e.breakpoints.up("xl"))?"xl":a?"lg":n?"md":t?"sm":"xs"}},74480:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(29439),i=n(72791),a=n(56928);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,i.useContext)(a.t),n=t.database,s=(0,i.useState)(n._getWeapon(e)),l=(0,r.Z)(s,2),o=l[0],c=l[1];return(0,i.useEffect)((function(){return c(n._getWeapon(e))}),[n,e]),(0,i.useEffect)((function(){return e?n.followWeapon(e,c):void 0}),[e,c,n]),o}},52771:function(e,t,n){n.d(t,{JR:function(){return c},e6:function(){return u},g4:function(){return a},mf:function(){return l},vL:function(){return i},yJ:function(){return s}});var r=n(60393),i=1e3,a=60*i,s=60*a,l=24*s;function o(e){var t=e%1e3,n=Math.floor(e/1e3%60),r=Math.floor(e/6e4%60);return{hours:Math.floor(e/36e5),minutes:r,seconds:n,milliseconds:t}}function c(e){var t=o(e),n=t.hours,i=t.minutes,a=t.seconds,s="Minutes";return n&&(s="Hours"),"".concat(n?"".concat(n,":"):"").concat((0,r.H_)(i,"0",2),":").concat((0,r.H_)(a,"0",2)," ").concat(s)}function u(e){var t=o(e),n=t.hours,i=t.minutes,a=t.seconds,s=t.milliseconds,l="Minutes";return n&&(l="Hours"),"".concat(n?"".concat(n,":"):"").concat((0,r.H_)(i,"0",2),":").concat((0,r.H_)(a,"0",2),".").concat((0,r.H_)(s,"0",3)," ").concat(l)}},66045:function(e,t,n){n.d(t,{Ol:function(){return r},Sn:function(){return i},Xg:function(){return a}});var r=["level","rarity"];function i(e){return{level:{getValue:function(e){var t;return null!==(t=e.level)&&void 0!==t?t:0},tieBreaker:"rarity"},rarity:{getValue:function(t){var n;return null===e||void 0===e||null===(n=e[t.key])||void 0===n?void 0:n.rarity},tieBreaker:"level"}}}function a(e){return{rarity:function(t,n){var r;return n.includes(null===e||void 0===e||null===(r=e[t.key])||void 0===r?void 0:r.rarity)},weaponType:function(t,n){var r;return!n||n===(null===e||void 0===e||null===(r=e[t.key])||void 0===r?void 0:r.weaponType)}}}}}]);
//# sourceMappingURL=873.bb477252.chunk.js.map